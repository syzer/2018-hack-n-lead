!function(e){"use strict";function t(e){var t=e.attr("id");if("undefined"===typeof t||""===t){do{t="gigyaShareBar_"+C,C+=1}while(document.getElementById(t));e.attr("id",t)}return t}function n(e,t){if("function"===typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: "+e+"_click",headline:t}}})}catch(e){}}function o(){if("function"===typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"email_click"}}})}catch(e){}}function i(e,t){if("function"===typeof window.trackMetrics)try{window.trackMetrics({type:"social-click",data:{clickObj:{socialType:"social: facebook "+e+"_click",headline:t}}})}catch(e){}}function a(t,o){e.each(t.providers.split(","),function(e,t){n(t,o.title)})}function r(e,t){var n=e.clone();return t&&t.url&&n.setLinkBack(t.url),n}function s(n,o){var i,r,s,c,d=CNN.accounts.cfg.gigya;o=o||{},"undefined"!==typeof o.elem&&"undefined"!==typeof o.elem.data("isshorturl")&&(M=o.elem.data("isshorturl")),r=e("<div>").attr("data-js-gigya-share","wrapper").appendTo("body"),s=t(r),c=M?"never":"whenRequired",i={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:s,userAction:n,moreEnabledProviders:d.primaryProviders+","+d.moreEnabledProviders,shortURLs:c,onSendDone:function(e){a(e,n)}},gigya.socialize.showShareUI(i),window.setTimeout(function(){r.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){r.attr("data-js-gigya-share-active","")},300)}function c(e){var t=N||v;t?(t=r(t,e),s(t,e)):window.console&&window.console.error&&window.console.error("No canonical share widget has been defined")}function d(n,o){var i,r,s,c,d,l,h=CNN.accounts.cfg.gigya;o=o||{},"undefined"!==typeof o.elem&&null!==o.elem&&"function"===typeof o.elem.data&&"undefined"!==typeof o.elem.data("isshorturl")&&(M=o.elem.data("isshorturl")),r=e("<div>"),!Modernizr.mobile||Modernizr.ios&&Modernizr.tablet?r.appendTo(o.elem):(r.appendTo("body"),r.css("z-index","100")),s=t(r),c=M?"never":"whenRequired",i={deviceType:"auto",wrap:!0,operationMode:"simpleShare",containerID:s,userAction:n,moreEnabledProviders:h.primaryProviders+","+h.moreEnabledProviders,shortURLs:c,onSendDone:function(e){a(e,n)},onLoad:function(t){d=e(o.elem).offset(),l=e(o.elem).find(e("div.gig-simpleShareUI")),"undefined"!==typeof l&&d.left<320&&(!Modernizr.mobile||Modernizr.ios&&Modernizr.tablet?e(l).css("margin-left","35px"):e(l).css("margin-left","0px")),e("div.gig-simpleShareUI-caption").on("click",function(){return!1}),e("div.gig-simpleShareUI-button").on("click",function(){return e("div.gig-simpleShareUI").hide(),!1})}},gigya.socialize.showShareUI(i),window.setTimeout(function(){r.attr("data-js-gigya-share-fade","")},10),window.setTimeout(function(){r.attr("data-js-gigya-share-active","")},300)}function l(t){var n,o=t.attr("data-canonical"),i=t.attr("data-user-message"),a=t.attr("data-link"),r=t.attr("data-title"),s=t.attr("data-subtitle"),c=t.attr("data-description"),d=t.attr("data-twitter-account"),l=t.attr("data-image-src"),h=new gigya.socialize.UserAction;return i&&h.setUserMessage(i),a&&(h.setLinkBack(a),h.addActionLink("Read More",a)),r&&h.setTitle(e.trim(r)+(d?" @"+d:"")),s&&h.setSubtitle(s),c&&h.setDescription(c),l&&(n={type:"image",src:l},a&&(n.href=a),h.addMediaItem(n)),"undefined"!==typeof o&&(N=h),M=t.attr("data-isshorturl"),h}function h(n,o,i){var r,s,c=CNN.accounts.cfg.gigya,d=e("<div>"),l=t(d),h=c.showCounts,f="gigya-sharebar-element";k>3&&(f+=" gigya-element-large"),d.addClass(f).appendTo(o),k+=1,"none"===h&&"Facebook-Like"===n&&(h="right"),r=M?"never":"Facebook"===n?"never":"whenRequired",void 0!==c.providerCfg[n]?(c.providerCfg[n].provider=n,s=[c.providerCfg[n]]):s=n,gigya.socialize.showShareBarUI({deviceType:"auto",operationMode:"simpleShare",containerID:l,showCounts:h,userAction:i,shareButtons:s,moreEnabledProviders:c.moreEnabledProviders,shortURLs:r,useEmailCaptcha:!1,showEmailButton:!1,emailBody:"$userMsg$<br /><br />I thought you'd like this:<br />$URL$<br /><br />$title$<br />$description$<br />",useHTML:!0,onSendDone:function(e){a(e,i)}})}function f(e){var t,n=CNN.accounts.cfg.gigya.shareButtons.split(","),o=l(e),i=n.length;for(k=1,"undefined"===typeof v&&(v=o),t=0;t<i;t++)h(n[t],e,o)}function u(e){var t=l(e);e.on("click",function(){s(t,{elem:e})}),e.show()}function g(t){var n,o;t.on("click",function(i){o=e(this),n=l(o),d(n,{elem:t})})}function p(t,n,o,i){if(!t&&window.console&&window.console.error)return void window.console.error("Gigya not loaded -- share bar disabled.");n.each(function(){f(e(this))}),o.each(function(){u(e(this))}),i.each(function(){g(e(this))})}function m(t){var n=e(".js-gigya-sharebar"),o=e(".js-gigya-share"),i=e(".js-gigya-share-collection");(n.length||o.length||i.length)&&(b=t,CNN.accounts.loadGigya(function(e){p(e,n,o,i)}))}function y(){var t,n,a,r,s,c,d=e("html").hasClass("mobile")&&e("html").hasClass("phone"),h=e(".m-share"),f=e(".fb-send-to-messenger-container").detach();for(e(document.body).append(f),t=0;t<h.length;t++)r=e(h[t]),s=r.find(".js-gigya-sharebar"),c=r.find(".share-bar-whatsapp-container").detach(),d&&(s.find(".gig-button-container-twitter").closest(".gigya-sharebar-element").after(c),c.show()),a=r.find(".share-bar-messenger-container").detach(),s.prepend(a),a.show(),n=r.find(".share-bar-email-container").detach(),s.prepend(n),n.show(),n.off("click").on("click",function(t){CNN.contentModel&&"section"===CNN.contentModel.pageType?window.location.href="mailto:?subject="+encodeURIComponent(e(".js-gigya-sharebar").attr("data-title"))+"&body=Check%20out%20this%20story%20on%20CNN:%20"+e(".js-gigya-sharebar").attr("data-link"):CNN.contentModel&&"video"===CNN.contentModel.pageType?window.location.href="mailto:?subject="+encodeURIComponent(e(".js-gigya-sharebar").attr("data-title"))+"&body=Check%20out%20this%20story%20on%20CNN:%20"+e('meta[property="og:url"]')[0].content:window.location.href="mailto:?subject="+encodeURIComponent(e('meta[property="og:title"]')[0].content.replace(/\s*-\ CNN\.com$/,""))+"&body=Check%20out%20this%20story%20on%20CNN:%20"+e('meta[property="og:url"]')[0].content,o()}),a.click(function(t){var n,o,a,r=e(t.target).closest(".js-gigya-sharebar"),s=r.width(),c=e(window).width(),d=e(window).height(),h=e(".fb-send-to-messenger-container"),f=r.height(),u=r.offset(),g=u.left-20,p=u.top+f,m=u.left+s,y=l(r),w=e(".share-bar-messenger-container").data("social-media-name"),b=c-(u.left+s);h.show(),n=h.width(),i(w,y.title),u.left>n?(o=p,a=g-n):b>n?(o=u.top,a=m):(a=Math.max(0,(c-h.outerWidth())/2+e(window).scrollLeft()),o=p),(d<500&&c<1025||c<500)&&(a=Math.max(0,(c-h.outerWidth())/2+e(window).scrollLeft()),o=Math.max(0,(d-h.outerHeight())/2+e(window).scrollTop())),h.css({top:o,left:a,position:"absolute"}),CNN.Facebook.addToFBInitHandlers(function(){FB.init({appId:"989591237802489",xfbml:!0,version:"v2.5"}),function(e,t,n){var o,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(o=e.createElement(t),o.id=n,o.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk")}),h.find(".close-button").click(function(t){var n=e(t.target).closest(".fb-send-to-messenger-container");n.length>0&&n.is(":visible")&&n.hide()})});e(document).click(function(t){e(t.target).closest(".fb-send-to-messenger-container, .share-bar-messenger-container").length||e(".fb-send-to-messenger-container").hide()})}function w(){var t,n,o,i,a=e(".js-gigya-sharebar"),r=e(".js-gigya-share"),s=e(".js-gigya-share-collection");if(a&&a.length>0){for(t=0;t<a.length;t++)o=e(a[t]).find("div.share-bar-whatsapp-container"),i=e(a[t]).find("div.share-bar-messenger-container"),n=e(a[t]).find("div.share-bar-email-container"),"undefined"!==typeof o&&e(a[t]).before(e(o)),"undefined"!==typeof i&&e(a[t]).before(e(i)),"undefined"!==typeof n&&e(a[t]).before(e(n));a.html("")}r&&r.length>0&&r.html(""),s&&s.length>0&&s.html(""),(a.length||r.length||s.length)&&CNN.accounts.loadGigya(function(e){p(e,a,r,s),y()})}var b,v,N,k,C=0,M=!1;e(window).load(y),e(function(){CNN.accounts.onInitialized(m)}),window.CNN=window.CNN||{},CNN.gigyaShareBar=function(){CNN.accounts.onInitialized(m)},CNN.share=CNN.share||{},CNN.share.popup=c,CNN.share.reloadShareBar=w}(jQuery);