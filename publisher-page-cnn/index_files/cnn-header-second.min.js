function sendDeprecationNotification(e){return function(){console.log("[AdFuel - DEPRECATION NOTICE] AMPTManager is DEPRECATED and will be removed in the next version of AdFuel.  Please update your code to reference AdFuel instead of AMPTManager."),window.AdFuel[e].apply(this,arguments)}}function nativoComplete(){"use strict";jQuery(".zn.zn-staggered").each(function(){$staggeredZone=jQuery(this),layoutSize=($staggeredZone.attr("data-eq-state")||"").replace(/^(\S+\s+)*/,""),$staggeredZone.find(".zn__containers .column").each(function(){$staggeredColumn=jQuery(this),void 0!==$staggeredColumn.attr("class")&&$staggeredColumn.attr("class").indexOf("ntv")>-1&&($nativeContainer=$staggeredColumn.find(".cn").addClass("nativeSponsor").clone(),$staggeredColumn.remove(),$staggeredNativo=$staggeredZone.find(".column"),$staggeredNativo="xsmall"===layoutSize?$staggeredNativo.eq(0).find(".cn").eq(1):$staggeredNativo.eq(1).find(".cn").eq(0),$staggeredNativo.before($nativeContainer))})}),jQuery(".pg-wrapper").find("section.nativeSponsor").addClass("zn-loaded"),jQuery(window).load(function(){$nativeHubCarousel=jQuery(document.getElementById("ntv-videoZone")).find(".js-owl-carousel"),$nativeHubCarousel.length>0&&!isGalleryRendered&&(CNN.Carousel.restore($nativeHubCarousel.parent()),isGalleryRendered=!0)})}function onNativoRenderAd(e){"use strict";nativo.fbFeed=e.facebook_feed,nativo.twFeed=e.twitter_feed,nativo.twitterImage=e.twitter_image,nativo.authorName=e.author_name,nativo.epicAdName=e.native_adv,$nativeEmbedVideo=jQuery(document.getElementById("prx_full_ad_video")),$nativeEmbedVideo.length>0&&$nativeEmbedVideo.parent().addClass("ntv_video_p"),$bigPicture=jQuery(document.getElementById("bigPicture")),$bigPicture.length>0&&!isGalleryRendered&&(nativo.renderGallery(),isGalleryRendered=!0),jQuery(window).load(function(){nativo.renderAuthor(),nativo.renderFacebook(),nativo.renderTwitter(),nativo.renderEpic()})}function changeOwlCarousalWidth(){"use strict";var e=jQuery(".js-pg-sponsor .owl-stage-outer .owl-stage"),t=e.find(".owl-item").length;e.css("width",70*t)}Modernizr.addTest("ios",function(){"use strict";return!!navigator.userAgent.match(/(iPod|iPhone|iPad)/i)}),Modernizr.addTest("android",function(){"use strict";return!!navigator.userAgent.match(/android/i)}),Modernizr.addTest("iospre10",function(){"use strict";return-1!==navigator.userAgent.search(/(iPod|iPhone|iPad).*OS [3-9]/i)}),Modernizr.addTest("iemobile",function(){"use strict";return!!navigator.userAgent.match(/iemobile/i)}),Modernizr.addTest("ieunsupported",function(){"use strict";return navigator.userAgent.search(/MSIE ([2-9]|10)\./i)>=0}),Modernizr.addTest("ie11unsupported",function(){"use strict";return navigator.userAgent.search(/Trident\/7\.0;(.*)rv:11\./i)>=0}),Modernizr.addTest("ie",function(){"use strict";return navigator.userAgent.search(/\s+(MSIE|rv:11|Edge\/\d+\.)/)>=0}),Modernizr.addTest("edge",function(){"use strict";return navigator.userAgent.search(/\s+(Edge\/\d+\.)/)>=0}),function(e){var t=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(t)&&t.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var t,n=document.createElement("source"),i=function(e){var t,i,o=e.parentNode;"PICTURE"===o.nodeName.toUpperCase()?(t=n.cloneNode(),o.insertBefore(t,o.firstElementChild),setTimeout(function(){o.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,i=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=i}))},o=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)i(t[e])},a=function(){clearTimeout(t),t=setTimeout(o,99)},r=e.matchMedia&&matchMedia("(orientation: landscape)"),s=function(){a(),r&&r.addListener&&r.addListener(a)};return n.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?s():document.addEventListener("DOMContentLoaded",s),a}())}(window),function(e,t,n){"use strict";function i(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function o(){R=!1,M=e.devicePixelRatio,O={},D={},g.DPR=M||1,j.width=Math.max(e.innerWidth||0,x.clientWidth),j.height=Math.max(e.innerHeight||0,x.clientHeight),j.vw=j.width/100,j.vh=j.height/100,m=[j.height,j.width,M].join("-"),j.em=g.getEmValue(),j.rem=j.em}function a(e,t,n,i){var o,a,r,s;return"saveData"===E.algorithm?e>2.7?s=n+1:(a=t-n,o=Math.pow(e-.6,1.5),r=a*o,i&&(r+=.1*o),s=e+r):s=n>1?Math.sqrt(e*t):e,s>n}function r(e){var t,n=g.getSet(e),i=!1;"pending"!==n&&(i=m,n&&(t=g.setRes(n),g.applySetCandidate(t,e))),e[g.ns].evaled=i}function s(e,t){return e.res-t.res}function l(e,t,n){var i;return!n&&t&&(n=e[g.ns].sets,n=n&&n[n.length-1]),i=d(t,n),i&&(t=g.makeUrl(t),e[g.ns].curSrc=t,e[g.ns].curCan=i,i.res||K(i,i.set.sizes)),i}function d(e,t){var n,i,o;if(e&&t)for(o=g.parseSet(t),e=g.makeUrl(e),n=0;n<o.length;n++)if(e===g.makeUrl(o[n].url)){i=o[n];break}return i}function c(e,t){var n,i,o,a,r=e.getElementsByTagName("source");for(n=0,i=r.length;n<i;n++)o=r[n],o[g.ns]=!0,(a=o.getAttribute("srcset"))&&t.push({srcset:a,media:o.getAttribute("media"),type:o.getAttribute("type"),sizes:o.getAttribute("sizes")})}function u(e,t){function n(t){var n,i=t.exec(e.substring(u));if(i)return n=i[0],u+=n.length,n}function o(){var e,n,i,o,s,l,d,c,u,f=!1,h={};for(o=0;o<r.length;o++)s=r[o],l=s[s.length-1],d=s.substring(0,s.length-1),c=parseInt(d,10),u=parseFloat(d),H.test(d)&&"w"===l?((e||n)&&(f=!0),0===c?f=!0:e=c):W.test(d)&&"x"===l?((e||n||i)&&(f=!0),u<0?f=!0:n=u):H.test(d)&&"h"===l?((i||n)&&(f=!0),0===c?f=!0:i=c):f=!0;f||(h.url=a,e&&(h.w=e),n&&(h.d=n),i&&(h.h=i),i||n||e||(h.d=1),1===h.d&&(t.has1x=!0),h.set=t,p.push(h))}for(var a,r,s,l,d,c=e.length,u=0,p=[];;){if(n(L),u>=c)return p;a=n(z),r=[],","===a.slice(-1)?(a=a.replace(U,""),o()):function(){for(n(q),s="",l="in descriptor";;){if(d=e.charAt(u),"in descriptor"===l)if(i(d))s&&(r.push(s),s="",l="after descriptor");else{if(","===d)return u+=1,s&&r.push(s),void o();if("("===d)s+=d,l="in parens";else{if(""===d)return s&&r.push(s),void o();s+=d}}else if("in parens"===l)if(")"===d)s+=d,l="in descriptor";else{if(""===d)return r.push(s),void o();s+=d}else if("after descriptor"===l)if(i(d));else{if(""===d)return void o();l="in descriptor",u-=1}u+=1}}()}}function p(e){var t,n,o,a,r,s,l=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,d=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(n=function(e){function t(){a&&(r.push(a),a="")}function n(){r[0]&&(s.push(r),r=[])}for(var o,a="",r=[],s=[],l=0,d=0,c=!1;;){if(""===(o=e.charAt(d)))return t(),n(),s;if(c){if("*"===o&&"/"===e[d+1]){c=!1,d+=2,t();continue}d+=1}else{if(i(o)){if(e.charAt(d-1)&&i(e.charAt(d-1))||!a){d+=1;continue}if(0===l){t(),d+=1;continue}o=" "}else if("("===o)l+=1;else if(")"===o)l-=1;else{if(","===o){t(),n(),d+=1;continue}if("/"===o&&"*"===e.charAt(d+1)){c=!0,d+=2;continue}}a+=o,d+=1}}}(e),o=n.length,t=0;t<o;t++)if(a=n[t],r=a[a.length-1],function(e){return!!(l.test(e)&&parseFloat(e)>=0)||(!!d.test(e)||("0"===e||"-0"===e||"+0"===e))}(r)){if(s=r,a.pop(),0===a.length)return s;if(a=a.join(" "),g.matchesMedia(a))return s}return"100vw"}t.createElement("picture");var f,h,m,g={},y=!1,v=function(){},w=t.createElement("img"),b=w.getAttribute,_=w.setAttribute,C=w.removeAttribute,x=t.documentElement,A={},E={algorithm:""},S=navigator.userAgent,T=/rident/.test(S)||/ecko/.test(S)&&S.match(/rv\:(\d+)/)&&RegExp.$1>35,N="currentSrc",k=/\s+\+?\d+(e\d+)?w/,I=e.picturefillCFG,F="font-size:100%!important;",R=!0,O={},D={},M=e.devicePixelRatio,j={px:1,in:96},B=t.createElement("a"),P=!1,q=/^[ \t\n\r\u000c]+/,L=/^[, \t\n\r\u000c]+/,z=/^[^ \t\n\r\u000c]+/,U=/[,]+$/,H=/^\d+$/,W=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Q=function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)},V=function(e){var t={};return function(n){return n in t||(t[n]=e(n)),t[n]}},$=function(){var e=function(){for(var e=arguments,t=0,n=e[0];++t in e;)n=n.replace(e[t],e[++t]);return n},t=V(function(t){return"return "+e((t||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(e,n){var i;if(!(e in O))if(O[e]=!1,n&&(i=e.match(/^([\d\.]+)(em|vw|px)$/)))O[e]=i[1]*j[i[2]];else try{O[e]=new Function("e",t(e))(j)}catch(e){}return O[e]}}(),K=function(e,t){return e.w?(e.cWidth=g.calcListLength(t||"100vw"),e.res=e.w/e.cWidth):e.res=e.d,e},G=function(e){if(y){var n,i,o,a=e||{};if(a.elements&&1===a.elements.nodeType&&("IMG"===a.elements.nodeName.toUpperCase()?a.elements=[a.elements]:(a.context=a.elements,a.elements=null)),n=a.elements||g.qsa(a.context||t,a.reevaluate||a.reselect?g.sel:g.selShort),o=n.length){for(g.setupRun(a),P=!0,i=0;i<o;i++)g.fillImg(n[i],a);g.teardownRun(a)}}};e.console&&console.warn,N in w||(N="src"),A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),g.ns=("pf"+(new Date).getTime()).substr(0,9),g.supSrcset="srcset"in w,g.supSizes="sizes"in w,g.supPicture=!!e.HTMLPictureElement,g.supSrcset&&g.supPicture&&!g.supSizes&&function(e){w.srcset="data:,a",e.src="data:,a",g.supSrcset=w.complete===e.complete,g.supPicture=g.supSrcset&&g.supPicture}(t.createElement("img")),g.supSrcset&&!g.supSizes?function(){var e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=t.createElement("img"),i=function(){2===n.width&&(g.supSizes=!0),h=g.supSrcset&&!g.supSizes,y=!0,setTimeout(G)};n.onload=i,n.onerror=i,n.setAttribute("sizes","9px"),n.srcset=e+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",n.src=e}():y=!0,g.selShort="picture>img,img[srcset]",g.sel=g.selShort,g.cfg=E,g.DPR=M||1,g.u=j,g.types=A,g.setSize=v,g.makeUrl=V(function(e){return B.href=e,B.href}),g.qsa=function(e,t){return"querySelector"in e?e.querySelectorAll(t):[]},g.matchesMedia=function(){return e.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?g.matchesMedia=function(e){return!e||matchMedia(e).matches}:g.matchesMedia=g.mMQ,g.matchesMedia.apply(this,arguments)},g.mMQ=function(e){return!e||$(e)},g.calcLength=function(e){var t=$(e,!0)||!1;return t<0&&(t=!1),t},g.supportsType=function(e){return!e||A[e]},g.parseSize=V(function(e){var t=(e||"").match(/(\([^)]+\))?\s*(.+)/);return{media:t&&t[1],length:t&&t[2]}}),g.parseSet=function(e){return e.cands||(e.cands=u(e.srcset,e)),e.cands},g.getEmValue=function(){var e;if(!f&&(e=t.body)){var n=t.createElement("div"),i=x.style.cssText,o=e.style.cssText;n.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",x.style.cssText=F,e.style.cssText=F,e.appendChild(n),f=n.offsetWidth,e.removeChild(n),f=parseFloat(f,10),x.style.cssText=i,e.style.cssText=o}return f||16},g.calcListLength=function(e){if(!(e in D)||E.uT){var t=g.calcLength(p(e));D[e]=t||j.width}return D[e]},g.setRes=function(e){var t;if(e){t=g.parseSet(e);for(var n=0,i=t.length;n<i;n++)K(t[n],e.sizes)}return t},g.setRes.res=K,g.applySetCandidate=function(e,t){if(e.length){var n,i,o,r,d,c,u,p,f,h=t[g.ns],m=g.DPR;if(c=h.curSrc||t[N],u=h.curCan||l(t,c,e[0].set),u&&u.set===e[0].set&&((f=T&&!t.complete&&u.res-.1>m)||(u.cached=!0,u.res>=m&&(d=u))),!d)for(e.sort(s),r=e.length,d=e[r-1],i=0;i<r;i++)if(n=e[i],n.res>=m){o=i-1,d=e[o]&&(f||c!==g.makeUrl(n.url))&&a(e[o].res,n.res,m,e[o].cached)?e[o]:n;break}d&&(p=g.makeUrl(d.url),h.curSrc=p,h.curCan=d,p!==c&&g.setSrc(t,d),g.setSize(t))}},g.setSrc=function(e,t){var n;e.src=t.url,"image/svg+xml"===t.set.type&&(n=e.style.width,e.style.width=e.offsetWidth+1+"px",e.offsetWidth+1&&(e.style.width=n))},g.getSet=function(e){var t,n,i,o=!1,a=e[g.ns].sets;for(t=0;t<a.length&&!o;t++)if(n=a[t],n.srcset&&g.matchesMedia(n.media)&&(i=g.supportsType(n.type))){"pending"===i&&(n=i),o=n;break}return o},g.parseSets=function(e,t,n){var i,o,a,r,s=t&&"PICTURE"===t.nodeName.toUpperCase(),l=e[g.ns];(void 0===l.src||n.src)&&(l.src=b.call(e,"src"),l.src?_.call(e,"data-pfsrc",l.src):C.call(e,"data-pfsrc")),(void 0===l.srcset||n.srcset||!g.supSrcset||e.srcset)&&(i=b.call(e,"srcset"),l.srcset=i,r=!0),l.sets=[],s&&(l.pic=!0,c(t,l.sets)),l.srcset?(o={srcset:l.srcset,sizes:b.call(e,"sizes")},l.sets.push(o),(a=(h||l.src)&&k.test(l.srcset||""))||!l.src||d(l.src,o)||o.has1x||(o.srcset+=", "+l.src,o.cands.push({url:l.src,d:1,set:o}))):l.src&&l.sets.push({srcset:l.src,sizes:null}),l.curCan=null,l.curSrc=void 0,l.supported=!(s||o&&!g.supSrcset||a&&!g.supSizes),r&&g.supSrcset&&!l.supported&&(i?(_.call(e,"data-pfsrcset",i),e.srcset=""):C.call(e,"data-pfsrcset")),l.supported&&!l.srcset&&(!l.src&&e.src||e.src!==g.makeUrl(l.src))&&(null===l.src?e.removeAttribute("src"):e.src=l.src),l.parsed=!0},g.fillImg=function(e,t){var n,i=t.reselect||t.reevaluate;e[g.ns]||(e[g.ns]={}),n=e[g.ns],(i||n.evaled!==m)&&(n.parsed&&!t.reevaluate||g.parseSets(e,e.parentNode,t),n.supported?n.evaled=m:r(e))},g.setupRun=function(){P&&!R&&M===e.devicePixelRatio||o()},g.supPicture?(G=v,g.fillImg=v):function(){var n,i=e.attachEvent?/d$|^c/:/d$|^c|^i/,o=function(){var e=t.readyState||"";a=setTimeout(o,"loading"===e?200:999),t.body&&(g.fillImgs(),(n=n||i.test(e))&&clearTimeout(a))},a=setTimeout(o,t.body?9:99),r=x.clientHeight,s=function(){R=Math.max(e.innerWidth||0,x.clientWidth)!==j.width||x.clientHeight!==r,r=x.clientHeight,R&&g.fillImgs()};Q(e,"resize",function(e,t){var n,i,o=function(){var a=new Date-i;a<t?n=setTimeout(o,t-a):(n=null,e())};return function(){i=new Date,n||(n=setTimeout(o,t))}}(s,99)),Q(t,"readystatechange",o)}(),g.picturefill=G,g.fillImgs=G,g.teardownRun=v,G._=g,e.picturefillCFG={pf:g,push:function(e){var t=e.shift();"function"===typeof g[t]?g[t].apply(g,e):(E[t]=e[0],P&&g.fillImgs({reselect:!0}))}};for(;I&&I.length;)e.picturefillCFG.push(I.shift());e.picturefill=G,"object"===typeof module&&"object"===typeof module.exports?module.exports=G:"function"===typeof define&&define.amd&&define("picturefill",function(){return G}),g.supPicture||(A["image/webp"]=function(t,n){var i=new e.Image;return i.onerror=function(){A[t]=!1,G()},i.onload=function(){A[t]=1===i.width,G()},i.src=n,"pending"}("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document);var CNN=window.CNN||{};CNN.Utils=CNN.Utils||function(e,t,n,i){"use strict";function o(e){var t=null;return"string"===typeof e&&Date.parse(e)?t=e:"number"===typeof e&&(t=new Date(Date.now()+e*E).toGMTString()),t}function a(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return e!==i&&null!==e}(arguments[t])){n=!1;break}return n}function r(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return"object"===typeof e&&null!==e}(arguments[t])){n=!1;break}return n}function s(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return"string"===typeof e&&e.length>0}(arguments[t])){n=!1;break}return n}function l(){var e,t,i={},o=0;if(n.cookie)for(e=n.cookie.split("; ");o<e.length;o++)t=e[o].split("="),i[t[0]]=decodeURIComponent(t[1])||null;return i}function d(e){return null!==c(e)}function c(e){var t=new RegExp("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"),i=n.cookie.match(t);return i?i.pop():null}function u(e,t,i,r,s,l){var d="";a(e)&&a(t)&&(i=o(i),r=a(r)?r:"/",s=a(s)?s:"",l=!!a(l)&&l,d+=e+"="+encodeURIComponent(t),a(i)&&(d+=";expires="+i),r&&(d+=";path="+r),s&&(d+=";domain="+s),l&&(d+="; secure"),n.cookie=d)}function p(e,t,n,i){u(e,t,n,"/",".cnn.com",i)}function f(e,t,i){var o="";a(e)&&(t=a(t)?t:"/",i=a(i)?i:"",o+=e+"=;expires="+S,t&&(o+=";path="+t),i&&(o+=";domain="+i),n.cookie=o)}function h(e){f(e,"/",".cnn.com")}function m(e,n,i){var o;if("string"===typeof e&&e.length>0&&"string"===typeof n)if(!1===CNN.hasLocalStorage)u(e,n,"session"===i?null:i,"/",".cnn.com",!1);else try{"session"===i?t.sessionStorage.setItem(e,n):(t.localStorage.setItem(e,n),"number"===typeof i?(o=new Date(Date.now()+i*E),t.localStorage.setItem(e+"__expires",o.getTime().toString(10))):"string"===typeof i&&"session"!==i&&(o=new Date(i),o.getTime()>Date.now()&&t.localStorage.setItem(e+"__expires",o.getTime().toString(10))))}catch(e){}}function g(e){if("string"===typeof e&&e.length>0){if(!1===CNN.hasLocalStorage)return d(e);try{if(a(t.sessionStorage.getItem(e))||a(t.localStorage.getItem(e+"__expires")))return!0}catch(e){}}return!1}function y(e){if("string"===typeof e&&e.length>0)if(!1===CNN.hasLocalStorage)f(e);else{try{t.localStorage.removeItem(e),t.localStorage.removeItem(e+"__expires")}catch(e){}try{t.sessionStorage.removeItem(e)}catch(e){}}}function v(e){var n,i=null;if("string"===typeof e&&e.length>0)try{!1===CNN.hasLocalStorage?i=c(e):null!==(n=t.localStorage.getItem(e+"__expires"))?parseInt(n,10)>Date.now()?i=t.localStorage.getItem(e):y(e):(i=t.sessionStorage.getItem(e),a(i)||(i=t.localStorage.getItem(e)))}catch(e){}return i}function w(e){var n,i,o,a,r,s,l=e;if("function"===typeof t.btoa)try{n=t.btoa(l)}catch(i){n=t.btoa(e.replace(/[^\w\s\!\@\#\$\%\^\&\*\(\)\-\=\+\.\,\\\;\:\'\"\?]/,"-"))}else{if(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),o="",a="",(r=l.length%3)>0)for(;r<3;r++)a+="=",l+="\0";for(r=0;r<l.length;r+=3)r>0&&r/3*4%76===0&&(o+="\r\n"),s=(l.charCodeAt(r)<<16)+(l.charCodeAt(r+1)<<8)+l.charCodeAt(r+2),s=[s>>>18&63,s>>>12&63,s>>>6&63,63&s],o+=i[s[0]]+i[s[1]]+i[s[2]]+i[s[3]];n=o.substring(0,o.length-a.length)+a}return n}function b(e){var n,i,o,a,r,s,l,d,c=e;if("function"===typeof t.atob)try{n=t.atob(c)}catch(e){console.log(e.message,"\nString to decode: "+c)}else{for(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),o={},d=0;d<i.length;d++)o[i[d]]=d;for(c=c.replace(new RegExp("[^"+i.join("")+"=]","g"),""),r="="===c.charAt(c.length-1)?"="===c.charAt(c.length-2)?"AA":"A":"",a="",c=c.substr(0,c.length-r.length)+r,s=0;s<c.length;s+=4)l=(o[c.charAt(s)]<<18)+(o[c.charAt(s+1)]<<12)+(o[c.charAt(s+2)]<<6)+o[c.charAt(s+3)],a+=String.fromCharCode(l>>>16&255,l>>>8&255,255&l);n=a.substring(0,a.length-r.length)}return n}function _(e){return e.replace("#","")}function C(){return t.Modernizr.phone}function x(){return/(Windows 7|Windows NT 6.1)/.test(navigator.userAgent)}function A(e,t,n){var i=n||this,o=null;return function(){o||(e.apply(i,arguments),o=setTimeout(function(){o=null},t))}}var E=36e5,S="Thu, 01 Jan 1970 00:00:00 UTC";return CNN.hasLocalStorage=function(){var e="__test_it";try{return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),t.sessionStorage.setItem(e,e),t.sessionStorage.removeItem(e),!0}catch(e){return!1}}(),{exists:a,existsObject:r,existsString:s,getCookies:l,getCookie:c,cookieExists:d,setCookie:u,deleteCookie:f,setCNNCookie:p,deleteCNNCookie:h,storeLocalValue:m,hasLocalValue:g,deleteLocalValue:y,getLocalValue:v,b64Encode:w,b64Decode:b,stripHash:_,isPhone:C,isWindows7:x,throttle:A}}(jQuery,window,document),CNN.Features=CNN.Features||{},CNN.VideoConfig=CNN.VideoConfig||{},CNN.VideoConfig.liveStream=CNN.VideoConfig.liveStream||{},CNN.GeoCheck=function(e,t){"use strict";function n(){return a}function i(e){var t,n,i,o,r,s=!0;if(null!==a&&!0===Array.isArray(e)&&e.length>0)for(i=a.country+":"+a.region,o=i+":"+a.city.toLowerCase(),t=0;t<e.length;t++)r=e[t],"-"===r.charAt(0)?(r=r.slice(1),n=!1):n=!0,"*"===r?s=n:"#"===r.charAt(0)?a.continent===r.slice(1)&&(s=n):(2===r.length&&a.country===r||5===r.length&&i===r||r.length>6&&o===r)&&(s=n);return s}function o(){return CNN._geoCheckReadyEvent}var a=null;return CNN._geoCheckReadyEvent=!1,e.fn.extend({onGeoCheckReady:function(n){"function"===typeof n&&(!0===CNN._geoCheckReadyEvent?n(e):e(t).on("geoCheckReady",{handler:n},function(t){t=t||{},"object"===typeof t.data&&null!==t.data&&"function"===typeof t.data.handler&&t.data.handler(e)}))},triggerGeoCheckReady:function(){CNN._geoCheckReadyEvent=!0,e(t).trigger("geoCheckReady")}}),function(){var n,i;i=CNN.Utils.getCookie("geoData"),null!==i&&(n=i.split("|"),n.length>4&&(a={city:"?"===n[0]?"":n[0],region:"?"===n[1]?"":n[1],postCode:"?"===n[2]?"":n[2],country:"?"===n[3]?"":n[3],continent:"?"===n[4]?"":n[4]})),e(t).triggerGeoCheckReady()}(),{getData:n,inTarget:i,isReady:o}}(jQuery,document),CNN=window.CNN||{},CNN.AdsConfig=CNN.AdsConfig||{},CNN.AdsConfig.aisOverride?function(e,t){"use strict";var n=e.createElement("script"),i=e.getElementsByTagName("script")[0];n.type="text/javascript",n.src=("https:"===e.location.protocol?"https:":"http:")+t.AdsConfig.aisOverride,i.parentNode.insertBefore(n,i)}(document,window.CNN):(CNN.AdsConfig.amazon=CNN.AdsConfig.amazon||{},CNN.Features=CNN.Features||{},function(){var e=function(){return!1},t={addMetric:e,getMetricById:e,getMetricsByType:e,getMetricTypes:e};window.cnnad_haveCookie=function(e){return document.cookie&&(document.cookie.indexOf("; "+e+"=")>=0||0===document.cookie.indexOf(e+"="))},window.cnnad_readCookie=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}},window.turner_getGuid=function(){return window.cnnad_readCookie("ug")},function(){function e(){function e(){var e=window.turner_getGuid();t=window.AdFuel.registerModule("GUID",{}),o("setting guid targeting",{guid:e}),t.addMetric({type:"modules",id:"GUID",data:{targeting:{guid:e}}}),window.AdFuel.addPageLevelTarget("guid",e)}window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}var n=Object.prototype,i=n.toString,o=function(){};if(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e}(window.console)&&function(e){return"[object Function]"===i.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(o=function(){var e=["[AdFuelModule - Guid]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.cnnad_haveCookie("ugs"))e();else{var a=document,r=a.createElement("script"),s=a.getElementsByTagName("script")[0],l=/^(complete|loaded)$/,d=!1;r.type="text/javascript",r.async=!0,r.src="//www.ugdturner.com/xd.sjs",r.onload=r.onreadystatechange=function(){d||"readyState"in r&&l.test(r.readyState)||(r.onload=r.onreadystatechange=null,d=!0,e())},s.parentNode.insertBefore(r,s)}}()}(),function(){var e=function(){return!1},t={addMetric:e,getMetricById:e,getMetricsByType:e,getMetricTypes:e};window.cnnad_transactionID=null,window.cnnad_getTransactionID=function(){return window.cnnad_transactionID||(window.cnnad_transactionID=Math.round((new Date).getTime()/1e3)+""+Math.floor(9007199254740992*Math.random())),window.cnnad_transactionID},window.turner_getTransactionId=window.cnnad_getTransactionID,window.turner_getTransactionId(),function(){function e(){var e=window.turner_getTransactionId();t=window.AdFuel.registerModule("Transaction Id",{}),t.addMetric({type:"modules",id:"Transaction Id",data:{targeting:{transId:e}}}),window.AdFuel.addPageLevelTarget("transId",e)}window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}()}(),!0===CNN.Features.enableAdsConsole&&function(){function e(){location.hash.indexOf("doh")>=0?(V=!1,H&&c(),c()):location.hash.indexOf("afc")>=0?(V=!0,H&&c(),c()):H&&c()}function t(e,t,n){return e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent?e.attachEvent("on"+t,n):void 0}function n(e,t,n){var i=document.createElement("div");i.style.width="48%",i.style.float="left",i.style.display="inline-block";var o=document.createElement("input");o.type="checkbox",o.name=e,o.id=e+"_"+t,o.style.float="left",o.style["margin-right"]="2px",o.style.position="relative",o.style.top="3px",o.value=t;var a=document.createElement("div");return a.style.width="calc(100% - 18px)",a.appendChild(document.createTextNode(n)),i.appendChild(o),i.appendChild(a),i}function i(e,t){var n=document.createElement(e);return n.appendChild(document.createTextNode(t)),n}function o(e){var t=document.createElement("button");return t.onclick=e.action,t.id=e.name,t.appendChild(document.createTextNode(e.value)),t.className="btn btn-sm btn-primary",t}function a(e,t){return e.data[2]<t.data[2]?-1:e.data[2]>t.data[2]?1:0}function r(e){return!!new RegExp(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/).test(e)}function s(){ee("Getting Viewport Dimensions");var e,t;return"undefined"!==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),te("Getting Viewport Dimensions"),[e,t]}function l(){ee("Getting Browser Information");var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===n[1]&&null!==(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),te("Getting Browser Information"),n.join(" "))}function d(){if(null!==ce)return ce;ee("Getting Device Information"),ne=de();var e=s();return ce={availHeight:screen.availHeight,availLeft:screen.availLeft,availTop:screen.availTop,availWidth:screen.availWidth,colorDepth:screen.colorDepth,height:screen.height,orientation:{angle:screen.orientation?screen.orientation.angle:0,onchange:screen.orientation?screen.orientation.onchange:null,type:screen.orientation?screen.orientation.type:null},pixelDepth:screen.pixelDepth,width:screen.width,os:window.navigator.platform?window.navigator.platform:"Unknown",browser:l(),class:"Desktop",viewport:e.join("x")},ne.amazon.device&&(ce.os="Amazon",ne.amazon.phone&&(ce.class="Phone"),ne.amazon.tablet&&(ce.class="Tablet")),ne.android.device&&(ce.os="Android",ne.android.phone&&(ce.class="Phone"),ne.android.tablet&&(ce.class="Tablet")),ne.apple.device&&(ce.os="iOS",ne.apple.ipod&&(ce.class="iPod"),ne.apple.phone&&(ce.class="Phone"),ne.apple.tablet&&(ce.class="Tablet")),ne.windows.device&&(ce.os="Windows",ne.windows.phone&&(ce.class="Phone"),ne.windows.tablet&&(ce.class="Tablet")),ne.other.blackberry&&(ce.os="Blackberry",ce.class="Phone"),ne.other.blackberry10&&(ce.os="Blackberry10",ce.class="Phone"),ne.other.chrome&&(ce.os="Chrome",ce.class="Phone"),ne.other.firefox&&(ce.os="Firefox",ce.class="Phone"),ne.other.opera&&(ce.os="Opera",ce.class="Phone"),z.addMetric({type:"modules",id:"User Sciences",data:ce}),te("Getting Device Information"),ce}function c(){if(H)e=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("body")[0],o=document.getElementById("material-icons-font"),a=document.getElementById("adfuel-console-stylesheet"),s=document.querySelector("div.adfuel-console-button-container"),c=document.querySelector("div.adfuel-console-filler"),p=document.querySelector("div.adfuel-console"),e.removeChild(o),e.removeChild(a),n.removeChild(s),n.removeChild(c),n.removeChild(p),H=!1;else{var e=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("body")[0],i="https:"===document.location.protocol,o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=(i?"https:":"http:")+"//fonts.googleapis.com/icon?family=Material+Icons",o.id="material-icons-font";var a=document.createElement("link");a.rel="stylesheet",a.href=(i?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/consoleTool-2.1.css",a.id="adfuel-console-stylesheet";var r=document.createElement("link");r.rel="stylesheet",r.href=(i?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/dhtmlxgrid.css",r.id="adfuel-console-table-stylesheet";var s=document.createElement("div");s.className="adfuel-console-button-container adfuel-open-console-button-container";var l=document.createElement("a");l.className="adfuel-console-button";var d=document.createElement("i");d.className="adfuel-console-button-icon material-icons",d.innerHTML="view_module",d.innerText="view_module";var c=document.createElement("div");c.className="adfuel-console-filler";var p=document.createElement("div");p.className="adfuel-console",l.appendChild(d),s.appendChild(l),e.appendChild(o),e.appendChild(a),e.appendChild(r),n.appendChild(s),n.appendChild(c),n.appendChild(p),function(e){"use strict";var t=document,n=t.createElement("script"),i=t.getElementsByTagName("script")[0],o=/^(complete|loaded)$/,a=!1,r="https:"===document.location.protocol;n.type="text/javascript",n.async=!0,n.src=(r?"https:":"http:")+"//www.geoplugin.net/javascript.gp",n.onload=n.onreadystatechange=function(){a||"readyState"in n&&o.test(n.readyState)||(n.onload=n.onreadystatechange=null,a=!0,e())},i.parentNode.insertBefore(n,i)}(function(){var e,t,n,i,o,a=!1;window.geoplugin_countryCode&&(e=window.geoplugin_countryCode(),a=!0),window.geoplugin_city&&(t=window.geoplugin_city(),a=!0),window.geoplugin_region&&(n=window.geoplugin_region(),a=!0),window.geoplugin_latitude&&(i=window.geoplugin_latitude(),a=!0),window.geoplugin_longitude&&(o=window.geoplugin_longitude(),a=!0),!0===a&&z.addMetric({type:"configuration",id:"actual_user_location",data:{city:t,region:n,country:e,latitude:i,longitude:o}})}),g(p),t(l,"click",u),H=!0}}function u(){var e=document.querySelector("div.adfuel-console-filler"),t=document.querySelector("div.adfuel-console"),n=document.querySelector("div.adfuel-console-button-container"),i=document.querySelector("div#adfuel-close-console-button-container");n.style.display="none",i.style.display="inline-block",e.style.display="block",e.className=e.className+" resizable",t.style.display="inline-block",t.style.resize="both",t.className=t.className+" resizable",Z("Opening AdFuel Console."),m(document.getElementsByClassName("adfuel-console-tab-link-container")[0]),w(t),Z("Full Console: ",V),v(V?"configuration":"creative review")}function p(){window.open("http://docs.turner.com/display/DAD/AdFuel+Console+Documentation","ConsoleHelp")}function f(){if(Q){for(var e=document.querySelectorAll(".adfuel-rendered"),t=e.length,n=0;n<t;n++){var i=e[n].id,o=document.getElementById(i);o.style.position="relative";var a=o.firstElementChild.firstElementChild?o.firstElementChild.firstElementChild.width:o.firstElementChild.width,r=o.firstElementChild.firstElementChild?o.firstElementChild.firstElementChild.height:o.firstElementChild.height;o.style.width=a+"px",o.style.height=r+"px";var s=i.substring(i.indexOf("_")+1),l=document.createElement("div"),d=document.createElement("p");d.innerHTML="Pos: "+s+"<br />Width: "+a+"<br />Height: "+r,l.className="pos_overlay",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.right="0",l.style.bottom="0",l.style.textAlign="left",l.style.padding="3px",l.style.fontFamily="Verdana",l.style.fontSize="12px",l.style.fontWeight="normal",l.style.lineHeight="12px",l.style.background="rgba(0,100,0,0.7)",l.style.color="#ffffff",l.style.zIndex="1000",l.appendChild(d),o.appendChild(l)}Q=!1}else{var c=document.querySelectorAll(".pos_overlay");for(t=c.length,n=0;n<t;n++)c[n].parentNode.removeChild(c[n]);Q=!0}}function h(e){e=e.toString();var t=e.split(" "),n="";if(t.length>1){for(var i=0;i<t.length;i++){
var o=t[i].charAt(0).toUpperCase()+t[i].slice(1);t[i]=o}n=t.join(" ")}else n=e.charAt(0).toUpperCase()+e.slice(1);return n}function m(e){function n(e){v(e.srcElement?e.srcElement.rel:e.target.rel)}if(Z("Building Console Tabs...",e),e||(e=document.getElementsByClassName("adfuel-console-tab-link-container")[0]),!e)return Z("Error: No tab link container."),!1;var i=document.getElementsByClassName("adfuel-console-tab-list")[0];if(i){i.parentNode.removeChild(i)}var o=document.createElement("ul");o.className="adfuel-console-tab-list",pe=z.getMetricTypes(),pe.sort();for(var a=0;a<pe.length;a++)if(0!==pe[a].indexOf("_")&&"watchers"!==pe[a]){var r=document.createElement("li");Z("Full Console: ",V),r.style.display=V?"inline-block":"none","creative review"===pe[a]&&(r.style.display="none"),r.style.marginLeft="15px",r.style.marginRight="auto",r.style.fontSize=".8em",r.style.paddingBottom="10px";var s=document.createElement("a");s.className="afcTab",0===a&&(s.className="activeAFCTab afcTab"),s.rel=pe[a],t(s,"click",n),s.appendChild(document.createTextNode(h(pe[a]))),r.appendChild(s),o.appendChild(r)}e.appendChild(o)}function g(e){var n=document.createElement("div");n.className="adfuel-console-button-container",n.id="adfuel-close-console-button-container";var i=document.createElement("a");i.className="adfuel-console-button-plain",i.id="adfuel-close-console-button";var o=document.createElement("i");o.className="adfuel-console-button-icon material-icons",o.innerHTML=o.innerText="close";var a=document.createElement("a");a.className="adfuel-console-button-plain",a.id="adfuel-resize-console-button";var r=document.createElement("i");r.className="adfuel-console-button-icon material-icons",r.innerHTML=r.innerText="help_outline";var s=document.createElement("a");s.className="adfuel-console-button-plain",s.id="adfuel-show-overlay-button";var l=document.createElement("i");l.className="adfuel-console-button-icon material-icons",l.innerHTML=l.innerText="vignette";var d=document.createElement("div");d.id="adfuel-console-banner";var c=document.createElement("div");c.className="adfuel-console-tab-link-container",s.appendChild(l),a.appendChild(r),i.appendChild(o),n.appendChild(s),n.appendChild(a),n.appendChild(i),t(i,"click",O),t(a,"click",p),t(s,"click",f),d.appendChild(n);var u=document.createElement("div");u.className="adfuel-console-banner-title",Z("Full Console: ",V);var h=V?"AdFuel Console Tool":"AdFuel Creative Review";u.appendChild(document.createTextNode(h)),d.appendChild(u),d.appendChild(c),e.appendChild(d)}function y(e,t){if(e.type){W.indexOf(e.type)<0&&(m(),W.push(e.type));var n=document.getElementById("adfuel-console-panel-"+e.type.replace(/ /g,"-"));if("counts"===e.type)C(n);else if("creative review"===e.type){var i=parseInt(ce.viewport.split("x")[0]);i>800&&i<1250?T(n):i<800?S(n):E("Desktop"===ce.class?n:n)}else"timeline"===e.type?b(n):R(n,!0);t&&t()}}function v(e){var t,n=document.getElementsByClassName("afcTab"),i=document.querySelector("li > a[rel='"+e+"']");for(t=0;t<n.length;t++)n[t].className=n[t].className.replace("activeAFCTab","");i&&(i.className=i.className+" activeAFCTab");var o=document.getElementById("adfuel-console-panel-"+e.replace(/ /g,"-"));if(!o){var a=e,r=document.createElement("div"),s=document.getElementsByClassName("adfuel-console")[0];r.id="adfuel-console-panel-"+a.replace(/ /g,"-"),r.style.display="none",r.className="adfuel-console-panel adfuel-console-content",r.style.width="100%",r.style.padding="0",r.style.margin="0",r.style.height="80%",r.style.minHeight="250px",r.style.overflowY="auto",s.appendChild(r),o=r}if("timeline"===e){b(o,x())}var l=document.getElementsByClassName("adfuel-console-panel");for(t=0;t<l.length;t++)l[t].style.display="none";o.style.display="block",Z("Full Console: ",V),V&&"configuration"===e&&_({target:{dataset:{panel:o.id,tab:"adfuel_initialization_options",content:"adfuel-console-panel-configuration-tabContent-adfuel_initialization_options"}}})}function w(e){if(e||(e=document.getElementsByClassName("adfuel-console")[0]),!e)return Z("Error: No AdFuel-Console container."),!1;for(var t=0;t<pe.length;t++)if(0!==pe[t].indexOf("_")){var n=pe[t],i=document.createElement("div");if(i.id="adfuel-console-panel-"+n.replace(/ /g,"-"),i.style.display="none",i.className="adfuel-console-panel adfuel-console-content",i.style.width="100%",i.style.padding="0",i.style.margin="0",i.style.height="80%",i.style.minHeight="250px",e.appendChild(i),Z("Full Console: ",V),Z("Panel Name: ",n),!V&&"creative review"!==n)continue;switch(n){case"creative review":var o=parseInt(ce.viewport.split("x")[0]);o>800&&o<1250?T(i):o<800?S(i):E("Desktop"===ce.class?i:i);break;case"counts":C(i);break;case"configuration":case"modules":case"page":case"registries":case"requests":case"slots":i.style.display="block",R(i,!0);break;case"timeline":var a=x();b(i,a);break;default:R(i,!0)}}}function b(e,t){if(e&&t){var n=document.createElement("div");n.id="gridbox",n.style.width="100%",n.style.height="95%",n.style.backgroundColor="#ABABAB",n.style.margin="0",n.style.padding="0",n.style.position="relative",n.style.top="-12px";try{e.removeChild(n)}catch(e){}e.style.height="90%",e.appendChild(n);try{q=new window.dhtmlXGridObject("gridbox"),q.setImagePath(("https:"===document.location.protocol?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/"),n.style.position="relative",n.style.top="-12px",n.style.left="2px",q.setHeader("Name, Type, Timestamp, Start, End, Time From Previous, Time From Initial, Duration,"),q.setInitWidths("350,100,200,200,200,150,150,100"),q.setColAlign("left, left, left, left, left, left, left, left"),q.setColTypes("ro,ro,ro,ro,ro,ro,ro,ro"),q.enableColumnAutoSize(!0),q.enableDragAndDrop(!1),q.init(),q.clearAll(),q.parse(t,"json")}catch(e){}}}function _(e){var t=e.target,n=t.dataset,i=n.panel,o=n.content,a=document.querySelectorAll("div#"+i+" .adfuel-console-panel-tab-content"),r=document.querySelectorAll("div#"+i+" ul.nav-stacked li"),s=document.querySelector("div#"+i+" ul.nav-stacked li#"+n.tab.replace(/ /g,"_")),l=0;for(l=0;l<a.length;l++)a[l].style.display="none";for(l=0;l<r.length;l++)r[l].className="";return s&&(s.className=s.className+" active"),document.getElementById(o).style.display="block",!1}function C(e){if(e){e.innerHTML="";var t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.display="inline-block",t.style.padding="5px",t.style.margin="0";var n=document.createElement("ul");n.className="nav nav-pills nav-stacked flex-column",n.style.listStyleType="none",n.style.margin="0",n.style.padding="5px",n.style.height="100%",n.style.minHeight="250px",n.style.overflow="auto";var i=[];z.metrics&&z.metrics.counts&&(i=Object.getOwnPropertyNames(z.metrics.counts));for(var o=0;o<i.length;o++){var a=document.createElement("li");a.style.margin="5px",a.style.padding="5px",a.style.fontSize="14px",a.style.width="15%",a.style.display="inline-block",a.style.float="left",a.style.borderRight="solid 1px #BCBCBC",a.id=i[o].replace(/ /g,"_"),a.innerHTML=h(i[o].replace(/_/g," "));var r=document.createElement("span");r.style.float="right",r.className="badge badge-pill badge-primary",r.style.width="15%",r.innerHTML=z.metrics.counts[i[o]],a.appendChild(r),n.appendChild(a)}t.appendChild(n),e.appendChild(t)}}function x(){var e=["connection_start","document_request_start","domContentLoaded","dom_load_start","domain_lookup_start","fetch_start","navigation_start","window_load"],t=["_rendered","adfuel_initialized","building_gpt_slots","dispatch_queue"],n=["request_to_dfp"],i=["_preQueue","_postQueue","_preDispatch","_postDispatch","_preRefresh","_postRefresh"],o=z.metrics.timeline,r="",s={rows:[]};for(var l in o)if(o.hasOwnProperty(l)){if(e.indexOf(l)>=0)r="Browser";else if(t.indexOf(l)>=0||l.indexOf("_rendered")>0||l.indexOf("building_gpt_slot_")>=0)r="AdFuel";else if(n.indexOf(l)>=0)r="DFP";else{for(var d=0;d<i.length;d++)l.indexOf(i[d])>0&&(r="Module");""===r&&(r="UNKNOWN")}for(var c=0;c<o[l].length;c++){var u,p,f=o[l][c];if(f.timestamp){var m=new Date;m.setTime(f.timestamp),u=m.toISOString().split("T"),p=u[1].replace("Z",""),m=p;for(var g=l.split("_"),y=0;y<g.length;y++)g[y]=h(g[y]);var v=g.join(" "),w={id:l+"_"+c,data:[v,r,o[l][0].timestamp,m,"","","",0]};s.rows.push(w)}else if(f.start&&f.end){var b=new Date;b.setTime(f.start),u=b.toISOString().split("T"),p=u[1].replace("Z",""),b=p;var _=new Date;_.setTime(f.end),u=_.toISOString().split("T"),p=u[1].replace("Z",""),_=p;var C=parseInt(f.end)-parseInt(f.start)+"ms";for(g=l.split("_"),y=0;y<g.length;y++)g[y]=h(g[y]);v=g.join(" "),w={id:l+"_"+c,data:[v,r,o[l][0].start,b,_,"","",C],endStamp:f.end},s.rows.push(w)}else if(f.start){for(b=new Date,b.setTime(f.start),u=b.toISOString().split("T"),p=u[1].replace("Z",""),b=p,g=l.split("_"),y=0;y<g.length;y++)g[y]=h(g[y]);v=g.join(" "),w={id:l+"_"+c,data:[v,r,o[l][0].start,b,"","","",""]},s.rows.push(w)}}}if(s.rows.length>0){s.rows.sort(a);for(var x=s.rows[0].data[2],A=1;A<s.rows.length;A++){var E=s.rows[A],S=s.rows[A-1].data[2];E.data[5]=E.data[2]-S+"ms",E.data[6]=E.data[2]-x+"ms"}var T=s.rows[s.rows.length-1];w={id:"elapsed_time",data:["Total Elapsed Time","","","","","","",(T.endStamp?T.endStamp:T.data[2])-x+"ms"]},s.rows.push(w)}return s}function A(e,n){var i=document.createElement("div");i.style.width="27%",i.style.maxWidth="400px",i.style.height="100%",i.style.display="inline-block",i.style.margin="0",i.style.float="left",i.style.borderRight="solid 1px #0052e7",e.appendChild(i);var o=document.createElement("ul");o.className="nav nav-pills nav-stacked flex-column",o.style.listStyleType="none",o.style.margin="0",o.style.padding="5px",o.style.height="100%",o.style.minHeight="250px",o.style.overflow="auto";for(var a=0;a<n.length;a++){isNaN(parseInt(n[a]))||(n[a]="request_"+n[a]);var r=document.createElement("div");r.id=e.id+"-tabContent-"+n[a].replace(/ /g,"_"),r.className="adfuel-console-panel-tab-content",r.style.width="72%",r.style.height="100%",r.style.display="inline-block",r.style.padding="0",r.style.margin="5px",r.style.float="left",0!==a&&(r.style.display="none");var s=document.createElement("li");0===a&&(s.className=s.className+" active"),s.id=n[a].replace(/ /g,"_");var l=document.createElement("a");l.rel=n[a],l.dataset.panel=e.id,l.dataset.tab=n[a],l.dataset.content=r.id,l.innerHTML=h(n[a].replace(/_/g," ")),s.appendChild(l),o.appendChild(s),F(r,n[a]),t(l,"click",_),e.appendChild(r)}i.appendChild(o)}function E(e,t){function a(e,t,a){for(var r=0;r<a.length;r++){var s=a[r];switch(s.type){case"textarea":var l=i("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=i("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=i("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p),c=document.createElement("div"),c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":console.debug("Building Select Element",s);var y=i("div",s.label+": "+(!0===s.required?" *":""));y.style.fontWeight="bolder",e.appendChild(y),s.element=document.createElement("select"),s.element.name=s.name;for(var v=0;v<s.options.length;v++){console.debug("Building Select Option Element",s.options[v]);var w=i("option",s.options[v].text);w.value=s.options[v].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(o(s));break;case"fileUpload":$&&(d=i("div",s.label+": "+(!0===s.required?" *":"")),d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element),c=document.createElement("div"),c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br")))}}t.appendChild(e)}function r(e){""!==e?(_.style.display="inline-block",_.innerHTML=e):_.style.display="none",window.setTimeout(function(){_.style.display="none"},3e3)}function s(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(Z("Building Desktop Creative Review Form"),t=t||1,e){var l=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],d=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"PGA",value:"PGA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],c=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var u=document.createElement("div");u.style.width="100%",u.style.height="100%",u.style.display="inline-block",u.style.padding="5px",u.style.margin="0";var p=document.createElement("div");p.style.width="99%",p.style.borderBottom="solid 1px black";var f=document.createElement("p");f.style.padding="0",f.style.fontWeight="bolder",f.style.margin="auto",f.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",p.appendChild(f),u.appendChild(p);var h=document.createElement("form");h.style.padding="0",h.style.margin="0",u.appendChild(h);var m=document.createElement("div");switch(t){case 1:m.style.width="25%",m.style.height="60%",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left";break;case 2:m.style.width="50%",m.style.height="100%",m.style.minHeight="160px",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.id="cr_panel_1";break;case 3:m.style.width="100%",m.style.height="100%",m.style.minHeight="160px",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.id="cr_panel_1"}a(m,h,l);var g=document.createElement("div");switch(t){case 1:g.style.width="39%",g.style.height="60%",g.style.display="inline-block",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left";break;case 2:g.style.width="50%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="inline-block",g.id="cr_panel_2";break;case 3:g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_2"}a(g,h,d);var y=document.createElement("div");switch(t){case 1:y.style.width="32%",y.style.height="60%",y.style.display="inline-block",y.style.padding="5px 5px",y.style.margin="0",y.style.float="left";break;case 2:case 3:y.style.width="100%",y.style.height="100%",y.style.minHeight="160px",y.style.padding="5px 5px",y.style.margin="0",y.style.float="left",y.style.fontSize="12px",y.style.display="none",y.id="cr_panel_3"}a(y,h,c);var v=document.createElement("div");v.style.clear="both",u.appendChild(v);var w=document.createElement("div");w.style.width="99%",w.style.height="10%",w.style.padding="0",w.style.margin="0";var b=document.createElement("div");b.style.display="inline-block",b.style.float="right";var _=document.createElement("div");_.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var C=document.createElement("div");C.className="cr-confirm-alert",C.style.visibility="hidden";var x=document.createElement("div");x.className="cr-confirm-alert-text";var A=new Date,E=A.getDay(),S=A.getHours(),T=0===E||6===E||S<8||S>17,N=T?"2 hours outside of":"1 hour during";x.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+N+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",C.appendChild(x),C.appendChild(document.createElement("br"));var k=document.createElement("button");k.className="btn btn-primary btn-sm",k.innerHTML="OK",k.onclick=function(e){e.preventDefault(),O(),C.style.visibility="hidden",h.reset()},C.appendChild(k),e.appendChild(C);var F=document.createElement("input");F.type="submit",F.className="btn btn-primary btn-sm cr-confirm-alert-btn",F.onclick=function(e){return e.preventDefault(),""===h.elements.Name.value||""===h.elements.Comments.value||""===h.elements.Email.value?void r("Please fill out all required fields."):s(h.elements.Email.value)?void I(h,function(){C.style.visibility="visible"}):void r("Email address is not valid.")};var R=document.createElement("button");R.type="button",R.className="btn btn-primary btn-sn cr-confirm-alert-btn",R.onclick=function(){switch(t){case 2:if(""===h.elements.Name.value||""===h.elements.Email.value||""===h.elements.Brand.value||"placeholder"===h.elements.Brand.value)return void r("Please fill out all required fields.");if(!s(h.elements.Email.value))return void r("Email address is not valid.");if(""===h.elements.Brand.value||"placeholder"===h.elements.Brand.value)return void r("Please select the brand affected by this issue.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",b.removeChild(R),b.appendChild(D),b.appendChild(F);break;case 3:switch(ue){case 1:if(""===h.elements.Name.value||""===h.elements.Email.value)return void r("Please fill out all required fields.");if(!s(h.elements.Email.value))return void r("Email address is not valid.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="inline-block",b.insertBefore(D,R),ue++;break;case 2:if(""===h.elements.Brand.value||"placeholder"===h.elements.Brand.value)return void r("Please select the brand affected by this issue.");document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",b.removeChild(R),b.appendChild(F),ue++}}},R.style.padding="5px 10px",R.style.fontSize="12px",R.style.lineHeight="1.5",R.style.borderRadius="3px",R.innerHTML="Next >>";var D=document.createElement("button");D.type="button",D.className="btn btn-primary btn-sn cr-confirm-alert-btn",D.onclick=function(){switch(t){case 2:r(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",b.appendChild(R),b.removeChild(F);break;case 3:switch(ue){case 2:r(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="none",b.removeChild(D);break;case 3:r(""),document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",b.appendChild(R),b.removeChild(F)}ue--}},D.style.padding="5px 10px",D.style.fontSize="12px",D.style.lineHeight="1.5",D.style.borderRadius="3px",D.style.marginRight="10px",D.innerHTML="<< Back",b.appendChild(_),1===t?b.appendChild(F):b.appendChild(R),w.appendChild(b),u.appendChild(w),e.insertBefore(u,C)}}function S(e){function t(e,t,a){for(var r=0;r<a.length;r++){var s=a[r];switch(s.type){case"textarea":var l=i("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=i("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=i("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p),c=document.createElement("div"),c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":var y=i("div",s.label+": "+(!0===s.required?" *":""));y.style.fontWeight="bolder",e.appendChild(y),s.element=document.createElement("select"),s.element.name=s.name;for(var v=0;v<s.options.length;v++){var w=i("option",s.options[v].text);w.value=s.options[v].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(o(s));break;case"fileUpload":$&&(d=i("div",s.label+": "+(!0===s.required?" *":"")),d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element),c=document.createElement("div"),c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br")))}}t.appendChild(e)}function a(e){""!==e?(b.style.display="inline-block",b.innerHTML=e):b.style.display="none",window.setTimeout(function(){b.style.display="none"},3e3)}function r(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(Z("Building Mobile Creative Review Form"),e){var s=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],l=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],d=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var c=document.createElement("div");c.style.width="100%",c.style.height="100%",c.style.display="inline-block",c.style.padding="5px",c.style.margin="0",c.style.border="solid 2px purple";var u=document.createElement("div");u.style.width="99%",u.style.borderBottom="solid 1px black",u.style.fontSize="12px";var p=document.createElement("p");p.style.padding="0",p.style.fontWeight="bolder",p.style.margin="auto",p.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",u.appendChild(p),c.appendChild(u);var f=document.createElement("form");f.style.padding="0",f.style.margin="0",c.appendChild(f);var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.minHeight="160px",h.style.display="inline-block",h.style.padding="5px 5px",h.style.margin="0",h.style.float="left",h.style.fontSize="12px",h.id="cr_panel_1",t(h,f,s);var m=document.createElement("div");m.style.width="100%",m.style.height="100%",m.style.minHeight="160px",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.style.display="none",m.id="cr_panel_2",t(m,f,l);var g=document.createElement("div");g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_3",t(g,f,d);var y=document.createElement("div");y.style.clear="both",c.appendChild(y);var v=document.createElement("div");v.style.width="99%",v.style.height="10%",v.style.padding="0",v.style.margin="0";var w=document.createElement("div");w.style.display="inline-block",w.style.float="right",w.style.height="10%";var b=document.createElement("div");b.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var _=document.createElement("div");_.className="cr-confirm-alert",_.style.visibility="hidden";var C=document.createElement("div");C.className="cr-confirm-alert-text";var x=new Date,A=x.getDay(),E=x.getHours(),S=0===A||6===A||E<8||E>17,T=S?"2 hours outside of":"1 hour during";C.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+T+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",_.appendChild(C),_.appendChild(document.createElement("br"));var N=document.createElement("button");N.className="btn btn-primary btn-sm",N.innerHTML="OK",N.onclick=function(e){e.preventDefault(),O(),_.style.visibility="hidden",f.reset()},_.appendChild(N),e.appendChild(_);var k=document.createElement("input");k.type="submit",k.className="btn btn-primary btn-sm cr-confirm-alert-btn",k.onclick=function(e){if(e.preventDefault(),""===f.elements.Comments.value)return void a("Please describe the issue you are reporting.");I(f,function(){_.style.visibility="visible"})};var F=document.createElement("button");F.type="button",F.className="btn btn-primary btn-sn cr-confirm-alert-btn",F.onclick=function(){switch(ue){case 1:if(""===f.elements.Name.value||""===f.elements.Email.value)return void a("Please fill out all required fields.");if(!r(f.elements.Email.value))return void a("Email address is not valid.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="inline-block",w.insertBefore(R,F),ue++;break;case 2:if(""===f.elements.Brand.value||"placeholder"===f.elements.Brand.value)return void a("Please select the brand affected by this issue.");document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",w.removeChild(F),w.appendChild(k),ue++}},F.style.padding="5px 10px",F.style.fontSize="12px",F.style.lineHeight="1.5",F.style.borderRadius="3px",F.innerHTML="Next >>";var R=document.createElement("button");R.type="button",R.className="btn btn-primary btn-sn cr-confirm-alert-btn",R.onclick=function(){switch(ue){case 2:a(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="none",w.removeChild(R);break;case 3:a(""),document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",w.appendChild(F),w.removeChild(k)}ue--},R.style.padding="5px 10px",R.style.fontSize="12px",R.style.lineHeight="1.5",R.style.borderRadius="3px",R.style.marginRight="10px",R.innerHTML="<< Back",w.appendChild(b),w.appendChild(F),v.appendChild(w),c.appendChild(v),e.insertBefore(c,_)}}function T(e){function t(e,t,a){for(var r=0;r<a.length;r++){var s=a[r];switch(s.type){case"textarea":var l=i("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=i("div",s.label+": "+(!0===s.required?" *":""))
;d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=i("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p),c=document.createElement("div"),c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":var y=i("div",s.label+": "+(!0===s.required?" *":""));y.style.fontWeight="bolder",e.appendChild(y),s.element=document.createElement("select"),s.element.name=s.name;for(var v=0;v<s.options.length;v++){var w=i("option",s.options[v].text);w.value=s.options[v].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(o(s));break;case"fileUpload":$&&(d=i("div",s.label+": "+(!0===s.required?" *":"")),d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element),c=document.createElement("div"),c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br")))}}t.appendChild(e)}function a(e){""!==e?(b.style.display="inline-block",b.innerHTML=e):b.style.display="none",window.setTimeout(function(){b.style.display="none"},3e3)}function r(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(Z("Building Mobile Creative Review Form"),e){var s=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],l=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],d=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var c=document.createElement("div");c.style.width="100%",c.style.height="100%",c.style.display="inline-block",c.style.padding="5px",c.style.margin="0",c.style.border="solid 2px purple";var u=document.createElement("div");u.style.width="99%",u.style.borderBottom="solid 1px black",u.style.fontSize="12px";var p=document.createElement("p");p.style.padding="0",p.style.fontWeight="bolder",p.style.margin="auto",p.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",u.appendChild(p),c.appendChild(u);var f=document.createElement("form");f.style.padding="0",f.style.margin="0",c.appendChild(f);var h=document.createElement("div");h.style.width="50%",h.style.height="100%",h.style.minHeight="160px",h.style.display="inline-block",h.style.padding="5px 5px",h.style.margin="0",h.style.float="left",h.style.fontSize="12px",h.id="cr_panel_1",t(h,f,s);var m=document.createElement("div");m.style.width="50%",m.style.height="100%",m.style.minHeight="160px",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.style.display="inline-block",m.id="cr_panel_2",t(m,f,l);var g=document.createElement("div");g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_3",t(g,f,d);var y=document.createElement("div");y.style.clear="both",c.appendChild(y);var v=document.createElement("div");v.style.width="99%",v.style.height="10%",v.style.padding="0",v.style.margin="0";var w=document.createElement("div");w.style.display="inline-block",w.style.float="right",w.style.height="10%";var b=document.createElement("div");b.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var _=document.createElement("div");_.className="cr-confirm-alert",_.style.visibility="hidden";var C=document.createElement("div");C.className="cr-confirm-alert-text";var x=new Date,A=x.getDay(),E=x.getHours(),S=0===A||6===A||E<8||E>17,T=S?"2 hours outside of":"1 hour during";C.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+T+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",_.appendChild(C),_.appendChild(document.createElement("br"));var N=document.createElement("button");N.className="btn btn-primary btn-sm",N.innerHTML="OK",N.onclick=function(e){e.preventDefault(),O(),_.style.visibility="hidden",f.reset()},_.appendChild(N),e.appendChild(_);var k=document.createElement("input");k.type="submit",k.className="btn btn-primary btn-sm cr-confirm-alert-btn",k.onclick=function(e){if(e.preventDefault(),""===f.elements.Comments.value)return void a("Please describe the issue you are reporting.");I(f,function(){_.style.visibility="visible"})};var F=document.createElement("button");F.type="button",F.className="btn btn-primary btn-sn cr-confirm-alert-btn",F.onclick=function(){return""===f.elements.Name.value||""===f.elements.Email.value||"placeholder"===f.elements.Brand.value||""===f.elements.Brand.value?void a("Please fill out all required fields."):r(f.elements.Email.value)?(document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",Z("Appending Back and Submit Buttons.  Removing Next Button."),w.removeChild(F),w.appendChild(R),w.appendChild(k),void 0):void a("Email address is not valid.")},F.style.padding="5px 10px",F.style.fontSize="12px",F.style.lineHeight="1.5",F.style.borderRadius="3px",F.innerHTML="Next >>";var R=document.createElement("button");R.type="button",R.className="btn btn-primary btn-sn cr-confirm-alert-btn",R.onclick=function(){a(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",Z("Adding Next Button. Removing Submit and Back Buttons."),w.appendChild(F),w.removeChild(R),w.removeChild(k)},R.style.padding="5px 10px",R.style.fontSize="12px",R.style.lineHeight="1.5",R.style.borderRadius="3px",R.style.marginRight="10px",R.innerHTML="<< Back",w.appendChild(b),w.appendChild(F),v.appendChild(w),c.appendChild(v),e.insertBefore(c,_)}}function N(e){var t={};if(e.data&&"function"===typeof e.data.indexOf&&0===e.data.indexOf("{")&&e.data.indexOf("googMsgType")<0)try{t=JSON.parse(e.data),t.pos}catch(e){return}if(t.divId){if(Array.isArray(t.divId)&&t.divId.length>1&&(t.divId=t.divId[0]),t.filteredSources.length>0)for(var n=0;n<t.filteredSources.length;n++){var i=t.filteredSources[n];if(i.indexOf("javascript:")<0){var o=function(){var e=i,n=document.createElement("img"),o=document.getElementById(t.divId),a=document.querySelectorAll("div[id='"+t.divId+"'] div[id^='google_ads_iframe']");if(n.className="adfuel-temp-image",n.src=e,0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//")){o.appendChild(n);for(var r=0;r<a.length;r++){a[r].style.display="none"}}},a=function(){for(var e=document.getElementById(t.divId),n=document.querySelectorAll("div[id='"+t.divId+"'] img.adfuel-temp-image"),i=document.querySelectorAll("div[id='"+t.divId+"'] div[id^='google_ads_iframe']"),o=0;o<n.length;o++){var a=n[o];try{e.removeChild(a)}catch(e){}}for(var r=0;r<i.length;r++){i[r].style.display="block"}};K.push(o),G.push(a)}}z.addMetric({type:"creatives",id:t.divId,data:t})}}function k(e){if(e&&"FORM"===e.nodeName){var t,n,i=[],o={};for(t=e.elements.length-1;t>=0;t-=1)if(""!==e.elements[t].name)switch(e.elements[t].nodeName){case"INPUT":switch(e.elements[t].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value;break;case"file":e.elements[t].files.length>0&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].files[0],o[e.elements[t].name+"FileName"]=o[e.elements[t].name].name);break;case"checkbox":e.elements[t].checked&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]?o[e.elements[t].name].push(e.elements[t].value):o[e.elements[t].name]=[e.elements[t].value]);break;case"radio":e.elements[t].checked&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value)}break;case"TEXTAREA":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value;break;case"SELECT":switch(e.elements[t].type){case"select-one":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value;break;case"select-multiple":for(n=e.elements[t].options.length-1;n>=0;n-=1)e.elements[t].options[n].selected&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].options[n].value)),o[e.elements[t].name]=e.elements[t].options[n].value)}break;case"BUTTON":switch(e.elements[t].type){case"reset":case"submit":case"button":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value}}return o}}function I(e,t){var n=k(e),i=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&t(200===e.status)};var i=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),o=new Blob([JSON.stringify(window.AdFuel.requestScriptText,null,2)],{type:"application/json"}),a=new Blob([JSON.stringify(window.AdFuel.registry,null,2)],{type:"application/json"}),r={availHeight:screen.availHeight,availLeft:screen.availLeft,availTop:screen.availTop,availWidth:screen.availWidth,colorDepth:screen.colorDepth,height:screen.height,orientation:{angle:screen.orientation.angle,onchange:screen.orientation.onchange,type:screen.orientation.type},pixelDepth:screen.pixelDepth,width:screen.width},s=JSON.parse(JSON.stringify(window.AdFuel.metrics.slots));for(var l in s)s.hasOwnProperty(l)&&(delete s[l].build_end,delete s[l].build_start,delete s[l].display,delete s[l].queued,delete s[l].render_start,delete s[l].render_end);var d=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),c=new Blob([JSON.stringify(document.cookie,null,2)],{type:"application/json"}),u=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),p=new Blob([JSON.stringify(window.AdFuel.metrics.timeline,null,2)],{type:"application/json"}),f=new Blob([JSON.stringify(window.location.href,null,2)],{type:"application/json"}),h=new FormData;h.append("formData",i),h.append("request",o),h.append("registry",a),h.append("slots",d),h.append("cookies",c),h.append("browser",u),h.append("timeline",p),h.append("url",f);var m="http://"+CNN.AdsConfig.adfuelServicesHost+"/api/email";-1!==m.indexOf("adfuel-services-host")&&(m="http://localhost:3050/api/email"),e.open("POST",m,!0),e.send(h),z.addMetric({type:"modules",id:"Creative Review",data:{reported_information:n[0]}})};if(n.Screenshot){n.Screenshot.type.match("image.*")||i();var o=new FileReader;o.onload=function(){return function(e){n.Screenshot=e.target.result,i()}}(n.Screenshot),o.readAsDataURL(n.Screenshot)}else i()}function F(e,t){var n=document.createElement("div");0===t.indexOf("request_")&&(t=t.replace("request_",""));var i=e.id.split("-")[3],o=z.metrics[i][t],a=document.createElement("ul");a.id="adfuel_console_"+i+"_items",a.style.listStyleType="none",a.style.padding="0",a.style.margin="0";for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];isNaN(parseInt(s))||(s="request_"+(parseInt(s)+1));var d=document.createElement("li");d.id="adfuel-console-"+i+"-"+s,d.style.display="block";var c=document.createElement("div"),u=document.createElement("span");u.style.display="inline-block",u.style.width="25%",u.style.minWidth="150px",u.style.textAlign="left",u.style.margin="0",u.style.padding="0",u.style.paddingRight="10px",u.style.float="left",u.style.fontWeight="bolder",u.style.borderBottom="solid 1px #BCBCBC",u.innerHTML=h(s.replace(/_/g," ")+": "),c.appendChild(u),null===l?l="N/A":l||(l="False");var p=Object.getOwnPropertyNames(l),f=typeof l;if("string"===f||"boolean"===f||"number"===f||Array.isArray(l)&&1===l.length){var m="",g=!1;Array.isArray(l)?(g=r(l[0]),m=g?l[0]:h(l[0])):(g=r(l),m=g?l:h(l));var y=document.createElement("div");if(y.style.margin="0",y.style.padding="0",y.style.display="block",y.style.width="65%",y.style.maxWidth="800px",y.style.float="left",y.style.borderBottom="solid 1px #BCBCBC",y.style.textOverflow="ellipsis",y.style.whiteSpace="nowrap",y.style.overflow="hidden",g){var v=document.createElement("a");v.href=m,v.target="_blank",v.title=m,v.appendChild(document.createTextNode(m)),y.appendChild(v)}else y.appendChild(document.createTextNode(m));c.appendChild(y);var w=document.createElement("div");w.style.clear="both",c.appendChild(w)}else if(Array.isArray(l)){var b=document.createElement("div");b.style.width="65%",b.style.margin="0",b.style.position="relative",b.style.float="left",b.style.textOverflow="ellipsis",b.style.whiteSpace="nowrap",b.style.overflowX="hidden";var _=document.createElement("ul");_.style.listStyleType="none",_.style.margin="0",_.style.padding="0";for(var C=0;C<l.length;C++){var x=document.createElement("li");x.style.marginLeft="0",x.style.paddingLeft="0",x.style.borderBottom="solid 1px #BCBCBC",x.style.margin="0",x.style.padding="0",x.style.display="block",x.style.width="100%",x.style.maxWidth="800px",x.style.float="left",x.style.borderBottom="solid 1px #BCBCBC",x.style.textOverflow="ellipsis",x.style.whiteSpace="nowrap",x.style.overflow="hidden",g=r(l[C]),m="",g?(m=l[C],v=document.createElement("a"),v.href=m,v.target="_blank",v.title=m,v.appendChild(document.createTextNode(m)),x.appendChild(v)):(m=h(l[C]),x.appendChild(document.createTextNode(m))),_.appendChild(x)}b.appendChild(_),c.appendChild(b),w=document.createElement("div"),w.style.clear="both",c.appendChild(w)}else{for(b=document.createElement("div"),b.style.width="65%",b.style.maxWidth="800px",b.style.margin="0",b.style.position="relative",b.style.left="5px",b.style.borderBottom="solid 1px #BCBCBC",b.style.textOverflow="ellipsis",b.style.whiteSpace="nowrap",b.style.overflowX="hidden",_=document.createElement("ul"),_.style.listStyleType="none",_.style.margin="0",_.style.padding="0",C=0;C<p.length;C++){x=document.createElement("li"),x.style.padding="0",x.style.margin="0",g=r(p[C]),m="",m=g?p[C]:h(p[C]);var A=l[p[C]];if("undefined"!==typeof A){var E=document.createElement("label");E.style.width="25%",E.appendChild(document.createTextNode(m+": ")),x.appendChild(E);var S=typeof A;"object"===S&&(A=Array.isArray(A)?A.join(", "):JSON.stringify(A)),y=document.createElement("span"),y.title=A,y.appendChild(document.createTextNode(A)),x.appendChild(y)}else x.appendChild(document.createTextNode(m));_.appendChild(x)}b.appendChild(_),c.appendChild(b)}d.appendChild(c),a.appendChild(d)}n.style.overflowY="auto",n.style.height="80%",n.style.minHeight="250px",n.appendChild(a),e.appendChild(n)}function R(e,t){function n(e){return e.indexOf("_")<0||e.indexOf("_")>0}function i(e,t){var o=document.createElement("ul");o.className="adfuel-console-collection-list-item-detail-list";for(var a=Object.getOwnPropertyNames(e).filter(n),r=0;r<a.length;r++){var s=document.createElement("li");s.className="adfuel-console-collection-list-item-detail-list-item";document.createElement("div").className="adfuel-console-collection-list-item-detail-list-item-container";var l=document.createElement("label");l.className="adfuel-console-collection-list-item-detail-list-item-label";var d=a[r],c=h(d.replace(/_/g," "));l.appendChild(document.createTextNode(c)),s.appendChild(l),Array.isArray(e[d])&&e[d].length>1&&(e[d]=e[d].join("<br>"),e[d]=e[d]+"<br><br>");var u=document.createElement("div");u.style.clear="both";var p=document.createElement("div");if(Array.isArray(e[d])||"object"!==typeof e[d]||null===e[d])p.className="truncate",p.innerText=e[d],p.innerHTML=e[d],p.title=e[d];else{var f=i(e[d],!0),m=document.createElement("div");m.style.clear="both",p.appendChild(m),p.appendChild(f)}t&&s.appendChild(u),s.appendChild(p),s.appendChild(u),o.appendChild(s)}return o}if(e){e.innerHTML="";var o=e.id.replace("adfuel-console-panel-",""),a=z.metrics[o];if(t)t=Object.getOwnPropertyNames(a),A(e,t);else{var r=document.createElement("div");r.className="adfuel-console-collection-container";var s=document.createElement("ul");s.id="adfuel_console_"+o+"_items",s.className="adfuel-console-collection-list",s.style.listStyleType="none",s.style.padding="0",s.style.margin="0";for(var l in a)if(a.hasOwnProperty(l)){var d=a[l],c=document.createElement("li");c.id="adfuel-console-"+o+"-"+l,c.className="adfuel-console-collection-list-items";var u=document.createElement("div");u.className="adfuel-console-collection-list-item-container";var p=document.createElement("label");p.className="adfuel-console-collection-list-item-label";var f=document.createElement("span");p.appendChild(f),p.appendChild(document.createTextNode(h(l.replace(/_/g," ")))),u.appendChild(p);var m=document.createElement("hr");m.className="adfuel-console-separator",u.appendChild(m);var g;if(Array.isArray(d))for(var y=0;y<d.length;y++)d=d[y],g=i(d),u.appendChild(g);else g=i(d),u.appendChild(g);c.appendChild(u),s.appendChild(c)}r.appendChild(s),e.appendChild(r)}}}function O(){var e=document.querySelector("div.adfuel-console-button-container"),n=document.querySelector("body > div.adfuel-console-button-container > a"),i=document.querySelector("div.adfuel-console-filler"),o=document.querySelector("div.adfuel-console");i.style.display="none",o.style.display="none",e&&n&&(e.style.display="inline-block",t(n,"click",u),window.AdFuel.openConsole=u)}function D(){window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("slotRenderEnded",function(e){try{var t={};e.slot&&(t.asset=e.slot),e.slot.getTargeting("pos")&&(t.pos=e.slot.getTargeting("pos")),e.isEmpty?t.empty=!0:t.empty=!1,e.size&&(t.renderedSize=e.size),e.creativeId&&(t.creativeId=e.creativeId),e.lineItemId&&(t.lineItemId=e.lineItemId),e.serviceName&&(t.serviceName=e.serviceName),e.slot.getSlotElementId()&&(t.divId=e.slot.getSlotElementId());var n=window.AdFuel.pageSlots[t.divId].getResponseInformation();t.campaignId=n?n.campaignId:0,t.advertiserId=n?n.advertiserId:0,z.addMetric({type:"slots",id:t.divId,data:{advertiserId:t.advertiserId,campaignId:t.campaignId,creativeId:t.creativeId,lineItemId:t.lineItemId}})}catch(e){X("error reading slotRenderEnded event",{error:e})}})})}function M(e,t){for(var n=1;n<e.length;n++){var i=e[n];fe.indexOf(i.rktr_slot_id)<0&&(window.AdFuel.addSlotLevelTarget(i.rktr_slot_id,"elemId",i.rktr_slot_id),fe.push(i.rktr_slot_id))}window.AdFuel.addEvent(document,"SlotIdChange",function(e){e.detail.newId!==e.detail.originalId&&fe.indexOf(e.detail.newId)<0&&(window.AdFuel.addSlotLevelTarget(e.detail.newId,"elemId",e.detail.newId),fe.push(e.detail.newId))}),t()}function j(){z=window.AdFuel.registerModule("AdFuel Console Tool",{preQueueCallback:M,metricUpdateCallback:y}),z.addMetric({type:"creative review",id:"Form",data:{}}),window.AdFuel.addEvent(window,"message",N),B(),P(),D(),y({}),e(),window.addEventListener("hashchange",e,!1)}function B(){var e=function(){V=!0,c()},t=function(){V=!1,c()},n=function(){var n={prevent_default:!1,prevent_repeat:!1,is_sequence:!1,is_exclusive:!0,is_solitary:!0},i={keys:"ctrl shift z",on_keydown:e};new window.keypress.Listener(window,n).register_combo(i),n={prevent_default:!1,prevent_repeat:!1,is_sequence:!0,is_exclusive:!0,is_solitary:!0},i={keys:"d o h",on_keydown:t},new window.keypress.Listener(window,n).register_combo(i)};if(window.keypress)n();else{var i=document,o=i.createElement("script"),a=i.getElementsByTagName("script")[0],r=/^(complete|loaded)$/,s=!1,l="https:"===document.location.protocol;o.type="text/javascript",o.async=!0,o.src=(l?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/keypress.js",o.onload=o.onreadystatechange=function(){s||"readyState"in o&&r.test(o.readyState)||(o.onload=o.onreadystatechange=null,s=!0,n())},a.parentNode.insertBefore(o,a)}}function P(){var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0],i="https:"===document.location.protocol;t.type="text/javascript",t.async=!0,t.src=(i?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/dhtmlxgrid.min.js",n.parentNode.insertBefore(t,n)}var q,L=function(){return!1},z={metrics:{},addMetric:L,getMetricById:L,getMetricsByType:L,getMetricTypes:L},U="Console Tool/Creative Review",H=!1,W=[],Q=!0,V=!1,$=window.File&&window.FileReader&&window.FileList&&window.Blob,K=[],G=[],J=Object.prototype,Y=J.toString,Z=L,X=L,ee=L,te=L;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===Y.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(Z=function(){var e=["[AdFuelModule - "+U+"]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},X=function(){var e=["[AdFuelModule - "+U+" ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)},ee=function(){var e=["[AdFuelModule - "+U+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)},te=function(){var e=["[AdFuelModule - "+U+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.timeEnd(t)});var ne=!1,ie=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,oe=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,ae=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,re=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),se=function(e,t){return e.test(t)},le=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");if("undefined"!==typeof n[1]&&(t=n[0]),n=t.split("Twitter"),"undefined"!==typeof n[1]&&(t=n[0]),this.apple={phone:se(/iPhone/i,t),ipod:se(/iPod/i,t),tablet:!se(/iPhone/i,t)&&se(/iPad/i,t),device:se(/iPhone/i,t)||se(/iPod/i,t)||se(/iPad/i,t)},this.amazon={phone:se(oe,t),tablet:!se(oe,t)&&se(ae,t),device:se(oe,t)||se(ae,t)},this.android={phone:se(oe,t)||se(ie,t),tablet:!se(oe,t)&&!se(ie,t)&&(se(ae,t)||se(/Android/i,t)),device:se(oe,t)||se(ae,t)||se(ie,t)||se(/Android/i,t)},this.windows={phone:se(/Windows Phone/i,t),tablet:se(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t),device:se(/Windows Phone/i,t)||se(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t)},this.other={blackberry:se(/BlackBerry/i,t),blackberry10:se(/BB10/i,t),opera:se(/Opera Mini/i,t),firefox:se(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t),chrome:se(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t),device:se(/BlackBerry/i,t)||se(/BB10/i,t)||se(/Opera Mini/i,t)||se(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t)||se(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t)},this.seven_inch=se(re,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"===typeof window)return this},de=function(){var e=new le;return e.Class=le,e},ce=null,ue=1,pe=z.getMetricTypes()||{},fe=[];!function(){d(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(j):window.AdFuel?j():document.addEventListener?document.addEventListener("AdFuelCreated",j,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",j)}()}(),!0===CNN.Features.enableAmazonDisplayAds&&function(){"use strict";function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}function t(e){var t=!1,n=null;if(localStorage&&(t=!0),"undefined"===typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}return null}(e));try{n=JSON.parse(n)}catch(e){}return n}}function n(){var e,t;return"undefined"!==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),[e,t]}function i(t){t=t||k;var n=e("mdt");n&&(t=n,_.log("Overriding Max Duration Time: ",t));var i=function(e,n){window.targetingTimeoutId=setTimeout(function(){_.log("getTargetingData timed out after "+t+"ms."),clearTimeout(window.targetingTimeoutId),n("getTargetingData timed out after "+t+"ms.")},t)},o=function(e){_.log("Getting A9 Video targeting...");var t=function(e){clearTimeout(window.targetingTimeoutId);var t={};e.forEach(function(e){e.slotID.indexOf("aps-")>=0&&(t=e)});var n={amznbid:t.amznbid||"",amzniid:t.amzniid||""};return _.log("Returning A9 Targeting: ",n),n};window.A9VideoAPI._targetingPromise.then(function(n){e(t(n))})},a=new Promise(o),r=new Promise(i);return Promise.race([r,a])}function o(t,n){n=n||I,t=t||"aps-midroll";var i=e("mdt"),o=e("slotname");i&&(n=i,_.log("Overriding Max Duration Time: ",n)),o&&(t=o,_.log("Overriding Slot Name: ",t));var a=function(e,t){window.targetingTimeoutId=setTimeout(function(){_.log("getRefreshedTargetingData timed out after "+n+"ms."),clearTimeout(window.targetingTimeoutId),t("getRefreshedTargetingData timed out after "+n+"ms.")},n)},r=function(e){window.A9VideoAPI._targetingPromise=new Promise(function(e){window.apstag.fetchBids({slots:[{slotID:t,mediaType:"video"}]},e)});var n=function(n){clearTimeout(window.targetingTimeoutId);var i={};n.forEach(function(e){e.slotID===t&&(i=e)});var o={amznbid:i.amznbid||"",amzniid:i.amzniid||""};_.log("Returning A9 Targeting: ",o),e(o)};_.log("Refreshing A9 Video targeting..."),window.A9VideoAPI._targetingPromise.then(n)},s=new Promise(r),l=new Promise(a);return Promise.race([l,s])}function a(e){return e.reduce(function(e,t){return e[t.getSlotElementId()]=t,e},{})}function r(e,t,n){v("Handling A9 Bids:",e,t),w("Handling A9 Bids"),window.googletag.cmd.push(function(){function n(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}var i=a(t);e.forEach(function(e){var t=i[e.slotID]||null;if(null!==t){var o={};window.apstag.targetingKeys("display").forEach(function(i){"true"===n("debug")&&console.log("[AdFuelModule - Amazon A9] Setting A9 Targeting: ",{key:i,value:e[i]}),o[i]=e[i],t.setTargeting(i,e[i])}),g.addMetric({type:"vendor",id:"Amazon A9",data:{targeting:o}})}}),window.googletag.pubads().addEventListener("slotRenderEnded",function(e){var t=a(window.googletag.pubads().getSlots()),n=t[e.slot.getSlotElementId()];window.apstag.targetingKeys("display").forEach(function(e){n.setTargeting(e,"")})})}),b("Handling A9 Bids"),n()}function s(e,t){function i(e){E=e,N=[],t()}w("A9 Slot Building");var o=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],a=["_ns_","_nfs_"],r=["super-ad-zone","super_ad_zone"],s=n();v("Browser Dimensions: ",s);for(var l=1;l<e.length;l++){var d=e[l].originalElementId||e[l].rktr_slot_id,c=d.split("_");c.splice(0,1),d=c.join("_"),v("Checking slot and sizes for validity: ",d);for(var u=[],p=!0,f=!1,h=0;h<e[l].responsive.length;h++){var m=e[l].responsive[h];f||v("Checking For Responsive Viewport: ",m[0].join("x")),!f&&m[0][0]<s[0]&&m[0][1]<s[1]&&(v("Match found."),f=!0,u=m[1],"suppress"!==m[1][0]&&"suppress"!==u||(v("Slot is responsive and being suppressed.  Filtering slot."),p=!1))}if(u.length>0&&p&&(v("Slot is responsive and not being suppressed.  Using responsive sizes: ",u),e[l].sizes=u),p){for(var g=0;g<e[l].sizes.length;g++){var y=e[l].sizes[g].join("x");o.indexOf(y)<0&&(v("Filtering out Invalid Size: ",y),e[l].sizes.splice(g,1),g-=1)}0===e[l].sizes.length&&(v("No Valid Sizes: ",e[l].sizes),p=!1);for(var _ in a)e[l].rktr_slot_id.indexOf(a[_])>=0&&(v("Filtering out invalid slot type: ",a[_],e[l]),p=!1);for(var C in r)e[l].rktr_ad_id.indexOf(r[C])>=0&&(v("Filtering out invalid ad unit segment: ",r[C],e[l]),p=!1);if(p){v("Valid Slot: ",e[l]);var x={slotID:e[l].rktr_slot_id,sizes:e[l].sizes};N.push(x)}}}b("A9 Slot Building"),N.length>0?window.apstag.fetchBids({slots:N},i):v("No valid slots.")}function l(e,t){window.googletag.cmd.push(function(){var e=window.googletag.pubads().getSlots();E&&r(E,e,t),E||(v("No Bids."),t())})}function d(e,t){E=null,w("Refreshing A9 Bids"),window.apstag.fetchBids({slots:N},function(e){E=e,b("Refreshing A9 Bids");var n=window.googletag.pubads().getSlots();r(E,n,t)})}function c(){y||(v("Registering "+m+" module with AdFuel"),window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1e3,dispatchCallbackTimeoutInMilliseconds:1e3,refreshCallbackTimeoutInMilliseconds:2e3}),g=window.AdFuel.registerModule(m,{preQueueCallback:s,preDispatchCallback:l,preRefreshCallback:d})||g)}function u(){var t="3159";window.A9VideoAPI={getTargetingData:i,
getRefreshedTargetingData:o},v("Defaulting to Domestic PubId."),v("Country Code: ",C),v("Hostname: ",S),v("Pathname: ",T),v("Selected Edition: ",x),S.search(/^(.*)?(edition|arabic)\./)>=0?(v("Full international site. Using International PubId."),t="3288"):S.search(/^(.*)?money/)>=0&&"/"===T&&"edition"===x?(v("International CNN Money Homepage. Using International PubId."),t="3288"):""===C||null===C?S.search(/^(.*)?(cnnespanol|cnne\-test)\./)>=0&&(v("No country code. Using International PubId."),t="3288"):"US"!==C&&"CA"!==C&&S.search(/^(.*)?(money|cnnespanol|cnne\-test|www\.cnn)\./)>=0&&(v("International country code. Using International PubId."),t="3288"),function(e,t,n,i,o,a,r){function s(n,i){t[e]._Q.push([n,i])}t[e]||(t[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},_Q:[]},a=n.createElement(i),a.async=!0,a.src="//c.amazon-adsystem.com/aax2/apstag.js",r=n.getElementsByTagName(i)[0],r.parentNode.insertBefore(a,r))}("apstag",window,document,"script"),v("Final Pub ID: ",t);var n=500,a=e("mdt");a&&(n=a,_.log("Overriding Max Duration Time: ",n));var r="aps-preroll",s=e("slotname");s&&(r=s,_.log("Overriding Slot Name: ",r)),window.apstag.init({pubID:t,adServer:"googletag",videoAdServer:"freeWheel",bidTimeout:n}),window.A9VideoAPI._targetingPromise=new Promise(function(e){window.apstag.fetchBids({slots:[{slotID:r,mediaType:"video"}]},e)})}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){function e(){}function t(e){if(!(this instanceof t))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],r(e,this)}function n(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var a;try{a=t(e._value)}catch(e){return void o(n.promise,e)}i(n.promise,a)}else(1===e._state?i:o)(n.promise,e._value)})):e._deferreds.push(n)}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var i=n.then;if(n instanceof t)return e._state=3,e._value=n,void a(e);if("function"==typeof i)return void r(function(e,t){return function(){e.apply(t,arguments)}}(i,n),e)}e._state=1,e._value=n,a(e)}catch(t){o(e,t)}}function o(e,t){e._state=2,e._value=t,a(e)}function a(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var i=0,o=e._deferreds.length;o>i;i++)n(e,e._deferreds[i]);e._deferreds=null}function r(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,o(t,e))})}catch(e){if(n)return;n=!0,o(t,e)}}var s=setTimeout;t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(t,i){var o=new this.constructor(e);return n(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(t,i,o)),o},t.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},t.all=function(e){return new t(function(t,n){function i(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(t){i(e,t)},n)}o[e]=r,0==--a&&t(o)}catch(e){n(e)}}if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);for(var a=o.length,r=0;o.length>r;r++)i(r,o[r])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=0,o=e.length;o>i;i++)e[i].then(t,n)})},t._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){s(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==l)return l;throw Error("unable to locate global object")}();l.Promise||(l.Promise=t)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0});var p=Object.prototype,f=p.toString,h=function(){},m="Amazon A9",g={metrics:{},addMetric:h,getMetricById:h,getMetricsByType:h,getMetricTypes:h},y=!1,v=h,w=h,b=h;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===f.call(e)}(window.console.log)&&"true"===e("debug")&&(v=function(){var e=["[AdFuelModule - "+m+" v1.3.15]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},w=function(){var e=["[AdFuelModule - "+m+" v1.3.15 TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)},b=function(){var e=["[AdFuelModule - "+m+" v1.3.15 TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.timeEnd(t)});var _={log:v,logTime:w,logTimeEnd:b},C=(t("CG")?t("CG").substr(0,2):"")||t("countryCode"),x=t("SelectedEdition")?t("SelectedEdition"):"www",A=document.createElement("a");A.href=document.location.href;var E,S=A.hostname,T=A.pathname,N=[],k=500,I=1e3;v("Initializing "+m+" Module..."),function(){u(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(c):window.AdFuel?c():document.addEventListener?document.addEventListener("AdFuelCreated",c,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",c)}()}(),window.AmazonDirectMatchBuy=function(){function e(e,t){return null!==e&&m.call(e,t)}function t(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function n(e){return function(){e&&(e.apply(this,arguments),e=null)}}function i(e){var t=!1,n=null;if(localStorage&&(t=!0),"undefined"===typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return""}return""}(e));try{n=JSON.parse(n)}catch(e){}return n}}function o(){return!!window.amznads}function a(){var e={};return o()&&(e=window.amznads.getTargeting(),t(e)||(e={})),e}function r(e){var t=e.getId();if(A.has(t)){var n=A.getKeys(t);if(n.length){v("clearing previous ad key-values: "+n.join(", "));for(var i=0,o=n.length;i<o;++i)e.setAdKeyValue(n[i],null);A.clearKeys(t)}}}function s(e,t,n){v("setting ad key-value: "+t+' = "'+n+'"'),A.addKey(e.getId(),t),e.setAdKeyValue(t,n)}function l(t){var n=a();r(t);for(var i in n)if(e(n,i)){var o=n[i];if(o instanceof Array)for(var l=0,d=o.length;l<d;++l)s(t,o[l],"1");else s(t,i,o)}}function d(e){e.getPlayerType()===window.CVP.FLASH&&(v("setAdKeyValuePairs",e),l(e))}function c(e){if(!o())return!e||e();var t=n(function(){return!e||e()});try{window.amznads.getAdsCallback(_,t,C)}catch(e){v("Exception thrown while requesting Amazon ads:",e),t()}}function u(e){v("initializing",e),e&&(_=e.amznkey||_,C=e.timeout||C),x=!0}function p(e){return function(){if(!x)return void v("ERROR: init() must be called first!");e.apply(this,arguments)}}var f=Array.prototype,h=Object.prototype,m=h.hasOwnProperty,g=f.slice,y=h.toString,v=function(){};t(window.console)&&function(e){return"[object Function]"===y.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(v=function(){var e=["[AdFuelModule - Amazon Video]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)});var w=(i("CG")?i("CG").substr(0,2):"")||i("countryCode");v("Country Code: ",w);var b=window.location.hostname.toLowerCase(),_="3159";""===w||null===w?b.search(/^(edition|arabic|cnnespanol|cnne\-test)\./)>=0&&(_="3288"):"US"!==w&&"CA"!==w&&b.search(/^(money|edition|arabic|cnnespanol|cnne\-test|www\.cnn)\./)>=0&&(_="3288");var C=1e3,x=!1,A=function(){function e(e){return e in o}function t(t,n){e(t)||(o[t]=[]),o[t].push(n)}function n(t){return e(t)?g.call(o[t]):[]}function i(t){return!!e(t)&&(o[t].length=0,!0)}var o={};return{has:e,clearKeys:i,getKeys:n,addKey:t}}();return{requestAdRefresh:p(c),getTargetingData:p(a),setAdKeyValuePairs:p(d),isAmazonApiAvailable:o,init:u}}(),!0===CNN.Features.enableAmazonDisplayAds&&function(e){var t=document,n=t.createElement("script"),i=t.getElementsByTagName("script")[0],o=/^(complete|loaded)$/,a=!1;n.type="text/javascript",n.async=!0,n.src=("https:"===document.location.protocol?"https:":"http:")+(CNN.AdsConfig.amazonOverride||"//c.amazon-adsystem.com/aax2/amzn_ads.js"),n.onload=n.onreadystatechange=function(){a||"readyState"in n&&o.test(n.readyState)||(n.onload=n.onreadystatechange=null,a=!0,e())},window.AmazonDirectMatchBuy?e():i.parentNode.insertBefore(n,i)}(function(){CNN.AdsConfig.amazon.amznkey?window.AmazonDirectMatchBuy.init(CNN.AdsConfig.amazon):window.AmazonDirectMatchBuy.init()}),!0===CNN.Features.enableCriteoAds&&function(){function e(){if(!d){y("Including Criteo Library..."),d=!0;var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src="//static.criteo.net/js/ld/publishertag.js",n.parentNode.insertBefore(t,n)}}function t(){var e,t;return"undefined"!==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),[e,t]}function n(e,n){function i(){y("Setting LineItem Ranges..."),window.Criteo.SetLineItemRanges("0..5:0.01;5..30:0.05;30..100:1.00"),y("Previously Requested: ",E),y("Requesting Bids...",o),r.addMetric({type:"vendor",id:"Criteo",data:x}),E.placements=E.placements.concat(o.placements),window.Criteo.RequestBids(o,n,1100)}for(var o={placements:[]},a=0;a<e.length;a++){var s=e[a];if("page"!==s.rktr_slot_id){for(var l=[],d=t(),c=!1,u=!0,p=0;p<s.responsive.length;p++){var f=s.responsive[p];!c&&f[0][0]<d[0]&&f[0][1]<d[1]&&(c=!0,l=f[1],"suppress"!==f[1][0]&&"suppress"!==l||(u=!1))}u&&l.length>0?(y("Setting Sizes To Responsive Sizes: ",l),s.sizes=l):u||(s.sizes=[]);var h=s.sizes,m=s.rktr_slot_id,v=s.rktr_ad_id;x[m]=[],A[m]=0;var T=v.split("/")[0];if(u&&S.hasOwnProperty(T))for(var N=0;N<h.length;N++){var k=h[N],I=k[0]||null,F=k[1]||null,R=null!==I?I*F:0,O=null!==I?I+"x"+F:k.join("x"),D=S[T][O]?S[T][O]:S[T]["ROS_"+O]?S[T]["ROS_"+O]:null;if("CNN"===T&&v.indexOf("homepage")>0&&(D=S[T]["HP_"+O]||D),["300x250","320x50"].indexOf(O)>=0&&g.any&&(y("Using Mobile zoneId for size: ",O),D=S.MOBILE[T][O]||null),null!==D){A[m]=R>A[m]?R:A[m];var M={slotid:m,zoneid:D,width:I,height:F,area:R};-1===x[m].indexOf(M)?(y("Pushing data...",M),x[m].push(M)):y("Skipping... Already exists...",M)}}}}var j=0;for(m in x)if(x.hasOwnProperty(m))for(var B=x[m],P=0;P<B.length;P++){var q=B[P];if(j>=w)break;if(C!==_||q.area===A[q.slotid]){for(var L={slotid:m,zoneid:q.zoneid},z=!1,U=0;U<o.placements.length;U++)o.placements[U].slotid===L.slotid&&o.placements[U].zoneid===L.zoneid&&(z=!0);for(var H=0;H<E.placements.length;H++)E.placements[H].slotid===L.slotid&&E.placements[H].zoneid===L.zoneid&&(z=!0);if(z||(y("Placement does not yet exist.  Adding to collection.",L),o.placements.push(L)),j++,C===b)break}}o.placements.length>0?window.googletag.cmd.push(function(){window.Criteo.events.push(i)}):n()}function i(e,t){y("Setting DFP KeyValue Targeting...");try{window.googletag.cmd.push(function(){window.Criteo.SetDFPKeyValueTargeting()})}catch(e){v(e)}t()}function o(e,t){function n(){y("Setting LineItem Ranges..."),window.Criteo.SetLineItemRanges("0..3:0.01;3..8:0.05;8..20:0.50;20..30:1.00"),y("Requesting Bids...",E),r.addMetric({type:"vendor",id:"Criteo",data:x}),window.Criteo.RequestBids(E,o,1200)}var o=i.bind(null,e,t);window.Criteo.events.push(n)}function a(){y("Registering Module..."),r=window.AdFuel.registerModule("criteo",{preQueueCallback:n,preDispatchCallback:i,preRefreshCallback:o})||{addMetric:function(){}}}window.Criteo=window.Criteo||{},window.Criteo.events=window.Criteo.events||[];var r,s=Object.prototype,l=s.toString,d=!1,c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,u=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,p=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,f=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),h=function(e,t){return e.test(t)},m=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");if("undefined"!==typeof n[1]&&(t=n[0]),n=t.split("Twitter"),"undefined"!==typeof n[1]&&(t=n[0]),this.apple={phone:h(/iPhone/i,t),ipod:h(/iPod/i,t),tablet:!h(/iPhone/i,t)&&h(/iPad/i,t),device:h(/iPhone/i,t)||h(/iPod/i,t)||h(/iPad/i,t)},this.amazon={phone:h(u,t),tablet:!h(u,t)&&h(p,t),device:h(u,t)||h(p,t)},this.android={phone:h(u,t)||h(c,t),tablet:!h(u,t)&&!h(c,t)&&(h(p,t)||h(/Android/i,t)),device:h(u,t)||h(p,t)||h(c,t)||h(/Android/i,t)},this.windows={phone:h(/Windows Phone/i,t),tablet:h(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t),device:h(/Windows Phone/i,t)||h(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t)},this.other={blackberry:h(/BlackBerry/i,t),blackberry10:h(/BB10/i,t),opera:h(/Opera Mini/i,t),firefox:h(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t),chrome:h(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t),device:h(/BlackBerry/i,t)||h(/BB10/i,t)||h(/Opera Mini/i,t)||h(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t)||h(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t)},this.seven_inch=h(f,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"===typeof window)return this},g=function(){var e=new m;return e.Class=m,e}(),y=function(){},v=function(){},w=8,b="F",_="L",C=_;(C=C.toUpperCase())!==b&&C!==_&&"A"!==C&&(C=_);var x={},A={},E={placements:[]},S={CNN:{"160x600":1047134,"300x250":1047135,"300x600":1047136,"728x90":1047137,HP_970x90:1128528,HP_970x250:1128527,ROS_970x90:1047140,ROS_970x250:1047139,"320x50":1047138},NBA:{"320x50":1083217,"728x90":1083216,"970x90":1083218,"300x250":1083215},NCAA:{"160x600":1083227,"320x50":1083230,"300x250":1083228,"728x90":1083229,"970x90":1083231},PGA:{"728x90":1083239,"300x250":1083237,"970x90":1083242,"300x600":1083238,"970x250":1083241,"320x50":1083240},ELEAGUE:{"320x50":1083245,"300x250":1083243,"728x90":1083244},CNNMoney:{"728x90":1083234,"970x90":1083236,"970x250":1083235,"300x250":1083232,"300x600":1083233},AS:{"320x50":1083225,"728x90":1083224,"300x250":1083223,"970x90":1083226},"TBS/shows/conan":{"300x250":1083219,"728x90":1083220,"970x90":1083222,"970x250":1083221},MOBILE:{CNN:{"300x250":1090825,"320x50":1090883},NBA:{"300x250":1090830,"320x50":1090884},NCAA:{"300x250":1090831,"320x50":1090885},PGA:{"300x250":1090832,"320x50":1090886},ELEAGUE:{"300x250":1090833,"320x50":1090887},CNNMoney:{"300x250":1090834,"320x50":1090834},AS:{"300x250":1090835,"320x50":1090888},"TBS/shows/conan":{"300x250":1090836}}};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===l.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(y=function(){var e=["[AdFuelModule - Criteo v1.2.13]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},v=function(){var e=["[AdFuelModule - Criteo v1.2.13]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)}),function(){y("Initializing Module..."),e(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(a):window.AdFuel?a():document.addEventListener?document.addEventListener("AdFuelCreated",a,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",a)}()}(),!0===CNN.Features.enableBeemray&&function(){function e(e){var t=!1,n=null;if(localStorage&&(t=!0),"undefined"===typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}return null}(e));try{n=JSON.parse(n)}catch(e){}return n}}function t(){if(!l){d("Including Beemray Library..."),l=!0;var e="https://"+o+".sdk.beemray.com/content/websdk/"+a+"?source="+window.btoa(window.location.href);d("Script source: ",e);var t=document.createElement("script");t.src=e,document.head.appendChild(t)}}function n(e,t){var n=window.beemray.EventApi.create("dfpEvent","/rest/event/web/plain"),i=function(e){if(d("Response: ",e),null===e)return t(),d("Request Timeout or no Results.");for(var n=[],i=0;i<e.list.length;i++)d("Adding Page-Level Target ID: ",e.list[i].id),n.push(e.list[i].id);d("Setting Beemray Page-Level Targets: ",n),window.googletag.pubads().setTargeting("beemray",n),t()};d("Sending Beemray WebAPI event..."),n.send(i,1e3)}function i(){d("Registering Module..."),window.AdFuel.registerModule("beemray",{preQueueCallback:n})}var o="cnn",a="39a34d8d-dd1d-4fbf-aa96-fdc5f0329451",r=Object.prototype,s=r.toString,l=!1,d=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===s.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(d=function(){var e=["[AdFuelModule - Beemray v1.0.1]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),function(){var n=(e("CG")?e("CG").substr(0,2):"")||e("countryCode"),o=e("SelectedEdition")?e("SelectedEdition"):"www",a=document.createElement("a");a.href=document.location.href;var r=a.hostname;if(-1!==r.search(/^(edition|arabic|cnnespanol|money).*\.cnn\.com$/)||"localhost"===r){if(-1!==r.search(/^(money).*\.cnn\.com$/)&&"edition"!==o)return void d("Disabling Beemray due to selected edition restrictions: ",o);if(-1!==r.search(/^(edition).*\.cnn\.com$/)&&("US"===n||"CA"===n))return void d("Disabling Beemray due to countryCode restrictions: ",n);d("Initializing Module..."),t(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(i):window.AdFuel?i():document.addEventListener?document.addEventListener("AdFuelCreated",i,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",i)}else d("Disabling Beemray due to hostname restrictions: ",r)}()}(),!0===CNN.Features.enableRubiconFastlane&&function(){function e(){var e,t;return"undefined"!==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):"undefined"!==typeof document.documentElement&&"undefined"!==typeof document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):(e=document.getElementsByTagName("body")[0].clientWidth,t=document.getElementsByTagName("body")[0].clientHeight),[e,t]}function t(e){var t=!1,n=null;if(localStorage&&(t=!0),"undefined"===typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}return null}(e));try{n=JSON.parse(n)}catch(e){}return n}}function n(){m("Adding Fastlane library to head of page.");var e=11078;m("Defaulting to Domesting Account ID."),m("Country Code: ",v),_.search(/^(.*)?(edition|arabic)\./)>=0?(m("Full international site.  Using International Account ID."),e=11016):_.search(/^(.*)?money\.cnn/)>=0&&"/"===C&&"edition"===w?(m("International CNN Money Homepage. Using International Account Id."),e=11016):""===v||null===v?_.search(/^(.*)?(edition|arabic|cnnespanol|cnne\-test)\./)>=0&&(m("No country code.  Using International Account ID."),e=11016):"US"!==v&&"CA"!==v&&_.search(/^(.*)?(money|cnnespanol|cnne\-test|www\.cnn)\./)>=0&&(m("International country code.  Using International Account ID."),e=11016),m("Final Account ID: "+e);var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https:":"http:")+"//ads.rubiconproject.com/header/"+e+".js",document.getElementsByTagName("script")[0].parentNode.appendChild(t)}function i(e){clearTimeout(e),h.length=0}function o(t,n){if(y)m("Not building slots. Fastlane disabled."),n();else{m("Building slots for Fastlane",JSON.stringify(t)),g="";var o=setTimeout(function(){m("PreQueue Timeout Occurred."),window.AdFuel.addPageLevelTarget("fln_pqto","1")},1e3);window.rubicontag.cmd.push(function(){for(var a=[],r=1;r<t.length;r++){m("Checking Slot: ",t[r].rktr_slot_id);var s,l=t[r];(""===g||l.rktr_slot_id.indexOf("bnr_atf_01")>0)&&(m("Setting KW Ad Unit: ",l.rktr_ad_id),g=l.rktr_ad_id);var d={_atf_:"atf",_btf_:"btf",_mod_:"atf"},c=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],u=["_ns_","_nfs_"],p=["super-ad-zone","super_ad_zone"],f=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"];for(var h in d)if(d.hasOwnProperty(h)&&l.rktr_slot_id&&l.rktr_slot_id.indexOf(h)>=0){var y=!0,v=!1;for(var w in u)l.rktr_slot_id.indexOf(u[w])>=0&&(m("Filtering out invalid slot type: ",u[w],l),y=!1);for(var b in p)l.rktr_ad_id.indexOf(p[b])>=0&&(m("Filtering out invalid ad unit segment: ",p[b],l),y=!1);for(var _ in f)l.rktr_ad_id===f[_]&&(m("Filtering out invalid ad unit: ",f[_],l),y=!1);for(var C=[],x=0;x<l.responsive.length;x++){var A=e(),E=l.responsive[x];!v&&E[0][0]<A[0]&&E[0][1]<A[1]&&(v=!0,C=E[1],"suppress"!==E[1][0]&&"suppress"!==C||(y=!1))}if(y&&C.length>0&&(m("Setting Sizes To Responsive Sizes: ",C),l.sizes=C),y)for(var S=0;S<l.sizes.length;S++){var T=l.sizes[S];"suppress"!==T&&(T=T.join("x")),c.indexOf(T)<0&&(m("Filtering out invalid size: ",T,l),l.sizes.splice(S,1))}if(0===l.sizes.length&&(y=!1,m("Filtering out slot with no valid sizes.",l.rktr_slot_id,l.rktr_ad_id)),y){m("Slot is a valid item for Rubicon Fastlane.");var N=d[h],k=!!document.getElementById(l.rktr_slot_id)&&document.getElementById(l.rktr_slot_id).className.indexOf("adfuel-rendered")>=0;if(m("Checking for cached Fastlane response for: ",l.rktr_slot_id),"undefined"!==typeof window.rubiconSlotDictionary[l.rktr_slot_id]||k)"undefined"===typeof window.rubiconSlotDictionary[l.rktr_slot_id]&&k?m("Element has already been rendered with an ad.  Skipping Fastlane auction for: ",l.rktr_slot_id):m("Using cached Fastlane response for: ",l.rktr_slot_id);else{m("Cached response not found. Defining Slot: ","/8664377/"+l.rktr_ad_id,l.sizes,l.rktr_slot_id),s=window.rubicontag.defineSlot("/8664377/"+l.rktr_ad_id,l.sizes,l.rktr_slot_id),m("Setting Position: ",N),s.setPosition(N);for(var I=l.targeting,F=0;F<I.length;F++){var R=I[F];"pos"===R[0]&&(Array.isArray(R[1])?(m("Setting POS Keyword For "+l.rktr_slot_id,R[1][0]),s.setFPI("pos",R[1][0])):(m("Setting POS Keyword For "+l.rktr_slot_id,R[1]),s.setFPI("pos",R[1])))}m("Setting Keyword For "+l.rktr_slot_id,l.rktr_ad_id),s.addKW(l.rktr_ad_id),a.push(s),window.rubiconSlotDictionary[l.rktr_slot_id]=s}}}}for(var O=g.split("/"),D=["site","section","subsection"],M=0;M<O.length&&M<3;M++)m("Setting FPI",D[M],O[M]),window.rubicontag.setFPI(D[M],O[M]);window.CNN&&window.CNN.getCapTopics&&window.rubicontag.setFPI("cap_topics",Object.getOwnPropertyNames(window.CNN.getCapTopics())),window.rubicontag.setFPI("ssl","https:"===document.location.protocol?1:0),window.rubicontag.run(function(){i(o),n()},{slots:a})})}}function a(e){m("setting fastlane targeting"),window.googletag.cmd.push(function(){var t=window.AdFuel.pageSlots;m({slots:e,gptSlots:t});for(var n={},i=0;i<e.length;i++){var o=e[i];if(m("Slot ID: ",o.rktr_slot_id),t[o.rktr_slot_id]){var a=t[o.rktr_slot_id];m("calling window.rubicontag.setTargetingForGPTSlot..."),window.rubicontag.setTargetingForGPTSlot(a),window.refreshableRubiconSlots[o.rktr_slot_id]=window.rubiconSlotDictionary[o.rktr_slot_id];for(var r=a.getTargetingKeys(),s={},l=!1,d=0;d<r.length;d++)r[d].indexOf("rpfl_")>=0&&(l||(m("removing fln_to=1 and setting fln_to=0 for "+a.getSlotElementId()),window.AdFuel.removeSlotLevelTarget(a.getSlotElementId(),"fln_to"),window.AdFuel.addSlotLevelTarget(a.getSlotElementId(),"fln_to","0"),l=!0),m("Set Fastlane Targeting...",{slot:a.getSlotElementId(),target:{key:r[d],value:a.getTargeting(r[d])}}),s[r[d]]=a.getTargeting(r[d]));n[o.rktr_slot_id]=s}}f.addMetric({type:"modules",id:"Fastlane",data:{targeting:n}})})}function r(e){m("Fastlane Creative Rendered: ",e),f.addMetric({type:"modules",id:"Fastlane",data:e})}function s(e,t){if(y)t();else{window.rubicontag.cmd.push(function(){window.rubicontag.addEventListener("HL_CREATIVE_RENDERED",r)});var n=setTimeout(function(){t()},1e3);m("preDispatch"),a(e),clearTimeout(n)}}function l(e,t){if(y)t();else{m("preRefresh");var n=[],i=[],o=window.AdFuel.pageSlots;e||(e=Object.getOwnPropertyNames(o));for(var r=0;r<e.length;r++){var s=e[r];if(m("Slot ID: ",s),o[s]){var l=o[s],d=l.getTargetingKeys();for(var c in d)if(d.hasOwnProperty(c)){var u=d[c];u.indexOf("rpfl")>=0&&window.AdFuel.removeSlotLevelTarget(s,u)}f.addMetric({type:"modules",id:"Fastlane",data:{targeting:{}}}),window.rubiconSlotDictionary[s]&&n.push(window.rubiconSlotDictionary[s]),i.push({rktr_slot_id:s})}}m("refreshing slots",{slotsToRefresh:n}),window.rubicontag.run(function(){a(i),t()},{slots:n})}}function d(){y?m("Fastlane disabled. Not registering module."):(window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1200,dispatchCallbackTimeoutInMilliseconds:1200,refreshCallbackTimeoutInMilliseconds:1200}),f=window.AdFuel.registerModule("Fastlane",{preQueueCallback:o,preDispatchCallback:s,preRefreshCallback:l})||{metrics:{},addMetric:p,getMetricById:p,getMetricsByType:p,getMetricTypes:p})}window.rubicontag=window.rubicontag||{},window.rubicontag.cmd=window.rubicontag.cmd||[];var c=Object.prototype,u=c.toString,p=function(){return!1},f={metrics:{},addMetric:p,getMetricById:p,getMetricsByType:p,getMetricTypes:p},h=[],m=function(){},g="",y=!1,v=(t("CG")?t("CG").substr(0,2):"")||t("countryCode"),w=t("SelectedEdition")?t("SelectedEdition"):"www",b=document.createElement("a");b.href=document.location.href;var _=b.hostname,C=b.pathname;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===u.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(m=function(){var e=["[AdFuelModule - Rubicon Fastlane v2.7.9]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.rubiconSlotDictionary={},window.refreshableRubiconSlots={},function(){n(),window.AdFuel?d():document.addEventListener?document.addEventListener("AdFuelCreated",d,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",d)}()}(),!0===CNN.Features.enableInViewRefresh&&function(){function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&e.attachEvent("on"+t,n)}function t(){g||(window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("slotRenderEnded",function(e){T("Slot Render Ended: ",e);var t=e.slot.getSlotElementId()||null,n=e.creativeId||null;_[t]===n?C.push(t):(C.indexOf(t)>=0&&C.splice(C.indexOf(t),1),_[t]=n)}),window.googletag.pubads().addEventListener("impressionViewable",function(e){var t=e,n=t.slot.getSlotElementId();m[n].listenersSet?T("Refreshable In View Slot listeners have already been set for: ",n,{object:m[n]}):(T("Refreshable In View Slot listeners have not been set: ",n,{object:m[n]}),l(t))}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(e){o(e)})}),e(document,"visibilitychange",n),g=!0,T("Listeners Started!"))}function n(e){T("Visibility Change Event: ",e),T("Relaying to _focusChanged..."),y=!document.hidden,e.target=e.target||{},e.target.hidden=e.target.hidden||document.hidden,i(e)}function i(e){if(document.hidden)T("Page is hidden.  Destroying all intervals..."),s();else{T("Page is not hidden. Checking Intervals...");for(var t in m)if(m.hasOwnProperty(t)){T({index:t,slot:m[t]});var n=a(t);n?T("Interval exists...",t):(T("Creating Interval...",t),u())}}}function o(e){var t=e.inViewPercentage||0,n=e.slot.getSlotElementId();if(t>=w)if(T("Element ["+n+"] Meets In-View Percentage Requirements"),y){T("... and page has focus");var i=a(n);i||(T("... interval does not exist"),r(n))}else T("... but page does not have focus.  Not creating interval.");else{T("Element ["+n+"] Does NOT Meet In-View Percentage Requirements");var i=a(n);i&&(T("Found Interval for Element ["+n+"]... Destroying Interval."),s(n))}}function a(e){return null!=m[e].timer&&m[e].timer}function r(e){if(m.hasOwnProperty(e)){var t=m[e];t.inViewRefreshCounter=m[e].inViewRefreshCounter||0,T("Creating Interval for: ",e),t.timer=window.setInterval(function(){if(t.inViewRefreshCount>0){t.el=t.el||document.getElementById(e);var n=t.el.id;t.inViewRefreshCount--,t.inViewRefreshCounter++,window.AdFuel.removeSlotLevelTarget(n,"rfv"),window.AdFuel.addSlotLevelTarget(n,"rfv",m[n].inViewRefreshCounter),S.addMetric({type:"viewability",id:n,data:{refresh_count:t.inViewRefreshCounter,last_refresh:Date.now()}}),t.inViewRefreshCount>=0&&C.indexOf(n)<0?(T("Slot ["+n+"] is in view and is being refreshed."),window.AdFuel.refresh([n]),T("Slot ["+t.el.id+"] is in view, was just refreshed, and still has "+t.inViewRefreshCount+" refreshes remaining.")):C.indexOf(n)>=0&&T("Slot ["+t.el.id+"] is in view but is being excluded from refresh based on creative id values.")}else T("Slot ["+e+"] is in view but has no refreshes remaining.",t,t.inViewRefreshCount)},v),console.log("Done.")}}function s(e){if(e){T("Destroying interval for: ",e);var t=m[e];window.clearInterval(t.timer),t.timer=null,t.inView=!1}else{T("Destroying All Intervals");for(var n in m)if(m.hasOwnProperty(n)){T("Destroying interval for: ",n);var t=m[n];window.clearInterval(t.timer),t.timer=null,t.inView=!1}}}function l(e){T("Checking Element: ",{event:e});var t=e.slot.getSlotElementId(),n=document.getElementById(t);T("Creating In View Refresh Object: ",{divId:t,el:n});var i=!!e.slot&&(!!e.slot.l&&e.slot.l._empty_);if(T("Is Slot Empty: ",i),i)T("Slot is empty.");else if(T("Slot Rendered: "+t),T("Registered Slots: ",b),b.indexOf(t)>=0){T("Slot is registered with InView Refresh"),m[t].inView=!1,m[t].el=n,m[t].refreshCount=0,m[t].listenersSet=!0;parseInt(m[t].inViewRefreshCount)}else T("Slot is NOT registered with InView Refresh")}function d(e,t,n,i,o,a,r,s,l){var d=Math.max(n,r),c=Math.min(i,s),u=Math.max(e,o),p=Math.min(t,a),f=0,h=d>=n&&d<=i,m=c>=n&&c<=i,g=u>=e&&u<=t,y=p>=e&&p<=t;h&&m&&g&&y&&(f=(c-d)*(p-u));var v=(a-o)*(s-r),w=0;return v>0&&(w=f/v),
T("["+l.id+"] - Ratio Area: ",w),w}function c(e){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,o=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t=parseInt(t),n=parseInt(n),i=parseInt(i),o=parseInt(o);var a=parseInt(e.clientWidth),r=parseInt(e.clientHeight),s=e.getBoundingClientRect(),l=s.left+document.body.scrollLeft,c=s.top+document.body.scrollTop,u=l+a,p=c+r,f=i+t,h=o+n,m=d(i,f,o,h,l,u,c,p,e);return T("["+e.id+"] - Viewable Percent: ",m),100*m}function u(){T("Detecting In View Slots."),m.length<1&&T("No registered slots have been rendered yet.");for(var e in m){T("Testing: ",e);var t=m[e],n=t.el||document.getElementById(e),i=!1;n&&(i=n&&y&&c(n)>=w&&parseInt(m[e].inViewRefreshCount)>0);var o=a(elementId);T("Test Result: ",{viewtest:i,interval:o,test:viewtest&&!o}),i&&!o&&r(e)}}function p(e,n){for(var i=!1,o=1;o<e.length;o++){var a=e[o];a.hasInViewRefresh=e[0].hasInViewRefresh?e[0].hasInViewRefresh:a.hasInViewRefresh||"false","true"==a.hasInViewRefresh&&(a.inViewRefreshCounter=0,i=!0,b.push(a.rktr_slot_id),S.addMetric({type:"viewability",id:a.rktr_slot_id,data:{is_in_view:!1,was_in_view:!1,moused_over:"0",refresh_count:"0",max_refresh:JSON.parse(JSON.stringify(a.inViewRefreshCount))}}))}return S.addMetric({type:"modules",id:"In View Refresh",data:{registeredSlots:b}}),i&&t(),n&&n(),null}function f(e,t){for(var n=0;n<e.length;n++){var i=e[n];"true"==i.hasInViewRefresh?(T("Slot is configured for in view refresh.  Creating _refreshableInViewSlots["+i.rktr_slot_id+"]..."),m[i.rktr_slot_id]=i):T("Slot is not configured for in view refresh. ["+i.rktr_slot_id+"]")}if(m.length>0){S.addMetric({type:"viewability",id:"General",data:{viewability:"active",render_listener:"Active",window_listener:"Active",mutation_observer:"Inactive",registeredSlots:Object.getOwnPropertyNames(m).length,criteria:100*a+"% in view for "+o/1e3+" seconds"}});var o=35e3,a=.5}S.addMetric({type:"modules",id:"In View Refresh",data:{registeredSlots:Object.getOwnPropertyNames(m)}}),t()}function h(){S=window.AdFuel.registerModule("In View Refresh",{preQueueCallback:p,preDispatchCallback:f})}var m={},g=!1,y=!document.hidden,v=35e3,w=50,b=[],_={},C=[],x=Object.prototype,A=x.toString,E=function(){return!1},S={metrics:{},addMetric:E,getMetricById:E,getMetricsByType:E,getMetricTypes:E},T=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===A.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(T=function(){var e=["[AdFuelModule - In View Refresh]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},function(){var e=["[AdFuelModule - In View Refresh ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)}),function(){T("FOCUSED: ",y),window.AdFuel?h():e(window,"AdFuelCreated",h),setInterval(function(){window.AdFuel.updateCorrelator&&window.AdFuel.updateCorrelator()},3e4)}()}(),!0===CNN.Features.enableIndexExchange&&function(){"use strict";function e(e){var t=!1,n="";if(localStorage&&(t=!0),"undefined"===typeof value){t&&(n=localStorage.getItem(e)),t&&null!==n||(n=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return""}return""}(e));try{n=JSON.parse(n)}catch(e){}return n}}function t(e){if(!a){a=!0;var t=document,n=t.createElement("script"),i=t.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.src=e,i.parentNode.insertBefore(n,i)}}function n(e){function t(){"US"!==r&&"CA"!==r&&""!==r?window.AdFuel.addPageLevelTarget("iom_geo","EU"):e?window.AdFuel.addPageLevelTarget("iom_geo","EU"):window.AdFuel.addPageLevelTarget("iom_geo","US")}window.googletag.cmd.push(t)}function i(){var e=!1;window.location.hostname.search(/^(edition|cnnespanol|arabic|cnne\-test)/)>=0&&(e=!0),n(e),window.AdFuel.registerModule(o,{})}var o="Index Exchange Wrapper",a=!1,r=(e("CG")?e("CG").substr(0,2):"")||(e("countryCode")?e("countryCode").substr(0,2):""),s=function(){},l={"^(.*\\.)?(www\\.)?cnn\\.com":{intl:"186370-96070407099023",dom:"186948-60896576130421"},"^(.*\\.)?edition\\.cnn\\.com":"186370-129055748395673","^(.*\\.)?us\\.cnn\\.com":"186370-96070407099023","^(.*\\.)?money\\.cnn\\.com":{intl:"186370-144448918822171",dom:"186948-10319041752160"},"^(.*\\.)?(cnne-test|cnnespanol)\\.cnn\\.com":"186370-263196174718504","^(.*\\.)?arabic\\.cnn\\.com":"186370-164240128263733","^(.*\\.)?pga\\.com":"186948-65293251488212","^(.*\\.)?rydercup\\.com":"186948-65293251488212","^(.*\\.)?pga-events\\.com":"186948-65293251488212","^(.*\\.)?teamcoco\\.com":"186948-58699267721861","^(.*\\.)?eleague\\.com":"186948-12519779424234","^(.*\\.)?nba.com":"186948-120271757110262","^(.*\\.)?ncaa.com":"186948-8121571303204","^(.*\\.)?adultswim.com":"186948-113674687777483"},d=window.console&&window.console.log?function(){var e=["[AdFuelModule - "+o+" v1.1.4]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}:s;!function(){var n=null;Object.keys(l).forEach(function(t){var i=new RegExp(t),o=e("countryCode"),a=e("selectedEdition"),r=new RegExp("/^(.*)?(edition|www|www-m|us|us-m|edition-m).cnn.com$/"),s=new RegExp("/^(.*)?money.cnn.com$/");0===window.location.hostname.search(i)&&(n="string"===typeof l[t]?"//js-sec.indexww.com/ht/p/"+l[t]+".js":window.location.hostname.search(r)&&"US"!==o&&"CA"!==o&&""!==o?"//js-sec.indexww.com/ht/p/"+l[t].intl+".js":window.location.hostname.search(s)&&"edition"===a?"//js-sec.indexww.com/ht/p/"+l[t].intl+".js":"//js-sec.indexww.com/ht/p/"+l[t].dom+".js")}),null!==n?t(n):d("Country ["+(r||"undefined")+"] and/or Hostname ["+window.location.hostname+"] is invalid."),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(i):window.AdFuel?i():document.addEventListener?document.addEventListener("AdFuelCreated",i,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",i)}()}(),!0===CNN.Features.enableIntegralAdScience&&function(){function e(e){d("IAS Data Handler..."),d({adSlots:e}),window.__iasPET.setTargetingForGPT()}function t(t,n){d("Building slots for IAS..."),window.__iasPET.pubId="925660",d("Asset: ",t,"Slots: ",t.length-1);for(var i=[],o=1;o<t.length;o++)d("Checking Slot: ",t[o]),t[o].rktr_ad_id.search(/^cnni\/(video|homepage|(.+\/(landing|main|video)))/)<0?(d("Pushing Slot: ",{adSlotId:t[o].rktr_slot_id,size:t[o].sizes,adUnitPath:"/8663477/"+t[o].rktr_ad_id}),i.push({adSlotId:t[o].rktr_slot_id,size:t[o].sizes,adUnitPath:"/8663477/"+t[o].rktr_ad_id})):d("Invalid Slot: ",t[o].rktr_ad_id);d("Built Ad Slots: ",i),window.__iasPET.queue.push({adSlots:i,dataHandler:e}),setTimeout(function(){n()},900)}function n(e,t){setTimeout(function(){d("Adding IAS Targeting to slots...");try{window.__iasPET.setTargetingForGPT()}catch(e){c("Could not set IAS targeting: ",e)}t()},900)}function i(){u&&(d("Registering "+l+" module with AdFuel"),window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1e3,dispatchCallbackTimeoutInMilliseconds:1e3}),window.AdFuel.registerModule(l,{preQueueCallback:t,preDispatchCallback:n}))}function o(){if(-1!==document.location.hostname.search(/^edition.*\.cnn\.com$/)||"localhost"===document.location.hostname){d("Adding IAS script to head...");var e=document.createElement("script");e.async=!0,e.src="//cdn.adsafeprotected.com/iasPET.1.js";var t=document.getElementsByTagName("head")[0];t.insertBefore(e,t.firstChild),u=!0}}var a=Object.prototype,r=a.toString,s=function(){},l="Integral Ad Science",d=s,c=s;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===r.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(d=function(){var e=["[AdFuelModule - "+l+"]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},c=function(){var e=["[AdFuelModule - "+l+"]"];e.push.apply(e,arguments),window.console.warn.apply(window.console,e)});var u=!1;window.__iasPET=window.__iasPET||{},window.__iasPET.queue=window.__iasPET.queue||[],d("Initializing "+l+" Module..."),function(){o(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(i):window.AdFuel?i():document.addEventListener?document.addEventListener("AdFuelCreated",i,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",i)}()}(),!0===CNN.Features.enableKrux&&function(){function e(){if(document.location.search){var e,t=document.location.search.search(i)+1;try{e=decodeURIComponent(document.location.search).search(i)+1}catch(n){e=t}return t||e}return!1}function t(){if(document.location.hash){var e,t=document.location.hash.search(i)+1;try{e=decodeURIComponent(document.location.hash).search(i)+1}catch(n){e=t}return t||e}return!1}function n(){if(document.referrer){var e,t=document.referrer.search(i)+1;try{e=decodeURIComponent(document.location.referrer).search(i)+1}catch(n){e=t}return t||e}return!1}var i=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})/i;window.Krux||((window.Krux=function(){window.Krux.q.push(arguments)}).q=[]),function(){function e(e){var t="kx"+e,n=function(){try{return window.localStorage}catch(e){return null}}();if(n)return n[t]||"";if(navigator.cookieEnabled){var i=document.cookie.match(t+"=([^;]*)");return i&&unescape(i[1])||""}return""}window.Krux.user=e("user"),window.Krux.segments=e("segs")?e("segs").split(","):[]}(),window.krux_getDESegments=function(){var e="&kxid=";return window.Krux.user&&(e+=window.Krux.user),e+="&kxseg="+window.kvs.join(",")},window.krux_getFWSegments=function(){return"kxseg="+window.Krux.segments.join(",kxseg=")},window.krux_getUser=function(){return window.Krux.user},window.krux_getFWKeyValues=function(e,t){for(var n=e||"_fwu:386123:",i=t||35,o={},a=0;a<window.Krux.segments.length;a++)a<i&&(o[n+window.Krux.segments[a]]=1);return o},window.Krux.setControlTag=function(i){function o(){function e(){var e=window.Krux.user,t=window.Krux.segments.filter(function(e,t){return t<35});s("setting krux targeting",{kuid:e,ksg:t}),n=window.AdFuel.registerModule("Krux",{})||n,window.AdFuel.addPageLevelTarget("kuid",e),window.AdFuel.addPageLevelTarget("ksg",t),n.addMetric({type:"modules",id:"Krux",data:{targeting:{kuid:e,ksg:t}}})}var t=function(){return!1},n={addMetric:t,getMetricById:t,getMetricsByType:t,getMetricTypes:t};window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}var a=Object.prototype,r=a.toString,s=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===r.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(s=function(){var e=["[AdFuelModule - Krux 1.2.2]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)});var l=document,d=l.createElement("script"),c=l.getElementsByTagName("script")[0],u=/^(complete|loaded)$/,p=!1;d.type="text/javascript",d.async=!0;var f,h=(f=l.location.href.match(/\bkxsrc=([^&]+)/))&&decodeURIComponent(f[1]);d.src=/^https?:\/\/([^\/]+\.)?krxd\.net(:\d{1,5})?\//i.test(h)?h:"disable"===h?"":("https:"===l.location.protocol?"https:":"http:")+"//cdn.krxd.net/controltag?confid="+i,d.onload=d.onreadystatechange=function(){p||"readyState"in d&&u.test(d.readyState)||(d.onload=d.onreadystatechange=null,p=!0,o())},t()||e()||n()||c.parentNode.insertBefore(d,c)};var o=window.location.hostname.toLowerCase().match(/^edition\.cnn\.com/)?"ITb_9Zup":"ITb_4eqO";window.Krux.setControlTag(o)}(),!0===CNN.Features.enablePiiAdFilter&&function(){function e(){if(document.location.search){var e,t=document.location.search.search(a)+1;try{e=decodeURIComponent(document.location.search).search(a)+1}catch(n){e=t}return t||e}return!1}function t(){if(document.location.hash){var e,t=document.location.hash.search(a)+1;try{e=decodeURIComponent(document.location.hash).search(a)+1}catch(n){e=t}return t||e}return!1}function n(){if(document.referrer){var e,t=document.referrer.search(a)+1;try{e=decodeURIComponent(document.location.referrer).search(a)+1}catch(n){e=t}return t||e}return!1}function i(){if(e()||t()||n()){console.log("[AdFuelModule - "+o+"] Filtering DFP Request due to PII in query string.");for(var i=Object.getOwnPropertyNames(window.AdFuel),a=0;a<i.length;a++)window.AdFuel[i[a]]=function(){};window.googletag=null}}var o="PII Filter",a=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})/i;!function(){window.AdFuel?i():document.addEventListener?document.addEventListener("AdFuelCreated",i,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",i)}()}(),!0===CNN.Features.enableProximic&&function(){function e(e){u="",window.proximicData=[],window.AdFuel.removePageLevelTarget("pconid");var n=e||document.location.href;window.location.hostname.toLowerCase().match(/^train\.next\.cnn\.com/)&&n.replace("train.next.","www"),c="//segment-data-us-east.zqtk.net/turner-47fcf6?url="+encodeURIComponent(n),document.getElementById("proximic-script"),h=!1,t(),r=0,o()}function t(){if(!h){var e=document.createElement("script");e.id="proximic-script",e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https:":"http:")+c;document.getElementsByTagName("script")[0].parentNode.appendChild(e),m("Added Proximic script to head of page.",c),h=!0}}function n(e,t){""!==e&&"undefined"!==typeof e&&(m("Setting data for DFP",e),window.AdFuel.addPageLevelTarget("pconid",e),window.AdFuel.removePageLevelTarget("prx_to","1"),window.AdFuel.addPageLevelTarget("prx_to","0"),t&&t())}function i(e,n){var i,a,r=!0,s=!1;try{for(document.location.hostname.indexOf("money")>=0&&(!window.CNNMONEY||!window.CNNMONEY.adTargets||!window.CNNMONEY.adTargets.c_type||["article","video","gallery"].indexOf(window.CNNMONEY.adTargets.c_type)<0)&&(r=!1),a=1;a<e.length;a++){if(i=e[a].rktr_ad_id.toLowerCase(),s=document.location.hostname.indexOf("explorepartsunknown.com")>=0&&i.search(/(leaf)/)>0,m("Is this page for ExplorePartsUnknown: ",s),m("Should Proximic Be Included: ",i.search(/^cnn\/(homepage|(.+\/landing))/)<0&&i.search(/^cnni\/(homepage|(.+\/(landing|main)))/)<0&&r||s),i.search(/^cnn\/(homepage|(.+\/landing))/)<0&&i.search(/^cnni\/(homepage|(.+\/(landing|main)))/)<0&&r||s){m("Adding Proximic based on ad unit specifications: ",i),t(),o(n);break}m("Filtering Proximic based on ad unit specifications: ",i)}}catch(e){m("Error parsing Proximic data: ",e.message||"Unknown")}}function o(e){m("Waiting for data..."),setTimeout(function(){r++,m("SegmentData: ",u),""!==window.proximicData&&"undefined"!==typeof window.proximicData?(m("Proximic Data found!"),n(window.proximicData,e)):r*s<l?o(e):(m("Proximic Timeout Occurred!"),window.AdFuel.addPageLevelTarget("prx_to","1"),e&&e())},s)}function a(){window.AdFuel.registerModule("Proximic",{postQueueCallback:i}),window.AdFuel.addPageLevelTarget("prx_to","1"),document.location.hostname.indexOf("explorepartsunknown.com")>=0&&"/watch"===document.location.pathname&&(m("On https://explorepartsunknown.com/watch..."),t())}var r=0,s=50,l=2e3,d=document.location.href;window.location.hostname.toLowerCase().match(/^train\.next\.cnn\.com/)&&d.replace("train.next.","www");var c="//segment-data-us-east.zqtk.net/turner-47fcf6?url="+encodeURIComponent(d),u="",p=Object.prototype,f=p.toString,h=!1,m=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===f.call(e)}(window.console.log)&&"true"===function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(m=function(){var e=["[AdFuelModule - Proximic/comScore]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.gotSegmentData=function(e){e.data?(m("Segment Data: ",e.data),u=e.data,window.proximicData=e.data):e.errors&&(m("Proximic returned with errors: ",e.errors),window.proximicData=e.errors,u=e.errors)},window.recallProximic=e,function(){window.AdFuel?a():document.addEventListener?document.addEventListener("AdFuelCreated",a,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",a)}()}()),function(){if(!window.Aspen){var VERSION="1.8.0",debug=-1!==[window.location.search,window.location.hash].join().search(/\bdmtdebug\b/),Class=function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,n=function(){};return n.extend=function(n){function i(){!e&&this.init&&this.init.apply(this,arguments)}var o=this.prototype;e=!0;var a=new this;e=!1;for(var r in n)a[r]="function"==typeof n[r]&&"function"==typeof o[r]&&t.test(n[r])?function(e,t){return function(){var n=this._super;this._super=o[e];var i=t.apply(this,arguments);return this._super=n,i}}(r,n[r]):n[r];return i.prototype=a,i.constructor=i,i.extend=arguments.callee,i},n}();!function(e,t,n){function i(){var e=p;return e.loader={load:o,i:0},e}function o(e,t,n){var i="c"==t?S:E;return v=0,t=t||"j",k(e)?a(i,e,t,this.i++,f,n):(y.splice(this.i++,0,e),1==y.length&&r()),this}function a(e,n,i,o,a,s){function l(){!f&&c(u.readyState)&&(g.r=f=1,!v&&d(),u.onload=u.onreadystatechange=null,h(function(){_.removeChild(u)},0))}var u=t.createElement(e),f=0,g={t:i,s:n,e:s};u.src=u.data=n,!b&&(u.style.display="none"),u.width=u.height="0","object"!=e&&(u.type=i),u.onload=u.onreadystatechange=l,"img"==e?u.onerror=l:"script"==e&&(u.onerror=function(){g.e=g.r=1,r()}),y.splice(o,0,g),_.insertBefore(u,b?null:m),h(function(){f||(_.removeChild(u),g.r=g.e=f=1,d())},p.errorTimeout)}function r(){var e=y.shift();v=1,e?e.t?h(function(){"c"==e.t?s(e):l(e)},0):(e(),d()):v=0}function s(e){var n,i=t.createElement("link");if(i.href=e.s,i.rel="stylesheet",i.type="text/css",e.e||!x&&!w)i.onload=function(){n||(n=1,h(function(){d()},0))},e.e&&i.onload();else{var o=function(e){h(function(){if(!n)try{e.sheet.cssRules.length?(n=1,d()):o(e)}catch(t){1e3==t.code||"security"==t.message||"denied"==t.message?(n=1,h(function(){d()},0)):o(e)}},0)};o(i)}h(function(){n||(n=1,d())},p.errorTimeout),!e.e&&m.parentNode.insertBefore(i,m)}function l(e){var n,i=t.createElement("script");i.src=e.s,i.onreadystatechange=i.onload=function(){!n&&c(i.readyState)&&(n=1,d(),i.onload=i.onreadystatechange=null)},h(function(){n||(n=1,d())},p.errorTimeout),e.e?i.onload():m.parentNode.insertBefore(i,m)}function d(){for(var e=1,t=-1;y.length-++t&&(!y[t].s||(e=y[t].r)););e&&r()}function c(e){return!e||"loaded"==e||"complete"==e}var u,p,f=t.documentElement,h=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,y=[],v=0,w="MozAppearance"in f.style,b=w&&!!t.createRange().compareNode,_=b?f:m.parentNode,C=e.opera&&"[object Opera]"==g.call(e.opera),x="webkitAppearance"in f.style,A=x&&"async"in t.createElement("script"),E=w?"object":C||A?"img":"script",S=x?"img":E,T=Array.isArray||function(e){return"[object Array]"==g.call(e)},N=function(e){return Object(e)===e},k=function(e){return"string"==typeof e},I=function(e){return"[object Function]"==g.call(e)},F=[],R={};p=function(e){function t(e,t){function n(e){if(k(e))o(e,l,t,0,a);else if(N(e))for(i in e)e.hasOwnProperty(i)&&o(e[i],l,t,i,a)}var i,a=!!e.test,r=a?e.yep:e.nope,s=e.load||e.both,l=e.callback;n(r),n(s),e.complete&&t.load(e.complete)}function o(e,t,o,r,s){var l=a(e),d=l.autoCallback;if(!l.bypass){if(t&&(t=I(t)?t:t[e]||t[r]||t[e.split("/").pop().split("?")[0]]),l.instead)return l.instead(e,t,o,r,s);o.load(l.url,l.forceCSS||!l.forceJS&&/css$/.test(l.url)?"c":n,l.noexec),(I(t)||I(d))&&o.load(function(){i(),t&&t(l.origUrl,s,r),d&&d(l.origUrl,s,r)})}}function a(e){var t,n,i=e.split("!"),o=F.length,a=i.pop(),r=i.length,s={url:a,origUrl:a,prefixes:i};for(n=0;n<r;n++)(t=R[i[n]])&&(s=t(s));for(n=0;n<o;n++)s=F[n](s);return s}var r,s,l=this.yepnope.loader;if(k(e))o(e,0,l,0);else if(T(e))for(r=0;r<e.length;r++)s=e[r],k(s)?o(s,0,l,0):T(s)?p(s):N(s)&&t(s,l);else N(e)&&t(e,l)},p.addPrefix=function(e,t){R[e]=t},p.addFilter=function(e){F.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=i()}(this,this.document);var Ajax={requestMap:{},jsonpRegistry:{},_counter:0,request:function(e){e=Utils.extend({timeout:5e3,maxRetries:0},e||{}),e.tries=0,this._sendRequest(e)},_sendRequest:function(e){var t=this,n=this._createCallback(e),i=this._createScript(n);if(!i)return Utils.log("JSONP - unable to create script for request ",e.url),!1;i.src=e.url,e.timeout&&setTimeout(function(){t._onError(n,e)},e.timeout)},_onSuccess:function(id,obj,data){this.requestMap[id]&&(this._destroyRequest(id,obj),Utils.isString(data)&&(data=eval("("+data+")")),obj.success&&obj.success(data))},_onError:function(e,t){if(this.requestMap[e]){if(this._destroyRequest(e,t),t.tries++,t.maxRetries&&t.tries<t.maxRetries)return Utils.log("Request failed - resending"),void this._sendRequest(t);t.error&&t.error(t.url)}},_destroyRequest:function(e,t){if(t.jsonpCallback){if(!this._removeNameFromRegistry(t.jsonpCallback))try{delete window[t.jsonpCallback]}catch(e){window[t.jsonpCallback]=void 0}}delete this.requestMap[e];var n=document.getElementById(this._getScriptName(e));n&&(n.parentNode.removeChild(n),n=null)},_createScript:function(e){var t=document.getElementsByTagName("head")[0];if(!t)return!1;var n=document.createElement("script");return n.type="text/javascript",e&&(n.id=this._getScriptName(e)),t.appendChild(n),n},_getScriptName:function(e){return"aspen_jsonp_"+e},_createCallback:function(e){var t=this;if(Utils.empty(e.jsonpCallback))return null;this._counter++;var n="request_"+this._counter;this.requestMap[n]=function(i){t._onSuccess(n,e,i)};this._addNameToRegistry(e.jsonpCallback);return window[e.jsonpCallback]=function(e){t.requestMap[n](e)},n},_addNameToRegistry:function(e){var t=this.jsonpRegistry;return t[e]?t[e]+=1:t[e]=1,t[e]},_removeNameFromRegistry:function(e){var t=this.jsonpRegistry;return t[e]&&(t[e]-=1,0===t[e]&&delete t[e]),t[e]}},BatchService=Class.extend({init:function(e){this._enabled=!1,this._queue=[],this._config=e,this._timer,this._firstPostTimer},start:function(e){if(this._config=e,this._enabled=!0,_analyticsConfig.batchMode==BATCH_MODE_TIMER){Utils.log("[aspen]","start timer");var t=this;this._timer=setTimeout(function(){t._postTimerEvent()},1e3*Number(_analyticsConfig.batchModeAmount));var n=Math.ceil(Math.random()*Number(_analyticsConfig.batchModeAmount));n==Number(_analyticsConfig.batchModeAmount)&&--n<=0&&(n=.5),Utils.log("[aspen]","random time: "+n),this._firstPostTimer=setTimeout(function(){t._firstPostTimerEvent()},1e3*n)}},add:function(e){if(this._addToQueue(e),!this._enabled)return void Utils.log("[aspen]","Batch service not enabled. Queuing message.");_analyticsConfig.enabled&&!this._config.batchThrottled?(_analyticsConfig.batchMode==BATCH_MODE_TOTAL?this._queue.length==_analyticsConfig.batchModeAmount&&this.post():_analyticsConfig.batchMode==BATCH_MODE_NONE?this.post():_analyticsConfig.batchMode!=BATCH_MODE_TIMER&&this.post(),this._queue.length>0&&("error"==e.eventType&&"undefined"!=typeof _analyticsConfig.highPriorityErrors?this.flushByError(e.eventData):"error"!=e.eventType&&"undefined"!=typeof _analyticsConfig.highPriorityEvents&&this.flushByEvent(e.eventType))):(_analyticsConfig.enabled&&Utils.log("[aspen]","Aspen is diabled via analyticsConfig. Message not added."),this._config.batchThrottled&&Utils.log("[aspen]","Batching is throttled. Message not added."))},_addToQueue:function(e){Utils.log("[aspen]","Adding message to batch queue."),this._queue.push(e)},post:function(){if(this._config.postThrottled)Utils.log("[aspen]","Batch posting is throttled. Batch not posted.");else{var e={sessionId:this._config.sessionId,events:this._queue};if(Utils.log("[aspen]","send batch string"),"gzip"==_analyticsConfig.batchContentEncoding){var t="?aspenJson="+JSON.stringify(e);e=encodeURIComponent(t).replace(/%20/g,"+")}TransportManager.createRequest(_analyticsConfig.batchApi,e,this._postSuccess,this._postFailure,this),this._queue=[]}},_postTimerEvent:function(){Utils.log("[aspen]","postTimer - queue.length: "+this._queue.length),this._queue.length>0?(Utils.log("[aspen]","posting "+this._queue.length+" messages"),this.post()):Utils.log("[aspen]","no messages to post");var e=this;this._timer=setTimeout(function(){e._postTimerEvent()},1e3*Number(_analyticsConfig.batchModeAmount))},_firstPostTimerEvent:function(){Utils.log("[aspen]","firstPostTimer - queue.length: "+this._queue.length),this._queue.length>0?(Utils.log("[aspen]","posting "+this._queue.length+" messages"),this.post()):Utils.log("[aspen]","no messages to post")},_postSuccess:function(e){Utils.log("[aspen]","post success: "+e)},_postFailure:function(e){Utils.log("[aspen]","post failed: "+e)},flushByError:function(e){if("undefined"!=typeof e.errorCode){var t=e.errorCode,n=t.substring(0,2),i=t.substring(2,4),o=t.substring(4,6),a=t.substring(6),r=[];r=_analyticsConfig.highPriorityErrors.split(",");for(var s="",l="",d="",c="",u=[],p=[],f=[],h=[],m=0,g=r.length;m<g;++m)switch(m){case 0:s=String(r[m]),u=s.split("+");break;case 1:l=String(r[m]),p=l.split("+");break;case 2:d=String(r[m]),f=d.split("+");break;case 3:c=String(r[m]),h=c.split("+")}for(m=0,g=u.length;m<g;++m){var y=String(u[m]);if(n==y||"*"==y)for(var v=0,w=p.length;v<w;++v){var b=String(p[v]);if(i==b||"*"==b)for(var _=0,C=f.length;_<C;++_){var x=String(f[_]);if(o==x||"*"==x)for(var A=0,E=h.length;A<E;++A){var S=String(h[A]);a!=S&&"*"!=S||(Utils.log("[aspen","[flushByError] found match, flushing batch"),this.post())}}}}}},flushByEvent:function(e){for(var t=_analyticsConfig.highPriorityEvents.split(","),n=0,i=t.length;n<i;++n){String(t[n])==e&&(Utils.log("[aspen]","[flushBatchByEvent] found match, flushing batch"),this.post())}},setSessionId:function(e){this._config.sessionId=e},setBatchThrottled:function(e){this._config.batchThrottled=e},setPostThrottled:function(e){this._config.postThrottled=e},disableTimer:function(){_analyticsConfig.batchMode==BATCH_MODE_TIMER&&clearTimeout(this._timer)}}),LoadState={WAITING:"loadStateWaiting",LOADING:"loadStateLoading",READY:"loadStateReady",FAILED:"loadStateFailed"},Aspen=window.Aspen={init:function(e,t){var n=this;if(Utils.undef(this.initialized))if(this.initialized=!0,this.ready=!1,this.batchService,this._isThrottled=!0,this.sessionId=-1,this._messageExcludes=[],this.timeDifference=0,this._shortId="",this._retryTimer,this._retries=0,this._retryTime=0,this._savedSession={},this._timestampStr="",this.sessionToken="",this._appName="",this._transportFormats=[],this._transportFormat="",this._transportFormatIndex=0,this._messageQueue=[],this.config={},this._loadState=LoadState.WAITING,this._configUrl="",this._configLoaded=!1,this._appInitCallback=t,_params=this._options=e,this._appName=_params.appName=_params&&_params.appName,_params.appVersion=_params&&_params.appVersion,_params.site=_params&&_params.site,_params.context=_params&&_params.context,_params.configBaseUrl=_params&&_params.configBaseUrl,_params.platform=_params&&_params.platform,_params.platformVersion=_params&&_params.platformVersion,Utils.empty(_params.appName))Utils.log("[aspen]","Unable to start Aspen, no appName provided");else if(Utils.empty(_params.site))Utils.log("[aspen]","Unable to start Aspen, no site provided");else{var i={};i.batchThrottled=!0,i.postThrottled=!0,this.batchService=new BatchService(i),this._loadState=LoadState.LOADING;var o=new DependencyManager;o.add(new Dependency(Utils.bind(n._loadConfigFile,n))),o.add(new Dependency(Utils.bind(n._loadRequiredJS,n))),o.onComplete(Utils.bind(n._onDependenciesLoaded,n)),o.onFailure(Utils.bind(n._onDependenciesLoadFailure,n)),o.load()}},_loadConfigFile:function(e,t){var n=_params.configBaseUrl;Utils.isNull(n)&&(n=ANALYTICS_BASE_URL+_params.appName+"/"+_params.site+"/"),Utils.log("[aspen]","Using config base path: "+n),this._configUrl=n+ANALYTICS_FILE+"?_="+Utils.timeBucket(15),Ajax.request({jsonpCallback:"aspen_onAnalyticsConfigReceived",url:this._configUrl,success:Utils.bind(this._loadConfigSuccess,this,e),error:Utils.bind(this._loadConfigFailure,this,t)})},_loadConfigSuccess:function(e,t){Utils.log("[aspen]","Config loaded successfully"),_analyticsConfig=Utils.extend(Utils.extend({},t.default||{}),t[_params.context]||{}),this.config=_analyticsConfig,Utils.undef(_analyticsConfig.batchMode)&&(_analyticsConfig.batchMode="total"),Utils.undef(_analyticsConfig.batchModeAmount)&&(_analyticsConfig.batchModeAmount="10"),Utils.undef(_analyticsConfig.helloRetryCount)&&(_analyticsConfig.helloRetryCount="5"),Utils.undef(_analyticsConfig.helloRetryTime)&&(_analyticsConfig.helloRetryTime="10000"),Utils.undef(_analyticsConfig.batchContentEncoding)&&(_analyticsConfig.batchContentEncoding="json"),Utils.undef(_analyticsConfig.aspenUserIdEnabled)&&(_analyticsConfig.aspenUserIdEnabled=!0),Utils.undef(_analyticsConfig.aspenUserIdHash)&&(_analyticsConfig.aspenUserIdHash="392aspenUID392"),Utils.undef(_analyticsConfig.transportFormats)?this._transportFormats.push(TransportFormat.JSONP):this._transportFormats=_analyticsConfig.transportFormats.split(","),this._transportFormat=this._transportFormats[this._transportFormatIndex],Utils.undef(_analyticsConfig.messageExcludes)?this._messageExcludes=[]:this._messageExcludes=_analyticsConfig.messageExcludes.split(",");var n={};n.transportFormats=this._transportFormats,n.servicesUrl=_analyticsConfig.servicesUrl,TransportManager.init(n),Utils.log("[aspen]","batchMode: ",_analyticsConfig.batchMode),Utils.log("[aspen]","batchModeAmount: ",_analyticsConfig.batchModeAmount),Utils.log("[aspen]","helloRetryCount: ",_analyticsConfig.helloRetryCount),Utils.log("[aspen]","helloRetryTime: ",_analyticsConfig.helloRetryTime),Utils.log("[aspen]","transportFormat: ",this._transportFormat),e&&e()},_loadConfigFailure:function(e,t){Utils.log("[aspen]","Config failed to load",t),e&&e()},_loadRequiredJS:function(e,t){var n=this;null!=window.JSON?this._loadRequiredJSSuccess(e):yepnope({load:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/json2.ugly.js",complete:function(){if(!window.JSON)return void n._loadRequiredJSFailure(t);n._loadRequiredJSSuccess(e)}})},_loadRequiredJSSuccess:function(e){Utils.log("[aspen]","External JS dependencies loaded successfully"),e&&e()},_loadRequiredJSFailure:function(e){Utils.log("[aspen]","External JS dependencies failed to load"),e&&e()},_onDependenciesLoaded:function(){this._loadState=LoadState.READY,Utils.log("[aspen]","_onDependenciesLoaded - all required dependencies successfully loaded."),Utils.undef(_analyticsConfig.enabled)||"true"!==_analyticsConfig.enabled?(Utils.log("[aspen]","analytics disabled via config"),this._initFailure()):(Utils.log("[aspen]","analytics enabled via config"),Utils.undef(_analyticsConfig.servicesUrl)||this._hello())},_onDependenciesLoadFailure:function(){this._loadState=LoadState.FAILED,Utils.log("[aspen]","_onDependenciesLoadFailure - one or more required dependencies failed to load.")},_hello:function(){Utils.log("[aspen]","hello")
;var e=Utils.getQueryVar("sessionToken");Utils.log("[aspen]","check querySessionToken: ",e),Utils.empty(e)||(this.sessionToken=e,this.send("authSessionReload",{}));var t={propertyName:_params.site,applicationName:_params.appName,applicationVersion:_params.appVersion,deviceType:"Javascript",deviceModel:"Javascript",deviceVersion:"Javascript",library:"Javascript",libraryVersion:"1.8.0",platformName:Utils.empty(_params.platform)?"Javascript":_params.platform,platformVersion:Utils.empty(_params.platformVersion)?"1.8.0":_params.platformVersion,aspenConfigUrl:this._configUrl,protocol:"1.0",pageUrl:document.URL};t=Utils.extend(t,this._options),_analyticsConfig.aspenUserIdEnabled&&(t.aspenUUIDToken=_analyticsConfig.aspenUserIdHash),Utils.empty(this.sessionToken)||(t.sessionToken=this.sessionToken),TransportManager.bootstrapTM(),TransportManager.createRequest(_analyticsConfig.helloApi,t,this._helloSuccess,this._helloFailure,this),this._retryTimer=setTimeout(Utils.bind(this._helloRetry,this),Number(_analyticsConfig.helloRetryTime)),this._isRetrying=!0},_helloSuccess:function(e){Utils.log("[aspen]","_helloSuccess"),clearTimeout(this._retryTimer),this._isThrottled="undefined"!==typeof e.throttled&&"no"!==e.throttled||this._isThrottled,this.sessionId="undefined"!==typeof e.sessionId?e.sessionId:this.sessionId,this._shortId="undefined"!==typeof e.shortId?e.shortId:this._shortId,this._timestampStr="undefined"!==typeof e.timestamp?e.timestamp:this.timeDifference,this.timeDifference=Number(this._timestampStr)-Utils.now(),"no"===e.throttled&&(this._isThrottled=!1),Utils.log("[aspen]","_helloSuccess"),Utils.log("[aspen]","config.throttled: "+e.throttled),Utils.log("[aspen]","throttled: "+this._isThrottled),Utils.log("[aspen]","sessionId: "+this.sessionId);var t={};t.batchThrottled=!1,t.postThrottled=!0,t.sessionId="",this.batchService.start(t),this.batchService.setSessionId(this.sessionId),this.batchService.setPostThrottled(this._isThrottled),this._initSuccess()},_helloFailure:function(e){Utils.log("[aspen]","_helloFailure url: "+e),TransportManager.fallback()&&this._hello()},_helloRetry:function(){Utils.log("[aspen]","helloRetry"),this._retries==_analyticsConfig.helloRetryCount?(Utils.log("[aspen]","retries exhasted"),clearTimeout(this._retryTimer),this._retries=0,1==TransportManager.fallback()?this._hello():(Utils.log("[aspen]","retries exhasted, fallbacks exhausted, aspen is disabled"),this._isThrottled=!0,this.batchService.setBatchThrottled(!0),this.batchService.setPostThrottled(!0),this.batchService.disableTimer())):(this._retries++,this._retryTime=this._retries*Number(_analyticsConfig.helloRetryTime),this._savedSession.retries=String(this._retries),this._savedSession.retryTime=String(this._retryTime),this._hello())},isMessageExcluded:function(e){return!!(_analyticsConfig&&_analyticsConfig.messageExcludes&&_analyticsConfig.messageExcludes.indexOf(e)>=0)},send:function(e,t,n){if("undefined"===typeof this._messageExcludes||-1===this._messageExcludes.indexOf(e)){if("undefined"==typeof t&&(t={}),!this.ready)return Utils.log("[aspen]","send - Aspen's not ready, queuing message"),void("undefined"!==typeof this._messageQueue&&this._messageQueue.push({message:t,type:e,appName:n}));if(this._isThrottled)Utils.log("[aspen]","Add message to batch is throttled! Message not added.");else{if(this.isMessageExcluded(e))return void Utils.log("[aspen]","message excluded by config, not added to batch",e);t.timestamp=Utils.now()+this.timeDifference,t.applicationName="undefined"!==typeof n?n:this._appName,delete t.session_id,delete t.sessionId,delete t.hbase_timestamp,delete t.type,Utils.log("[aspen]","appName: "+t.applicationName);var i={};i.eventType=e,i.eventData=t,Utils.log("[aspen]","add to batch json message: "+JSON.stringify(i)),this.batchService.add(i)}}},setSessionToken:function(e){this.sessionToken=e},_initSuccess:function(){this.ready=!0;for(var e=0,t=this._messageQueue.length;e<t;e++)this.send(this._messageQueue[e].type,this._messageQueue[e].message);this.send("aspenConfigDetails",_analyticsConfig);var n={};n.screenWidth=screen.width,n.screenHeight=screen.height,n.browserName=navigator.appName,n.userAgent=navigator.userAgent,n.platform=navigator.platform,this.send("systemInfo",n),this._initSuccess=function(){},this._appInitCallback&&this._appInitCallback()},_initFailure:function(){},getVersion:function(){return"1.8.0"},getSessionId:function(e){return this.sessionId},getShortId:function(e){return this._shortId},isThrottled:function(e){return this._isThrottled},getThrottled:function(e){return this._isThrottled?"yes":"no"}},DependencyManager=function(){this._dependencies=[],this._loadedCount=0,this._successHandlers=[],this._failureHandlers=[],this.add=function(e){this._dependencies.push({dependency:e,success:!1});var t=this._dependencies.length-1;e.onComplete(Utils.bind(this._onDependencyLoaded,this,t,!0)),e.onFailure(Utils.bind(this._onDependencyLoaded,this,t,!1))},this.load=function(){for(var e=0,t=this._dependencies.length;e<t;e++)this._dependencies[e].dependency.load()},this.onComplete=function(e){this._successHandlers.push(e)},this.onFailure=function(e){this._failureHandlers.push(e)},this._onDependencyLoaded=function(e,t){++this._loadedCount,this._dependencies[e].success=t,this._loadedCount===this._dependencies.length&&this._onAllDependenciesLoaded()},this._onAllDependenciesLoaded=function(){this._loadedCount=0;for(var e=!0,t=0,n=this._dependencies.length;t<n;t++)if(!this._dependencies[t].success){e=!1;break}var i=e?this._successHandlers:this._failureHandlers;for(t=0,n=i.length;t<n;t++)i[t]()}},Dependency=function(e){this._func=e,this._successHandlers=[],this._failureHandlers=[],this.load=function(){this._func(Utils.bind(this._onSuccess,this),Utils.bind(this._onFailure,this))},this.onComplete=function(e){this._successHandlers.push(e)},this.onFailure=function(e){this._failureHandlers.push(e)},this._onSuccess=function(){for(var e=0,t=this._successHandlers.length;e<t;e++)this._successHandlers[e]()},this._onFailure=function(){for(var e=0,t=this._failureHandlers.length;e<t;e++)this._failureHandlers[e]()}},AspenComm=function(){var e,t,n,i,o,a,r="https://aspen.turner.com",s=!1,l=[];return t=function(i){Utils.log("[aspen]","[easyXDM]","init",i),r=i,e=new window.CVPAux.easyXDM.Rpc({swf:"https://z.cdn.turner.com/xslo/cvp/easyxdm/swf/easyxdm.swf",remote:r+"/static/xdm_iframe.html"},{remote:{request:{}}}),Utils.log("[aspen]","[easyXDM]","init AspenComm"),s=!0,t=function(){try{throw"already init'ed - ignored"}catch(e){}},n()},i=function(e,t,n){s?a(e,t,n):o(e,t,n)},o=function(){l.push(arguments)},n=function(){for(var e=0,t=l.length;e<t;++e)a.apply(null,l[e])},a=function(t,n,i){Utils.log("[aspen]","[easyXDM]","make request",t);var o,a,r;o=Utils.extend(Utils.extend({method:"POST"},t||{})),a=function(e){var t=e.data;if("string"===typeof t&&t.charAt(0).match(/[{[]/))try{t=JSON.parse(t)}catch(e){Utils.log(e)}Utils.log("[aspen]","[easyXDM]","request success",e),n(t,e.status,e.headers)},r=function(e){var t=e.data;if("string"===typeof t&&t.charAt(0).match(/[{[]/))try{t=JSON.parse(t)}catch(e){Utils.log(e)}i(t,e.status,e.message)},e.request(o,a,r)},{init:t,request:i}}(),bootstrap=function(e){Utils.log("[aspen]","[easyXDM]","bootstrap",e),window.CVPAux=window.CVPAux||{},yepnope({test:null!=window.CVPAux.easyXDM,nope:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/easyXDM.ugly.js",complete:function(){if(window.easyXDM)window.CVPAux.easyXDM=easyXDM.noConflict("CVPAux"),yepnope({test:null!=window.JSON,nope:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/json2.ugly.js",complete:function(){if(!window.JSON)try{throw"failed to install JSON polyfill"}catch(e){}e()}});else try{throw"failed to install easyXDM"}catch(e){}}})},ANALYTICS_BASE_URL="https://z.cdn.turner.com/xslo/aspen/config/",ANALYTICS_FILE="aspenanalytics.json",BATCH_MODE_TOTAL="total",BATCH_MODE_TIMER="timer",BATCH_MODE_NONE="none",_params={},_analyticsConfig={},TransportFormat={JSON:"json",JSONP:"jsonp"},TransportManager={init:function(e){this._config=e,this._transportFormat=this._config.transportFormats[0],this._bootstrapped=!1},bootstrapTM:function(){if(Utils.log("[aspen]","TransportManager","bootstrap","_bootstrapped:",this._bootstrapped),this._transportFormat===TransportFormat.JSON&&!this._bootstrapped){var e=this._config.servicesUrl;bootstrap(function(){AspenComm.init(e)}),this._bootstrapped=!0,Utils.log("[aspen]","TransportManager","bootstrap","transportFormat",this._transportFormat)}},createRequest:function(e,t,n,i,o){if(Utils.log("[aspen]","TransportManager","createRequest"),this._transportFormat===TransportFormat.JSON)AspenComm.request({url:e+"."+this._transportFormat,data:{aspenJson:JSON.stringify(t)}},Utils.bind(n,o),Utils.bind(i,o));else if(this._transportFormat===TransportFormat.JSONP){var a=this._config.servicesUrl+e+"."+this._transportFormat;a+="?aspen_callback=parseAspenInitialization&aspenJson="+encodeURIComponent(JSON.stringify(t)).replace(/%20/g,"+"),Ajax.request({jsonpCallback:"parseAspenInitialization",url:a,error:Utils.bind(i,o),success:Utils.bind(n,o)})}},fallback:function(){return Utils.log("[aspen]","current transport format failed",this._transportFormat),this._config.transportFormats.shift(),this._config.transportFormats.length>0&&(this._transportFormat=this._config.transportFormats[0],Utils.log("trying next transport format",this._transportFormat),!0)}},Utils={undef:function(e){return"undefined"===typeof e},isNull:function(e){return Utils.undef(e)||null===e},empty:function(e){return Utils.undef(e)||Utils.isNull(e)||""===e},isFunc:function(e){return"function"===typeof e},isObject:function(e){return"object"===typeof e},isString:function(e){return"string"===typeof e},extend:function(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e},log:function(){window.console&&window.console.log&&debug&&window.console.log(Utils.slice(arguments).join(" | ")),!Utils.undef(window.logJSAuth)&&Utils.isFunc(window.logJSAuth)&&debug&&window.logJSpAuth(Utils.slice(arguments).join(" | "))},now:"function"===typeof Date.now?Date.now:function(){return(new Date).getTime()},slice:function(e,t){return Array.prototype.slice.call(e,t||0)},bind:function(e,t){var n=Utils.slice(arguments,2);return function(){var i=n.concat(Utils.slice(arguments));return e.apply(t,i)}},setCookie:function(e,t,n){var i=new Date;i.setDate(i.getDate()+n);var o=escape(t)+(null==n?"":"; expires="+i.toUTCString());document.cookie=e+"="+o},getCookie:function(e){var t,n,i,o=document.cookie.split(";");for(t=0;t<o.length;t++)if(n=o[t].substr(0,o[t].indexOf("=")),i=o[t].substr(o[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return unescape(i)},getQueryVar:function(e){for(var t=window.location.search.substring(1),n=t.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");if(o[0]==e)return o[1]}},randomString:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var n="",i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n},timeBucket:function(e){var t=new Date,n=60*(24*t.getDate()+t.getHours())+t.getMinutes();return Math.round(n/e)}}}}.call(window),function(){!function(e){"use strict";function t(){return l&&l.call(s)||(new Date).getTime()}var n=[],i={},o={},a=function(){},r="-----";r+=r,r+=r,r+=r,r+=r;var s=window.performance,l=s&&(s.now||s.mozNow||s.msNow||s.oNow||s.webkitNow);e.log&&"function"===typeof e.log||(e.log=a),e.profile&&"function"===typeof e.profile||(e.profile=a),e.profileEnd&&"function"===typeof e.profileEnd||(e.profileEnd=a),e.timeStamp&&"function"===typeof e.timeStamp||(e.timeStamp=a),e.trace&&"function"===typeof e.trace||(e.trace=a),e.debug&&"function"===typeof e.debug||(e.debug=e.log),e.info&&"function"===typeof e.info||(e.info=e.log),e.warn&&"function"===typeof e.warn||(e.warn=e.log),e.error&&"function"===typeof e.error||(e.error=e.log),e.dir&&"function"===typeof e.dir||(e.dir=e.log),e.dirxml&&"function"===typeof e.dirxml||(e.dirxml=e.dir);!e.group&&(e.group=function(t){n.push(t),e.log(r+"\nBEGIN GROUP: "+t)}),!e.groupCollapsed&&(e.groupCollapsed=e.group),!e.groupEnd&&(e.groupEnd=function(){e.log("END GROUP: "+n.pop()+"\n"+r)}),!e.time&&(e.time=function(e){i[e]=t()}),!e.timeEnd&&(e.timeEnd=function(n){e.log(n+": "+(t()-i[n]).toFixed(3)+"ms"),delete i[n]}),!e.assert&&(e.assert=function(t,n){t||e.error("Assertion failed: "+n)}),!e.count&&(e.count=function(t){o[t]||(o[t]=0),o[t]++,e.log(t+": "+o[t])}),!e.clear&&(e.clear=function(){e.log("\n\n\n\n\n\n")})}(window.console=window.console||{}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!==typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),!window.addEventListener&&function(e,t,n,i,o,a,r){e[i]=t[i]=n[i]=function(e,t){var n=this;r.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,r[0][3])},e[o]=t[o]=n[o]=function(e,t){for(var n,i=0;n=r[i];++i)if(n[0]==this&&n[1]==e&&n[2]==t)return this.detachEvent("on"+e,r.splice(i,1)[0][3])},e[a]=t[a]=n[a]=function(e){return this.fireEvent("on"+e.type,e)}}(window.prototype,document.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null===this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return-1;var a=+t||0;if(Math.abs(a)===1/0&&(a=0),a>=o)return-1;for(n=Math.max(a>=0?a:o-Math.abs(a),0);o>n;){if(n in i&&i[n]===e)return n;n++}return-1}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}(),function(){"use strict";var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0],i="https:"===document.location.protocol;t.type="text/javascript",t.src=(i?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",n.parentNode.insertBefore(t,n)}(),function(){!function(){function e(){}function t(e){return e}function n(e){return!!e}function i(e){return!e}function o(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function a(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function r(e){return j(e)||"number"===typeof e.length&&e.length>=0&&e.length%1===0}function s(e,t){for(var n=-1,i=e.length;++n<i;)t(e[n],n,e)}function l(e,t){for(var n=-1,i=e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}function d(e){return l(Array(e),function(e,t){return t})}function c(e,t,n){return s(e,function(e,i,o){n=t(n,e,i,o)}),n}function u(e,t){s(P(e),function(n){t(e[n],n)})}function p(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function f(e){var t,n,i=-1;return r(e)?(t=e.length,function(){return i++,i<t?i:null}):(n=P(e),t=n.length,function(){return i++,i<t?n[i]:null})}function h(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),o=0;o<n;o++)i[o]=arguments[o+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i)}}}function m(e){return function(t,n,i){return e(t,i)}}function g(t){return function(n,i,r){r=a(r||e),n=n||[];var s=f(n);if(t<=0)return r(null);var l=!1,d=0,c=!1;!function e(){if(l&&d<=0)return r(null);for(;d<t&&!c;){var a=s();if(null===a)return l=!0,void(d<=0&&r(null));d+=1,i(n[a],a,o(function(t){d-=1,t?(r(t),c=!0):e()}))}}()}}function y(e){return function(t,n,i){return e(O.eachOf,t,n,i)}}function v(e){return function(t,n,i,o){return e(g(n),t,i,o)}}function w(e){return function(t,n,i){return e(O.eachOfSeries,t,n,i)}}function b(t,n,i,o){o=a(o||e),n=n||[];var s=r(n)?[]:{};t(n,function(e,t,n){i(e,function(e,i){s[t]=i,n(e)})},function(e){o(e,s)})}function _(e,t,n,i){var o=[];e(t,function(e,t,i){n(e,function(n){n&&o.push({index:t,value:e}),i()})},function(){i(l(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function C(e,t,n,i){_(e,t,function(e,t){n(e,function(e){t(!e)})},i)}function x(e,t,n){return function(i,o,a,r){function s(){r&&r(n(!1,void 0))}function l(e,i,o){if(!r)return o();a(e,function(i){r&&t(i)&&(r(n(!0,e)),r=a=!1),o()})}arguments.length>3?e(i,o,l,s):(r=a,a=o,e(i,l,s))}}function A(e,t){return t}function E(t,n,i){i=i||e;var o=r(n)?[]:{};t(n,function(e,t,n){e(h(function(e,i){i.length<=1&&(i=i[0]),o[t]=i,n(e)}))},function(e){i(e,o)})}function S(e,t,n,i){var o=[];e(t,function(e,t,i){n(e,function(e,t){o=o.concat(t||[]),i(e)})},function(e){i(e,o)})}function T(t,n,i){function a(t,n,i,o){if(null!=o&&"function"!==typeof o)throw new Error("task callback must be a function");if(t.started=!0,j(n)||(n=[n]),0===n.length&&t.idle())return O.setImmediate(function(){t.drain()});s(n,function(n){var a={data:n,callback:o||e};i?t.tasks.unshift(a):t.tasks.push(a),t.tasks.length===t.concurrency&&t.saturated()}),O.setImmediate(t.process)}function r(e,t){return function(){d-=1;var n=!1,i=arguments;s(t,function(e){s(c,function(t,i){t!==e||n||(c.splice(i,1),n=!0)}),e.callback.apply(e,i)}),e.tasks.length+d===0&&e.drain(),e.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var d=0,c=[],u={tasks:[],concurrency:n,payload:i,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(e,t){a(u,e,!1,t)},kill:function(){u.drain=e,u.tasks=[]},unshift:function(e,t){a(u,e,!0,t)},process:function(){for(;!u.paused&&d<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=l(e,function(e){return e.data});0===u.tasks.length&&u.empty(),d+=1,c.push(e[0]);var i=o(r(u,e));t(n,i)}},length:function(){return u.tasks.length},running:function(){return d},workersList:function(){return c},idle:function(){return u.tasks.length+d===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var e=Math.min(u.concurrency,u.tasks.length),t=1;t<=e;t++)O.setImmediate(u.process)}}};return u}function N(e){return h(function(t,n){t.apply(null,n.concat([h(function(t,n){"object"===typeof console&&(t?console.error&&console.error(t):console[e]&&s(n,function(t){console[e](t)}))})]))})}function k(e){return function(t,n,i){e(d(t),n,i)}}function I(e){return h(function(t,n){var i=h(function(n){var i=this,o=n.pop();return e(t,function(e,t,o){e.apply(i,n.concat([o]))},o)});return n.length?i.apply(this,n):i})}function F(e){return h(function(t){var n=t.pop();t.push(function(){var e=arguments;i?O.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var i=!0;e.apply(this,t),i=!1})}var R,O={},D="object"===typeof self&&self.self===self&&self||"object"===typeof global&&global.global===global&&global||this;null!=D&&(R=D.async),O.noConflict=function(){return D.async=R,O};var M=Object.prototype.toString,j=Array.isArray||function(e){return"[object Array]"===M.call(e)},B=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},P=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},q="function"===typeof setImmediate&&setImmediate,L=q?function(e){q(e)}:function(e){setTimeout(e,0)};"object"===typeof process&&"function"===typeof process.nextTick?O.nextTick=process.nextTick:O.nextTick=L,O.setImmediate=q?L:O.nextTick,O.forEach=O.each=function(e,t,n){return O.eachOf(e,m(t),n)},O.forEachSeries=O.eachSeries=function(e,t,n){return O.eachOfSeries(e,m(t),n)},O.forEachLimit=O.eachLimit=function(e,t,n,i){return g(t)(e,m(n),i)},O.forEachOf=O.eachOf=function(t,n,i){function r(e){d--,e?i(e):null===s&&d<=0&&i(null)}i=a(i||e),t=t||[];for(var s,l=f(t),d=0;null!=(s=l());)d+=1,n(t[s],s,o(r));0===d&&i(null)},O.forEachOfSeries=O.eachOfSeries=function(t,n,i){function r(){var e=!0;if(null===l)return i(null);n(t[l],l,o(function(t){if(t)i(t);else{if(null===(l=s()))return i(null);e?O.setImmediate(r):r()}})),e=!1}i=a(i||e),t=t||[];var s=f(t),l=s();r()},O.forEachOfLimit=O.eachOfLimit=function(e,t,n,i){g(t)(e,n,i)},O.map=y(b),O.mapSeries=w(b),O.mapLimit=v(b),O.inject=O.foldl=O.reduce=function(e,t,n,i){O.eachOfSeries(e,function(e,i,o){n(t,e,function(e,n){t=n,o(e)})},function(e){i(e,t)})},O.foldr=O.reduceRight=function(e,n,i,o){var a=l(e,t).reverse();O.reduce(a,n,i,o)},O.transform=function(e,t,n,i){3===arguments.length&&(i=n,n=t,t=j(e)?[]:{}),O.eachOf(e,function(e,i,o){n(t,e,i,o)},function(e){i(e,t)})},O.select=O.filter=y(_),O.selectLimit=O.filterLimit=v(_),O.selectSeries=O.filterSeries=w(_),O.reject=y(C),O.rejectLimit=v(C),O.rejectSeries=w(C),O.any=O.some=x(O.eachOf,n,t),O.someLimit=x(O.eachOfLimit,n,t),O.all=O.every=x(O.eachOf,i,i),O.everyLimit=x(O.eachOfLimit,i,i),O.detect=x(O.eachOf,t,A),O.detectSeries=x(O.eachOfSeries,t,A),O.detectLimit=x(O.eachOfLimit,t,A),O.sortBy=function(e,t,n){function i(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:n>i?1:0}O.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){if(e)return n(e);n(null,l(t.sort(i),function(e){return e.value}))})},O.auto=function(t,n,i){function o(e){v.unshift(e)}function r(e){var t=p(v,e);t>=0&&v.splice(t,1)}function l(){f--,s(v.slice(0),function(e){e()})}"function"===typeof arguments[1]&&(i=n,n=null),i=a(i||e);var d=P(t),f=d.length;if(!f)return i(null);n||(n=f);var m={},g=0,y=!1,v=[];o(function(){f||i(null,m)}),s(d,function(e){function a(){return g<n&&c(w,function(e,t){return e&&m.hasOwnProperty(t)},!0)&&!m.hasOwnProperty(e)}function s(){a()&&(g++,r(s),f[f.length-1](v,m))}if(!y){for(var d,f=j(t[e])?t[e]:[t[e]],v=h(function(t,n){if(g--,n.length<=1&&(n=n[0]),t){var o={};u(m,function(e,t){o[t]=e}),o[e]=n,y=!0,i(t,o)}else m[e]=n,O.setImmediate(l)}),w=f.slice(0,f.length-1),b=w.length;b--;){if(!(d=t[w[b]]))throw new Error("Has nonexistent dependency in "+w.join(", "));if(j(d)&&p(d,e)>=0)throw new Error("Has cyclic dependencies")}a()?(g++,f[f.length-1](v,m)):o(s)}})},O.retry=function(e,t,n){function i(e,t){for(;s.times;){var n=!(s.times-=1);r.push(function(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}(s.task,n)),!n&&s.interval>0&&r.push(function(e){return function(t){setTimeout(function(){t(null)},e)}}(s.interval))}O.series(r,function(t,n){n=n[n.length-1],(e||s.callback)(n.err,n.result)})}var o=5,a=0,r=[],s={times:o,interval:a},l=arguments.length;if(l<1||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return l<=2&&"function"===typeof e&&(n=t,t=e),"function"!==typeof e&&function(e,t){if("number"===typeof t)e.times=parseInt(t,10)||o;else{if("object"!==typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||o,e.interval=parseInt(t.interval,10)||a}}(s,e),s.callback=n,s.task=t,s.callback?i():i},O.waterfall=function(t,n){function i(e){return h(function(t,o){if(t)n.apply(null,[t].concat(o));else{var a=e.next();a?o.push(i(a)):o.push(n),F(e).apply(null,o)}})}if(n=a(n||e),!j(t)){var o=new Error("First argument to waterfall must be an array of functions");return n(o)}if(!t.length)return n();i(O.iterator(t))()},O.parallel=function(e,t){E(O.eachOf,e,t)},O.parallelLimit=function(e,t,n){E(g(t),e,n)},O.series=function(e,t){E(O.eachOfSeries,e,t)},O.iterator=function(e){function t(n){function i(){return e.length&&e[n].apply(null,arguments),i.next()}return i.next=function(){return n<e.length-1?t(n+1):null},i}return t(0)},O.apply=h(function(e,t){return h(function(n){return e.apply(null,t.concat(n))})}),O.concat=y(S),O.concatSeries=w(S),O.whilst=function(t,n,i){if(i=i||e,t()){var o=h(function(e,a){e?i(e):t.apply(this,a)?n(o):i.apply(null,[null].concat(a))});n(o)}else i(null)},O.doWhilst=function(e,t,n){var i=0;return O.whilst(function(){return++i<=1||t.apply(this,arguments)},e,n)},O.until=function(e,t,n){return O.whilst(function(){return!e.apply(this,arguments)},t,n)},O.doUntil=function(e,t,n){return O.doWhilst(e,function(){return!t.apply(this,arguments)},n)},O.during=function(t,n,i){i=i||e;var o=h(function(e,n){e?i(e):(n.push(a),t.apply(this,n))}),a=function(e,t){e?i(e):t?n(o):i(null)};t(a)},O.doDuring=function(e,t,n){var i=0;O.during(function(e){i++<1?e(null,!0):t.apply(this,arguments)},e,n)},O.queue=function(e,t){return T(function(t,n){e(t[0],n)},t,1)},O.priorityQueue=function(t,n){function i(e,t){return e.priority-t.priority}function o(e,t,n){for(var i=-1,o=e.length-1;i<o;){var a=i+(o-i+1>>>1);n(t,e[a])>=0?i=a:o=a-1}return i}function a(t,n,a,r){if(null!=r&&"function"!==typeof r)throw new Error("task callback must be a function");if(t.started=!0,j(n)||(n=[n]),0===n.length)return O.setImmediate(function(){t.drain()});s(n,function(n){var s={data:n,priority:a,callback:"function"===typeof r?r:e};t.tasks.splice(o(t.tasks,s,i)+1,0,s),t.tasks.length===t.concurrency&&t.saturated(),O.setImmediate(t.process)})}var r=O.queue(t,n);return r.push=function(e,t,n){a(r,e,t,n)},delete r.unshift,r},O.cargo=function(e,t){return T(e,1,t)},O.log=N("log"),O.dir=N("dir"),O.memoize=function(e,n){var i={},o={},a=Object.prototype.hasOwnProperty;n=n||t;var r=h(function(t){var r=t.pop(),s=n.apply(null,t);a.call(i,s)?O.setImmediate(function(){r.apply(null,i[s])}):a.call(o,s)?o[s].push(r):(o[s]=[r],e.apply(null,t.concat([h(function(e){i[s]=e;var t=o[s];delete o[s];for(var n=0,a=t.length;n<a;n++)t[n].apply(null,e)})])))});return r.memo=i,r.unmemoized=e,r},O.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},O.times=k(O.map),O.timesSeries=k(O.mapSeries),O.timesLimit=function(e,t,n,i){return O.mapLimit(d(e),t,n,i)},O.seq=function(){var t=arguments;return h(function(n){var i=this,o=n[n.length-1];"function"===typeof o?n.pop():o=e,O.reduce(t,n,function(e,t,n){t.apply(i,e.concat([h(function(e,t){n(e,t)})]))},function(e,t){o.apply(i,[e].concat(t))})})},O.compose=function(){return O.seq.apply(null,Array.prototype.reverse.call(arguments))},O.applyEach=I(O.eachOf),O.applyEachSeries=I(O.eachOfSeries),O.forever=function(t,n){function i(e){if(e)return a(e);r(i)}var a=o(n||e),r=F(t);i()},O.ensureAsync=F,O.constant=h(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),O.wrapSync=O.asyncify=function(e){return h(function(t){var n,i=t.pop();try{n=e.apply(this,t)}catch(e){return i(e)}B(n)&&"function"===typeof n.then?n.then(function(e){i(null,e)}).catch(function(e){i(e.message?e:new Error(e))}):i(null,n)})},"object"===typeof module&&module.exports?module.exports=O:"function"===typeof define&&define.amd?define([],function(){return O}):D.async=O}(),window.async.parallelWithTimeout=function(e,t,n,i){var o=n.map(function(t){return function(n){t.callback(function(i,o){var a=AdFuel.getMetricById("modules",t.name)[e+"Callback"],r=(new Date).getTime(),s=r-a.start+"ms";AdFuel.addMetric({type:"modules",id:t.name,data:{callback:e,end:r,elapsed:s}}),AdFuel.addMetric({type:"timeline",id:t.name+"_"+e,data:{end:r,elapsed:s}}),t.isCompleted=!0,n(i,o)})}}),a=setTimeout(function(){a=null;var o=[];i("callback timed out out after "+t+"ms.",null);for(var r=0;r<n.length;r++)if(0==n[r].isCompleted){_dbgLog({task:n[r]});var s=(new Date).getTime();o.push(n[r].name+" "+n[r].event),AdFuel.addMetric({type:"modules",id:n[r].name,data:{callback:e,timeout:s}}),AdFuel.addMetric({type:"timeline",id:n[r].name+"_"+e,data:{timeout:s}})}},t);async.parallel(o,function(e,t){a&&(clearTimeout(a),i(e,t))})}}();var AdFuel=function(){function e(e){return"function"===typeof e}function t(t,n){if(!e(t))throw new TypeError("Bind must be called on a function");var i=fe.call(arguments,2);return function(){return t.apply(n,i.concat(fe.call(arguments)))}}function n(){window.console.log.apply(window.console,arguments)}function i(e,t,n){return e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent?e.attachEvent("on"+t,n):void 0}function o(){for(var e="",t=0;t<9;t++)e+=Math.floor(16*Math.random()).toString(16);return e}function a(e){var t="";if(document.location.search){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",i=new RegExp(n),o=i.exec(document.location.search);o&&(t=o[1])}return t}function r(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}return null}function s(e){if(null==e||"object"!==typeof e)return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array){for(var n=[],i=0,o=e.length;i<o;i++)n[i]=s(e[i]);return n}if(e instanceof Object){var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=s(e[r]));return a}throw new Error("Unable to copy obj! Its type isn't supported.")}function l(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function d(){function e(){n||(n=!0,Te(Ee()+" DOMContentLoaded"),Se("AdFuel DOM Ready Detection"),ge=!0,U({type:"timeline",id:"domContentLoaded",data:{id:1,timestamp:Date.now()}}),D())}function t(){if(!n)try{document.documentElement.doScroll("left"),e()}catch(e){setTimeout(t,10)}}var n=!1;if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(document.attachEvent){var i=!1;try{i=null!==window.frameElement}catch(e){}document.documentElement.doScroll&&!i&&t(),document.attachEvent("onreadystatechange",function(){"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState||e()})}if(window.addEventListener)window.addEventListener("load",e,!0);else if(window.attachEvent)window.attachEvent("onload",e);else{var o=window.onload;window.onload=function(){o&&o(),e()}}"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState||e()}function c(){try{var e=a("adsqa");if(e){var t=e.split("%3D");ue=t[0],pe=t[1],Ce.pageTargets[ue]=pe}}catch(e){Ne("checkForAdsQA",e)}}function u(e){for(var t=0;t<e.length;t++){for(var n=e[t],i=Ce.pageTargets[n[0]]||[],o=0;o<n[1].length;o++){var a=n[1][o];i.indexOf(a)<0&&i.push(a)}Ce.pageTargets[n[0]]=i}}function p(e){if(window[e]){if(window[e].adTargets)for(var t in window[e].adTargets)window[e].adTargets.hasOwnProperty(t)&&(Ce.pageTargets[t]=window[e].adTargets[t]);if(window[e].slotTargets)for(var n in window[e].slotTargets)if(window[e].slotTargets.hasOwnProperty(n)){var i=window[e].slotTargets[n];Ce.slotTargets[n]||(Ce.slotTargets[n]={});for(var t in i)i.hasOwnProperty(t)&&(Ce.slotTargets[n][t]=i[t])}}}function f(e){var t=s(e.targeting);Array.isArray(t)||(t=[t]);var n=Ce.slotTargets;if(n[e.rktr_slot_id])for(var i in n[e.rktr_slot_id])n[e.rktr_slot_id].hasOwnProperty(i)&&t.push([i,n[e.rktr_slot_id][i]]);return t}function h(){i(document,"GPTRenderComplete",function(e){Se("GPT Render Complete",{renderEvent:e});var t=document.getElementById(e.detail.divId);t&&t.className.indexOf("adfuel-rendered")<0&&(t.className+=" adfuel-rendered")})}function m(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(e=Object.getOwnPropertyNames(Ie)));for(var t=0;t<e.length;t++){var n=e[t],i=document.getElementById(n);i&&i.className.indexOf("adfuel-rendered")>0&&(i.className=i.className.replace("adfuel-rendered",""))}}function g(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(e=Object.getOwnPropertyNames(Ie)));for(var t=0;t<e.length;t++){var n=e[t];Ie[n]&&delete Ie[n]}}function y(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(Se({pageSlots:Ie}),e=Object.getOwnPropertyNames(Ie))),Se("Removing Rocketeer Slots: ",e);for(var t=0;t<Fe.length;t++){var n=Fe[t].rktr_slot_id;Se({slotId:n}),(e.indexOf(n)>=0||0==e.length)&&(Se("Removing "+n),Fe.splice(t,1))}}function v(){window.googletag.setAdIframeTitle(_e.iframeTitle)}function w(e,t){if(e&&t){var n=AdFuel.dynamicTargeting.pageTargets[e]||[];Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)n.indexOf(t[i])<0&&n.push(t[i]);Ce.pageTargets[e]=n,Se("Setting Page-Level Targeting",e,n),
qe.executeWhenAvailable("adding page-level targeting",function(){var t={};t[e]=AdFuel.dynamicTargeting.pageTargets[e],AdFuel.addMetric({type:"page",id:"dynamic_targeting",data:t}),qe.setTargeting(e,AdFuel.dynamicTargeting.pageTargets[e])})}}function b(e,t){qe.executeWhenAvailable("removing page-level targeting",function(){var n=Ce.pageTargets[e];if(t&&(n.indexOf(t)>=0&&n.splice(n.indexOf(t),1),Ce.pageTargets[e]=n),!t)return qe.clearTargeting(e),delete Ce.pageTargets[e],void(AdFuel.dynamicTargeting=Ce);e&&0==n.length?delete Ce.pageTargets[e]:e&&0==!n.length?(Ce.pageTargets[e]=n,qe.setTargeting(e,n)):(Ce.pageTargets={},ue&&w(ue,pe))})}function _(e,t,n){var i=Ce.slotTargets[e]||{},o=i[t]||[];if(Array.isArray(o))if(Array.isArray(n))for(var a=0;a<n.length;a++)o.push(n[a]);else o.push(n);Ce.slotTargets[e]=Ce.slotTargets[e]||{},Ce.slotTargets[e][t]=o,qe.executeWhenAvailable("adding slot-level targeting",function(){var n=Ie[e];n&&qe.setSlotTargeting(n,t,o)})}function C(e,t,n){qe.executeWhenAvailable("removing slot-level targeting",function(){var i=Ie[e];if(i){var o={},a=i.getTargetingKeys();for(var r in a){var s=a[r];"function"!==typeof s&&(o[s]=i.getTargeting(s)||"")}var l={pos:o.pos};t?n?o[t].splice(o[t].indexOf(n),1):delete o[t]:o={pos:o.pos},qe.clearSlotTargeting(i);for(var d in o)0==o[d].length&&(o[d][0]=""),qe.setSlotTargeting(i,d,o[d])}Ce.slotTargets[e]&&(t?n?Ce.slotTargets[e][t].splice(Ce.slotTargets[e][t].indexOf(n),1):delete Ce.slotTargets[e][t]:(Ce.slotTargets[e].length=0,Ce.slotTargets[e]=l))})}function x(){U({type:"timeline",id:"building_page_level_GPT_object",data:{id:0,start:Date.now()}});var e=r("gptgeo");if(e){var t=e.split("%2C"),n=parseFloat(t[0]),i=parseFloat(t[1]);qe.executeWhenAvailable("setting location",function(){U({type:"configuration",id:"spoofed_user_location",data:{location_spoofed:!0,latitude:n,longitude:i}}),qe.setLocation(n,i)})}else Se("Unable to retrieve location cookie",e),U({type:"configuration",id:"spoofed_user_location",data:{location_spoofed:!1}});"undefined"!==typeof de&&(Se("Setting Child Directed Treat Tag : ",de),qe.executeWhenAvailable("setting child_directed_treatment tag",function(){U({type:"configuration",id:"child_directed_treatment",data:{active:1==de?"true":"false"}}),qe.setChildDirectedTreatmentTag(de)})),"undefined"!==typeof ce&&(Se("Setting SafeFrame Config Tag : ",ce),qe.executeWhenAvailable("setting safeframe_config",function(){U({type:"configuration",id:"safeframe_config",data:{active:ce}}),qe.setSafeFrameConfig(ce)}));for(var o=s(me),a=0;a<o.length;a++){var l=o[a];U({type:"page",id:"static_targeting",data:{key:l[0],value:l[1]}})}var d=Ce.pageTargets;for(var c in d)d.hasOwnProperty(c)&&o.push([c,d[c]]);Se("Page Level Targeting",JSON.stringify(o));for(var u=0;u<o.length;u++){var p=o[u][1];if(p&&!Array.isArray(p)&&(p=p.indexOf(",")>=0?p.split(","):[p]),"exclusions"==o[u][0])for(var f=0;f<p.length;f++){var h=o[u][1][f];qe.executeWhenAvailable("setting category exclusion",function(){qe.setCategoryExclusion(h)})}else{w(o[u][0],p)}}U({type:"timeline",id:"building_page_level_GPT_object",data:{id:0,end:Date.now()}})}function A(e){var t=document.querySelectorAll("div#"+e.rktr_slot_id);if(0!=t.length)for(var n=0;n<t.length;n++){var i=t[n];if(!(i.className.indexOf("adfuel-rendered")>=0)){if(1==t.length&&Ie[e.rktr_slot_id]){var o=I(e,!0);return T(o.rktr_slot_id),o}return I(e)}Se("Found rendered slot...",e.rktr_slot_id)}return Se("Not building slot... Can't Find Unrendered Slot On Page",e.rktr_slot_id),null}function E(e){var t=_e.networkId;e.inherit&&le&&(e.rktr_ad_id=le),Se("Building Slot",e),U({type:"timeline",id:"building_gpt_slot_"+e.rktr_slot_id,data:{id:1,start:Date.now()}}),U({type:"slots",id:e.rktr_slot_id,data:{build_start:Date.now()}});var n,i="/"+t+"/"+e.rktr_ad_id,o=e.rktr_slot_id,a=e.rktr_slot_id.indexOf("_oop")>=1,r=a?"Defining OOP Slot":"Defining Standard Slot";"undefined"!==typeof e.safeframe_config&&(n=e.safeframe_config),qe.executeWhenAvailable(r,function(){Ie[o]=a?qe.defineOutOfPageSlot(i,o):qe.defineSlot(i,e.sizes,o),n&&qe.setSlotSafeFrameConfig(Ie[o],n),U({type:"counts",id:"slots",data:"+"}),Se("Slot: ",e)}),Se("Slots",Ie),qe.executeWhenAvailable("Defining slot targeting",function(){var t=f(e);for(var n in t)if(t.hasOwnProperty(n)){var i;if(i=t[n]&&t[n][1]?JSON.stringify(t[n][1]):""){i=JSON.parse(i);var a=Ie[o];if("exclusions"==t[n][0])if(Array.isArray(t[n][1]))for(var r in t[n][1])t[n][1].hasOwnProperty(r)&&(i=t[n][1][r],qe.setSlotCategoryExclusion(a,i));else qe.setSlotCategoryExclusion(a,i);else{var s=t[n][0];qe.setSlotTargeting(a,s,i)}}}}),Se("Checking Responsive Mapping For Slot",e.responsive,e.responsive.length),e.responsive=e.responsive||[],e.responsive.length>0&&k(e.rktr_slot_id,e.responsive);var s=z("slots",e.rktr_slot_id),l=Date.now(),d=l-s.build_start+"ms";U({type:"slots",id:e.rktr_slot_id,data:{build_end:l,build_elapsed:d}});for(var c=[],u=0;u<e.sizes.length;u++){var p=e.sizes[u];c.push(p.join("x"))}U({type:"slots",id:e.rktr_slot_id,data:{allowed_sizes:c}}),U({type:"timeline",id:"building_gpt_slot_"+e.rktr_slot_id,data:{id:1,end:Date.now()}})}function S(e,t){function n(e){var t=Fe.indexOf(e);t>=0&&Fe.splice(t,1)}var i=[];U({type:"timeline",id:"building_gpt_slots",data:{id:z("timeline","building_gpt_slots").length||1,start:Date.now()}});for(var o=0;o<e.length;o++){var a=e[o],r=t&&t.ignoreCheck,s=!0;r||A(a)||(n(a),s=!1),s&&(E(a),i.push(a),n(a))}return U({type:"timeline",id:"building_gpt_slots",data:{id:1,slots:i.length,end:Date.now()}}),i}function T(e){e=e||[],Array.isArray(e)||(e=[e]),Se("Clearing Slots",{slotDivIds:e}),qe.executeWhenAvailable("clearing slots",function(){var t=[];e.length>0&&(t=e.filter(function(e){return!!Ie[e]}).map(function(e){return Ie[e]}),0==t.length)||qe.clearSlots(t)})}function N(e){e=e||[],Array.isArray(e)||(e=[e]),Se("Destroying Slots",{slotDivIds:e}),qe.executeWhenAvailable("destroying slots",function(){var t=[];e.length>0&&(t=e.filter(function(e){return!!Ie[e]}).map(function(e){return Ie[e]}),0==t.length)||(m(e),qe.destroySlots(t),g(e),y(e))})}function k(e,t){for(var n=0;n<t.length;n++){for(var i=JSON.parse(JSON.stringify(t[n])),o=0;o<i.length;o++)if(Array.isArray(i[o]))for(var a=0;a<i[o].length;a++)if(Array.isArray(i[o][a]))for(var r=0;r<i[o][a].length;r++)"fluid"!==i[o][a][r]&&(i[o][a][r]=parseInt(i[o][a][r]));else parseInt(i[o][a])>=0?i[o][a]=parseInt(i[o][a]):"fluid"!==i[o][a]&&(i[o]=[]);else i[o]=[];t[n]=i}qe.executeWhenAvailable("setting slot mappings",function(){qe.defineSlotSizeMapping(Ie[e],t)})}function I(e,t){Se("Checking to see if slot div id needs updated.",{slot:e});var n=e.rktr_slot_id,i=n,a=n.split("_"),r=a[a.length-1],s=document.querySelectorAll("div#"+n);if(s.length>1||1==s.length&&t){for(Se("updating slot div id.",{slot:e});Ie[i];)3==a.length?r=o():(r=parseInt(r)+1,r=r<10?"0"+String(r):String(r)),a[a.length-1]=r,i=a.join("_");F(e,i,n),R(n,i)}return e}function F(e,t,n){e.rktr_slot_id=t;try{var i=new CustomEvent("SlotIdChange",{detail:{asset:e,originalId:n,newId:t}});document.dispatchEvent(i)}catch(e){Ne("error dispatching custom Event: SlotIdChange",{error:e})}}function R(e,t){var n=document.querySelectorAll("div#"+e);if(n.length>0)for(var i=0;i<n.length;i++){var o=n[i];(o.className.indexOf("adfuel-rendered")<0&&n.length>1||1==n.length)&&(o.id=t)}}function O(){return xe&&ge&&0==ye&&0==ve}function D(){if(O())if(Re.length>0||Oe.length>0){Se("Processing delayed dispatch queues");var e;for(e=0;e<Re.length;e++)Re[e]();for(Se("User-Dispatched Queues: ",Oe),e=0;e<Oe.length;e++)Oe[e]();Re.length=0,Oe.length=0}else _e.autoDispatch&&(Se("Processing all queues"),AdFuel.dispatchQueue())}function M(e){if(!O())return Se("Delaying Queue Dispatch"),void Re.push(function(){M(e)});var t=z("timeline","dispatch_queue");if(U({type:"timeline",id:"dispatch_queue_called",data:{id:t.length?t.length+1:1,timestamp:Date.now(),slots:Fe.length}}),e=e||{},Se("Registry",AdFuel.registry),Se("SlotQueue: ",Fe),Se("Dispatch Options: ",e),e.slots&&e.slots.length>0)for(var n=0;n<e.slots.length;n++)Me.indexOf(e.slots[n])>=0&&Me.splice(Me.indexOf(e.slots[n]),1);if(Fe.length>0){var i=Fe.filter(function(t){var n=!e.slots||0==e.slots.length||e.slots.indexOf(t.rktr_slot_id)>=0,i=!e.exclude||0==e.exclude.length||e.exclude.indexOf(t.rktr_slot_id)<0,o=e.slots&&e.slots.length>0||Me.indexOf(t.rktr_slot_id)<0;return n&&i&&o});if(e.slots&&e.slots.length>0&&Me.length>0)for(var o=0;o<e.slots.length;o++){var a=Me.indexOf(e.slots[o]);a>=0&&Me.splice(a,1)}var r=S(i,e);if(r.length>0){var l=parseInt(z("counts","requests").length||0)+1,d=Date.now();U({type:"counts",id:"requests",data:"+"}),U({type:"requests",id:l,data:{start:d,options:e,queue:[]}}),x();for(var c=s(r),u=[],p=0;p<c.length;p++){var f=c[p];u.push(f.rktr_slot_id)}U({type:"requests",id:l,data:{queue:u}});Object.getOwnPropertyNames(e).length>0&&U({type:"requests",id:l,data:{options:e}});var h=De.filter(function(e){return!!e.callbacks.preDispatchCallback}).map(function(e){return we(e.name,function(t){e.callbacks.preDispatchCallback(c,t)},"preDispatch")});e&&e.preDispatchCallback&&h.push(we("dispatchOptions",function(t){e.preDispatchCallback(c,t)},"preDispatch"));for(var m=Date.now(),g=0;g<h.length;g++)U({type:"modules",id:h[g].name,data:{callback:"preDispatch",start:m}}),U({type:"timeline",id:h[g].name+"_preDispatch",data:{start:m}});window.async.parallelWithTimeout("preDispatch",_e.dispatchCallbackTimeoutInMilliseconds,h,function(t){t&&Se("Error calling preDispatchCallbacks for registered modules",{error:t});try{var n=new CustomEvent("PreDispatchComplete",{detail:{slots:Fe.length}});document.dispatchEvent(n)}catch(e){Ne("error dispatching custom Event: PreDispatchComplete",{error:e})}var i=z("timeline","dispatch_queue"),o=i.length?i.length+1:1;U({type:"timeline",id:"dispatch_queue",data:{id:o,start:Date.now(),slots:Fe.length}});for(var a=H(r,e),d=s(a),c=De.filter(function(e){return!!e.callbacks.postDispatchCallback}).map(function(e){return we(e.name,function(t){e.callbacks.postDispatchCallback(d,t)},"postDispatch")}),u=0;u<d.length;u++);e&&e.postDispatchCallback&&c.push(we("dispatchOptions",function(t){e.postDispatchCallback(d,t)},"postDispatch"));var p=Date.now();Te(Ee()+" Starting postDispatch Callbacks");for(var u=0;u<c.length;u++)U({type:"modules",id:c[u].name,data:{callback:"postDispatch",start:p}}),U({type:"timeline",id:c[u].name+"_postDispatch",data:{start:p}});window.async.parallelWithTimeout("postDispatch",_e.dispatchCallbackTimeoutInMilliseconds,c,function(e){e&&Se("error calling postDispatchCallbacks for registered modules",{error:e});try{var t=new CustomEvent("PostDispatchComplete",{detail:{slots:d.length}});document.dispatchEvent(t)}catch(e){Ne("error dispatching custom Event: PostDispatchComplete",{error:e})}Te(Ee()+" End postDispatch Callbacks"),Se("Slot Queue After Dispatch:",Fe)}),Te(Ee()+" End Dispatch of Queue: "+a.length+" slots");var f=Date.now();U({type:"timeline",id:"dispatch_queue",data:{id:o,end:f,slots:d.length}});var h=z("requests",l)[0],m=f-h.start+"ms";U({type:"requests",id:l,data:{end:f,elapsed:m}})})}}}function j(e,t){function n(e){var t=document,n=t.createElement("script"),o=t.getElementsByTagName("script")[0],a=/^(complete|loaded)$/,r=!1;n.type="text/javascript",n.src=e,n.onload=n.onreadystatechange=function(){r||"readyState"in n&&a.test(n.readyState)||(n.onload=n.onreadystatechange=null,r=!0,i())},o.parentNode.insertBefore(n,o)}function i(){t.dispatch&&AdFuel.dispatchQueue(t),U({type:"timeline",id:"Queueing registry via Script",data:{timestamp:Date.now()}})}function o(e,t){var n=[];if(n.push(e[0]),t&&t.length>0)for(var i=1;i<e.length;i++)t.indexOf(e[i].rktr_slot_id)>=0&&n.push(e[i]);else n=e;return n}function a(i){1==i.error?(Se("Using Script Tag Method..."),n(e)):(U({type:"timeline",id:"Queueing registry via JSON",data:{timestamp:Date.now()}}),i.response=o(i.response,t.slots),window.AdFuel.registry.push(i.response,t),Te(Ee()+" End Queuing of Registry: "+e))}if(Se("Queueing Registry: ",e,t,_e),Te(Ee()+" Start Queuing of Registry: "+e),t=t||{dispatch:_e.autoDispatch},t.exclude&&t.exclude.length>0)for(var r=0;r<t.exclude.length;r++){var s=t.exclude[r];Me.indexOf(s)<0&&Me.push(s)}Se("Trying JSON Request First..."),je(e,a)}function B(e,t,n){function i(){if(a++==t){n()&&B(e,t,n)}else{var s=Date.now()-r-a*o;window.setTimeout(i,o-s)}}t=t||10;var o=e/t,a=0,r=Date.now();window.setTimeout(i,o)}function P(e,t){function n(e){Se("starting refresh interval: "+e,t),B(1e3*e,5,function(){if(!t.interval||0==parseInt(t.interval))return Se("stopping refresh interval: "+e,t),!1;var i=parseInt(t.interval);return e!=i?(Se("changing refresh interval: "+e,t),n(i),!1):(a(),!0)})}!e||Array.isArray(e)||t?t=t||{}:(t=e,e=[]),e||(e=[]),Te(Ee()+" Begin Slot Refresh: "+e.length+" slots");var i=z("timeline","refresh"),o=i.length||1;U({type:"timeline",id:"refresh",data:{id:o,slots:e,options:t,start:Date.now()}}),t.pageload=void 0==t.pageload||t.pageload,t.maintainCorrelator=void 0==t.maintainCorrelator||t.maintainCorrelator,Se("Refresh Options",t);var a=function(){if(Se("Testing Refresh: ",{focused:Ae,refreshOnFocusOnly:_e.refreshOnFocusOnly,test:Ae||!_e.refreshOnFocusOnly}),Ae||!_e.refreshOnFocusOnly){var n=[],i=[],a=[];if(0==e.length)for(var r in Ie)Ie.hasOwnProperty(r)&&a.push(r);else a=e;for(var s=0;s<a.length;s++){var r=a[s];if(document.getElementById(r)){U({type:"slots",id:r,data:{refresh_start:Date.now()}});var l=Ie[r];l&&(n.push(l),i.push(r))}else Se("Cannot find element on page to refresh: "+r)}if(e.length>0&&0==i.length)return;var d=De.filter(function(e){return!!e.callbacks.preRefreshCallback}).map(function(e){return we(e.name,function(t){e.callbacks.preRefreshCallback(i,t)},"preRefresh")});t.preRefreshCallback&&d.push(we("refreshOptions",function(e){t.preRefreshCallback(i,e)},"preRefresh"));var c=Date.now();Te(Ee()+" Begin preRefreshCallbacks");for(var u=0;u<d.length;u++)U({type:"modules",id:d[u].name,data:{callback:"preRefresh",start:c}}),U({type:"timeline",id:d[u].name+"_preRefresh",data:{start:c}});window.async.parallelWithTimeout("preRefresh",_e.refreshCallbackTimeoutInMilliseconds,d,function(a){a&&Se("error calling preRefreshCallbacks for all registered modules",{error:a});try{var r=new CustomEvent("PreRefreshComplete",{detail:{slots:i}});document.dispatchEvent(r)}catch(e){Ne("error dispatching custom Event: PreRefreshComplete",{error:e})}Te(Ee()+" End preRefreshCallbacks"),T(i),t.pageload?qe.setTargeting("pageload","ref"):qe.clearTargeting("pageload"),qe.refreshSlots(n,t);for(var s=i,l=0;l<i.length;l++){var d=i[l],c=z("slots",d),u=Date.now();U({type:"slots",id:d,data:{refresh_end:u,refresh_elapsed:u-c.refresh_start+"ms"}}),U({type:"counts",id:d+"_refreshes",data:"+"})}var p=De.filter(function(e){return!!e.callbacks.postRefreshCallback}).map(function(e){return we(e.name,function(t){e.callbacks.postRefreshCallback(s,t)},"postRefresh")});t.postRefreshCallback&&p.push(we("refreshOptions",function(e){t.postRefreshCallback(s,e)},"postRefresh"));for(var f=Date.now(),l=0;l<p.length;l++)U({type:"modules",id:p[l].name,data:{callback:"postRefresh",start:f}}),U({type:"timeline",id:p[l].name+"_postRefresh",data:{start:f}});window.async.parallelWithTimeout("postRefresh",_e.refreshCallbackTimeoutInMilliseconds,p,function(e){e&&Se("error calling postRefreshCallbacks for all registered modules",{error:e});try{var t=new CustomEvent("PostRefreshComplete",{detail:{slots:i}});document.dispatchEvent(t)}catch(e){Ne("error dispatching custom Event: PostRefreshComplete",{error:e})}Te(Ee()+" End postRefreshCallbacks")}),Te(Ee()+" End Slot Refresh: "+e.length+" slots"),U({type:"timeline",id:"refresh",data:{id:o,slots:e,options:t,end:Date.now()}})})}};if(t.interval&&parseInt(t.interval)>0){n(parseInt(t.interval))}else a()}function q(){return Object.getOwnPropertyNames(Be)}function L(e){return Be[e]||{}}function z(e,t){return"counts"!=e||Be[e][t]?"timeline"!=e||"request_to_dfp"!=t||Be[e][t]?Be[e][t]||{}:[]:0}function U(e){Se("Adding Metric: ",JSON.parse(JSON.stringify(e)));var t,n=!1;switch(Be[e.type]||(Be[e.type]={}),Be[e.type][e.id]||(Be[e.type][e.id]=[],n=!0),t=n?[]:z(e.type,e.id),e.type){case"counts":0==t.length&&(t=0);var i=parseInt(t);if("+"==e.data)i+=1;else{if("-"!=e.data)return Se("Metric data contains no operator for counting metrics.",e),!1;i-=1}Be[e.type][e.id]=i,Se("Metrics updated with: ",e,Be);break;case"modules":if(e.data.callback){var o=De.filter(function(t){return t.name==e.id});Array.isArray(o)&&(o=o[0]),0==t.length&&(t={});var a=Object.getOwnPropertyNames(o.callbacks),r=e.data.callback+"Callback";if(a.indexOf(r)>=0)for(var s=0;s<a.length;s++)t[a[s]]||(t[a[s]]={}),delete e.data.callback,t[a[s]]=l(t[a[s]],e.data);Be[e.type][e.id]=t}else{var d=l(t,e.data);Be[e.type][e.id]=d,Se("Metrics updated with: ",e,Be)}break;case"requests":case"timeline":var c=e.data.id||1,d={};t.length>0&&(d=t[c-1]),d=l(d,e.data),Be[e.type][e.id][c-1]=d,Se("Metrics updated with: ",e,Be);break;case"slots":default:var d=l(t,e.data);Be[e.type][e.id]=d,Se("Metrics updated with: ",e,Be)}for(var u=De.filter(function(e){return!!e.callbacks.metricUpdateCallback}).map(function(t){return we(t.name,function(n){t.callbacks.metricUpdateCallback(e,n)},"metricUpdate")}),p=0;p<u.length;p++){u[p].callback()}return!0}function H(e,t){var n=z("timeline","request_to_dfp").length+1;n||(n=1),U({type:"timeline",id:"request_to_dfp",data:{id:n,slots:e,options:t,start:Date.now()}}),t=t||{sync:!1,syncSlots:[],maintainCorrelator:!1};var i=[];qe.configurePubAds();for(var o=0;o<e.length;o++){var a=e[o].rktr_slot_id;document.getElementById(a)?(!function(e){qe.executeWhenAvailable("displaying slot",function(){Se("Displaying Slot: "+e),qe.displaySlotById(e)})}(a),i.push(e[o])):(Se("Can't Find Slot On Page",a),Be.slots&&Be.slots[a]&&delete Be.slots[a])}var r=i.map(function(e){return U({type:"slots",id:e.rktr_slot_id,data:{render_start:Date.now()}}),e.rktr_slot_id});qe.executeWhenAvailable("refreshing slots",function(){var e=[];for(var n in Ie)Ie.hasOwnProperty(n)&&(Se("Checking Slot for Sync: "+n),(t.sync&&(!t.syncSlots||0==t.syncSlots.length||t.syncSlots.indexOf(n)>=0)||r.indexOf(n)>=0)&&(Se("Syncing Slot With Request: "+n),e.push(Ie[n])));Se("Slots To Refresh: ",e.map(function(e){return e.getSlotElementId()})),qe.refreshSlots(e)}),t.maintainCorrelator=t.maintainCorrelator||!1,Se({maintainCorrelator:t.maintainCorrelator}),0==t.maintainCorrelator&&qe.executeWhenAvailable("updating correlator",qe.updateCorrelator);try{var s=new CustomEvent("AdFuelRequestComplete",{detail:{slots:JSON.parse(JSON.stringify(i)),options:t}});document.dispatchEvent(s)}catch(e){Ne("error dispatching custom Event: AdFuelRequestComplete",{error:e})}return U({type:"timeline",id:"request_to_dfp",data:{id:n,slots:e,options:t,end:Date.now()}}),i}function W(e){if(e)for(var t in e)if(e.hasOwnProperty(t))if("slotTargets"==t){for(var n in e[t])if(e[t].hasOwnProperty(n)){var i=e[t][n];for(var o in i)i.hasOwnProperty(o)&&AdFuel.addSlotLevelTarget(n,o,e[t][n][o])}}else if("adTargets"==t)for(var n in e[t])e[t].hasOwnProperty(n)&&AdFuel.addPageLevelTarget(n,e[t][n]);else AdFuel.addPageLevelTarget(t,e[t])}function Q(e){if(e&&e.indexOf("/")>=0){var t=e.split("/")[0];if(parseInt(t)>0){var n=e.split("/");n.splice(0,1),e=n.join("/")}}return e}function V(e,t){ke("AdFuel.logit is DEPRECATED and will be removed in the next version of AdFuel."),Se(t,e)}function $(e){ke("AdFuel.queueSingleton is DEPRECATED and will be removed in the next version of AdFuel."),Se("Queuing Singleton",e),e.size=e.size||[[88,31]],e.targets=e.targets||[],e.responsive=e.responsive||[];var t=e.divId;e.adunit=Q(e.adunit);var n={singleton:!0,rktr_id:"singleton_"+t,gpt_id:_e.networkId,root:e.adunit.split("/")[0].toUpperCase(),responsive:[],rktr_slot_id:"page"};if(me&&e.targets.length>0){for(var i=[],o=[],a=0;a<e.targets.length;a++){for(var r=e.targets[a],s=!1,l=0;l<me.length;l++)if(me[l][0]==r[0])for(var d=0;d<r[1].length;d++)me[l][1].indexOf(r[1][d])>=0&&(s=!0,o=me[l],Se("Found duplicate page-level target. Removing from singleton.",{singleton:r,pageLevel:o}));s||i.push(r)}e.targets=i}n.targeting=me;var c={present:!0,responsive:e.responsive,rktr_slot_id:e.divId,sizes:e.size,targeting:e.targets,rktr_ad_id:e.adunit,inherit:e.inherit};if(c){var u=[n,c];AdFuel.registry.push(u),e.dispatch&&!_e.autoDispatch&&AdFuel.dispatchQueue({slots:[c.rktr_slot_id]})}else Se("missing singleton: "+e.divId)}function K(e){ke("AdFuel.processNewRegistry is DEPRECATED and will be removed in the next version of AdFuel."),j(e,{dispatch:!0})}function G(e,t,n){ke("AdFuel.reloadAd is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh([e],{pageload:t,interval:0,updateCorrelator:n})}function J(e,t,n,i){ke("AdFuel.refreshAd is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh([e],{pageload:n||!1,interval:t||0,updateCorrelator:i||!0})}function Y(e,t,n,i){ke("AdFuel.refreshAds is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh(e,{pageload:n||!1,interval:t||0,updateCorrelator:i||!0})}function Z(e,t,n){ke("AdFuel.refreshAllAds is DEPRECATED and will be removed in the next version of AdFuel.");var i={pageload:t||!1,interval:e||0,updateCorrelator:n||!0};return AdFuel.refresh([],i),!0}function X(e,t,n,i,o,a,r,s){ke("AdFuel.renderSingleSlot is DEPRECATED and will be removed in the next version of AdFuel."),e.indexOf("ad_carousel_slide")>=0&&(o="NBA/homepage"),$({divId:e,size:t,targets:n,responsive:i,adunit:o,delay:a,inherit:r,dispatch:void 0==s||s,sync:!1,syncSlots:[]})}function ee(){i(document,"AdFuelRequestComplete",function(e){Se("AdFuel Request Complete",{requestEvent:e})}),i(document,"GPTRenderComplete",function(e){Se("GPT Render Complete",{renderEvent:e})}),i(document,"GPTSlotBuildComplete",function(e){Se("GPT Slot Build Complete",{renderEvent:e})}),i(document,"SlotIdChange",function(e){Se("Slot ID Change",{idChangeEvent:e})}),i(document,"SlotVisibilityChanged",function(e){Se("Slot Visibility Changed",{visibilityChangedEvent:e})}),i(document,"SlotViewable",function(e){Se("Slot Viewable",{viewableEvent:e})}),i(document,"GPTSlotLoaded",function(e){Se("Slot Loaded",{slotOnLoadEvent:e})}),i(document,"PreQueueComplete",function(e){Se("PreQueueComplete",{preQueueCompleteEvent:e})}),i(document,"PostQueueComplete",function(e){Se("PostQueueComplete",{postQueueCompleteEvent:e})}),i(document,"PreDispatchComplete",function(e){Se("PreDispatchComplete",{preDispatchCompleteEvent:e})}),i(document,"PostDispatchComplete",function(e){Se("PostDispatchComplete",{postDispatchCompleteEvent:e})}),i(document,"PreRefreshComplete",function(e){Se("PreRefreshComplete",{preRefreshCompleteEvent:e})}),i(document,"PostRefreshComplete",function(e){Se("PostRefreshComplete",{postRefreshCompleteEvent:e})})}function te(){if(!xe){xe=!0;var e=_e.exclude.join(",")||"No Exclusions";U({type:"timeline",id:"adfuel_initialized",data:{id:1,timestamp:Date.now()}}),U({type:"configuration",id:"adfuel_initialization_options",data:{refreshOnFocusOnly:_e.refreshOnFocusOnly,networkId:_e.networkId,autoDispatch:_e.autoDispatch,exclude:e,iFrameTitle:_e.iframeTitle}}),U({type:"configuration",id:"callback_timeout_length",data:{queueCallbackTimeout:_e.queueCallbackTimeoutInMilliseconds+"ms",dispatchCallbackTimeout:_e.dispatchCallbackTimeoutInMilliseconds+"ms",refreshCallbackTimeout:_e.refreshCallbackTimeoutInMilliseconds+"ms"}}),h(),c(),ee(),d(),qe.executeWhenAvailable("set ad iframe title",v),D();try{var t=new CustomEvent("AdFuelCreated",{detail:{AdFuel:window.AdFuel}});document.dispatchEvent(t)}catch(e){Ne("error dispatching custom Event: AdFuelCreated",{error:e})}i(document,"PostQueueComplete",function(){setTimeout(D,300)})}}function ne(){return s(Fe)}function ie(e){for(var t,n=0;n<AdFuel.registry.length;n++)for(var i=AdFuel.registry[n],o=1;o<i.length;o++){var a=i[o];a.rktr_slot_id==e&&(t=s(a))}var r,l={},d=Ie[e];if(d){r=d.getAdUnitPath();var c=d.getTargetingKeys();for(var u in c){var p=c[u];l[p]=d.getTargeting(p)}}return{adUnit:r,slot:t,slotTargeting:l}}function oe(e,t){Se("registering module: "+e);for(var n=-1,i=0;i<De.length;i++)De[i].name==e&&(n=i);n>=0?De[n].callbacks=t:De.push({name:e,callbacks:t}),Be.modules=Be.modules||{},Be.modules[e]=Be.modules[e]||{};for(var o in t)t.hasOwnProperty(o)&&(Be.modules[e][o]={});return U({type:"counts",id:"modules",data:"+"}),Pe}function ae(e){for(var t=-1,n=0;n<De.length;n++)De[n].name==e&&(t=n);t>=0&&De.splice(t,1),U({type:"counts",id:"modules",data:"-"})}function re(e){if(e){if(e.exclude&&e.exclude.length>0)for(var t=0;t<e.exclude.length;t++){var n=e.exclude[t];Me.indexOf(n)<0&&Me.push(n)}for(var i in e)e.hasOwnProperty(i)&&(_e[i]=e[i]);var o=_e.exclude.length>0?_e.exclude.join(","):"No Exclusions";U({type:"configuration",id:"adfuel_initialization_options",data:{refreshOnFocusOnly:_e.refreshOnFocusOnly,networkId:_e.networkId,autoDispatch:_e.autoDispatch,exclude:o,iFrameTitle:_e.iframeTitle}}),U({type:"configuration",id:"callback_timeout_length",data:{queueCallbackTimeout:_e.queueCallbackTimeoutInMilliseconds+"ms",dispatchCallbackTimeout:_e.dispatchCallbackTimeoutInMilliseconds+"ms",refreshCallbackTimeout:_e.refreshCallbackTimeoutInMilliseconds+"ms"}})}}function se(){return qe.updateCorrelator()}var le,de,ce,ue,pe,fe=Array.prototype.slice,he=function(){},me=[],ge=!1,ye=!1,ve=!1,we=function(e,t,n){return{name:e,callback:t,event:n,data:{}}},be=function(){var e=[];return e.push=function(t,n){if(Array.isArray(t)){if(ye=!0,n&&n.slotMap)for(var i=1;i<t.length;i++)n.slotMap[t[i].rktr_slot_id]&&(t[i].rktr_slot_id=n.slotMap[t[i].rktr_slot_id]);Array.prototype.push.call(e,t);var o=s(t);n=n||{dispatch:!0},o=o.filter(function(e,t){return 0===t||(!(!n.slots||!n.slots.includes(e.rktr_slot_id))||!(n.slots&&!n.slots.includes(e.rktr_slot_id)))});for(var a=De.filter(function(e){return!!e.callbacks.preQueueCallback}).map(function(e){return we(e.name,function(t){e.callbacks.preQueueCallback(o,t)},"preQueue")}),r=0;r<a.length;r++){var l=(new Date).getTime();AdFuel.addMetric({type:"modules",id:a[r].name,data:{callback:"preQueue",start:l}}),AdFuel.addMetric({type:"timeline",id:a[r].name+"_preQueue",data:{start:l}})}async.parallelWithTimeout("preQueue",_e.queueCallbackTimeoutInMilliseconds,a,function(e){e&&Se("error calling preQueueCallbacks for registered modules",{error:e});try{var i=new CustomEvent("PreQueueComplete",{detail:{asset:t}});document.dispatchEvent(i)}catch(e){Ne("error dispatching custom Event: PreQueueComplete",{error:e})}ye=!1;var o=(new Date).getTime();AdFuel.addMetric({type:"timeline",id:"queueing_registry:_"+t[0].rktr_id,data:{id:0,start:o}});var a=t[0].rktr_id;if(U({type:"counts",id:"registries",data:"+"}),U({type:"registries",id:a,data:{deployed:t[0].rktr_deployed_date,slotCount:t.length-1}}),"undefined"!==typeof t[0].child_directed_treatment&&(de="true"===t[0].child_directed_treatment?1:0),"undefined"!==typeof t[0].safeframe_config&&(ce=t[0].safeframe_config),!t[0].singleton){u(t[0].targeting);try{le=Q(t[1].rktr_ad_id)}catch(e){console.log("Could not find inheritable Ad Unit.",t)}}p(t[0].root?t[0].root.toUpperCase():t[0].site.toUpperCase());for(var r=!1,l=1;l<t.length;l++){var d=t[l];if(d.parentRegistry=a,!d.queued){AdFuel.addMetric({type:"slots",id:d.rktr_slot_id,data:{queued:(new Date).getTime()}});!0===(t[0].hasInViewRefresh?t[0].hasInViewRefresh:d.hasInViewRefresh)&&(AdFuel.addMetric({type:"slots",id:d.rktr_slot_id,data:{"In-View Refresh Registration":(new Date).getTime()}}),r=!0),Fe.push(d)}}r&&_startInViewListeners();for(var c=s(Fe),f=De.filter(function(e){return!!e.callbacks.postQueueCallback}).map(function(e){return we(e.name,function(t){e.callbacks.postQueueCallback(c,t)},"postQueue")}),l=0;l<f.length;l++)o=(new Date).getTime(),AdFuel.addMetric({type:"modules",id:f[l].name,data:{callback:"postQueue",start:o}}),AdFuel.addMetric({type:"timeline",id:f[l].name+"_postQueue",data:{start:o}});ve=!0,async.parallelWithTimeout("postQueue",_e.queueCallbackTimeoutInMilliseconds,f,function(e){e&&Se("error calling postQueueCallbacks for registered modules",{error:e});try{var i=new CustomEvent("PostQueueComplete",{detail:{asset:t}});document.dispatchEvent(i)}catch(e){Ne("error dispatching custom Event: PostQueueComplete",{error:e})}Te(Ee()+" End postQueue Callbacks"),ve=!1;var o=(new Date).getTime();AdFuel.addMetric({type:"timeline",id:"queueing_registry:_"+t[0].rktr_id,data:{id:0,end:o}}),(_e.autoDispatch||1==n.dispatch)&&AdFuel.dispatchQueue(n)})})}},e},_e={refreshOnFocusOnly:!1,networkId:"8663477",autoDispatch:!0,exclude:[],iframeTitle:"advertisement",queueCallbackTimeoutInMilliseconds:500,dispatchCallbackTimeoutInMilliseconds:500,refreshCallbackTimeoutInMilliseconds:500},Ce={pageTargets:{},slotTargets:{}},xe=!1,Ae=!0,Ee=function(){var e=new Date,t=e.toISOString(),n=t.split("T");n[0];return n[1].replace("Z","")},Se="true"==a("debug")?t(n,null,"[AdFuel - DEBUG]"):he,Te="true"==a("timers")?t(n,null,"[AdFuel- TIMER]"):he,Ne=(t(n,null,"[AdFuel - WARNING]"),t(n,null,"[AdFuel - ERROR]")),ke=t(n,null,"[AdFuel - DEPRECATION NOTICE]"),Ie={},Fe=[],Re=[],Oe=[],De=[],Me=[],je=function(e,t){var n=document.createElement("a");n.href=e;var i=n.pathname.replace(/(\.min)?(\.js)$/,".json"),o=n.protocol+"//ssl.cdn.turner.com/"+i,a=new XMLHttpRequest;a.onload=function(){var e=this.response;try{e=JSON.parse(e),Se("JSON Data Parsed:",e),t({response:e.registry,error:!1})}catch(n){Se("JSON Request Failed: ",n),e={response:this.response,error:!0},t(e)}};try{Se("Requesting JSON: ",o),a.open("GET",o,!0),a.setRequestHeader("Accept","application/json"),a.send()}catch(e){Se("JSON Request Failed: ",e);var r={response:this.response,error:!0};t(r)}},Be={},Pe={metrics:Be,getMetricTypes:q,getMetricsByType:L,getMetricById:z,addMetric:U},qe=function(){function e(e,t){return C||!(C=window.googletag.apiReady&&"function"===typeof window.googletag.pubads)&&e&&Ne("GPT is unavailable - "+e,t),C}function t(e,t){window.googletag.cmd.push(t)}function n(){_||(_=!0,AdFuel.requestScriptText+="googletag.pubads().collapseEmptyDivs(true);\n",AdFuel.requestScriptText+="googletag.pubads().enableAsyncRendering();\n",AdFuel.requestScriptText+="googletag.pubads().enableSingleRequest();\n",AdFuel.requestScriptText+="googletag.pubads().disableInitialLoad();\n",AdFuel.requestScriptText+="googletag.enableServices();\n",t("Sending Request",function(){window.googletag.pubads().addEventListener("impressionViewable",function(e){var t=e,n=new CustomEvent("SlotViewable",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(e){var t=e,n=new CustomEvent("SlotVisibilityChanged",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(e){try{var t={};e.slot&&(t.asset=e.slot),e.slot.getTargeting("pos")&&(t.pos=e.slot.getTargeting("pos")),e.isEmpty?t.empty=!0:t.empty=!1,e.size&&(t.renderedSize=e.size),e.creativeId&&(t.creativeId=e.creativeId),e.lineItemId&&(t.lineItemId=e.lineItemId),e.serviceName&&(t.serviceName=e.serviceName),e.slot.getSlotElementId()&&(t.divId=e.slot.getSlotElementId());var n=z("slots",t.divId),i=!1;for(var o in n)0==o&&(i=!0);var a=Date.now(),r=z("slots",t.divId),s=a-r.render_start+"ms";i||U({type:"timeline",id:t.divId+"_rendered",data:{id:1,start:r.render_start,end:a,elapsed:s}}),U({type:"slots",id:t.divId,data:{render_end:a,render_elapsed:s,advertiserId:t.advertiserId,campaignId:t.campaignId,creativeId:e.creativeId,lineItemId:e.lineItemId}});try{U({type:"slots",id:t.divId,data:{inventory_url:"https://www.google.com/dfp/inventory?hl=en-US#inventory/q="+e.slot.getAdUnitPath(),responsive_map:e.slot.getResponsiveMap()}})}catch(e){}try{U({type:"slots",id:t.divId,data:{targeting_map:e.slot.getTargetingMap()}})}catch(e){}t.empty||U({type:"slots",id:t.divId,data:{rendered_size:e.size.join("x")}}),U({type:"slots",id:t.divId,data:{empty:t.empty}}),Se("GPTRenderComplete Details: ",t);var l=new CustomEvent("GPTRenderComplete",{detail:t});document.dispatchEvent(l)}catch(e){
Ne("error dispatching custom Event: GPTRenderComplete",{error:e})}}),window.googletag.pubads().addEventListener("slotOnload",function(e){var t=e,n=new CustomEvent("GPTSlotLoaded",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().collapseEmptyDivs(!0),window.googletag.pubads().enableAsyncRendering(),window.googletag.pubads().enableSingleRequest(),window.googletag.pubads().disableInitialLoad(),window.googletag.enableServices()}))}function i(t){var n=!1;return e("clearing target",{key:t||"all"})&&(t?window.googletag.pubads().clearTargeting(t):window.googletag.pubads().clearTargeting(),n=!0),n}function o(t,n){var i=!1;return e("setting target",{key:t,value:n})&&(AdFuel.requestScriptText+="googletag.pubads().setTargeting('"+t+"', '"+n+"');\n",window.googletag.pubads().setTargeting(t,n),i=!0),i}function a(t,n){var i=!1;return e("setting location",{latitude:t,logitude:n})&&(window.googletag.pubads().setLocation(t,n),i=!0),i}function r(t){var n=!1;return e("setting child directed treatment tag: "+t)&&(window.googletag.pubads().clearTagForChildDirectedTreatment(),window.googletag.pubads().setTagForChildDirectedTreatment(t),n=!0),n}function s(t){var n=!1;return t.sandbox=1==t.sandbox||"true"==t.sandbox,t.allowOverlayExpansion=1==t.allowOverlayExpansion||"true"==t.allowOverlayExpansion,t.allowPushExpansion=1==t.allowPushExpansion||"true"==t.allowPushExpansion,1!=t.sandbox&&(Se("Removing invalid sandbox value"),delete t.sandbox),e("setting SafeFrame config tag: "+t)&&(window.googletag.pubads().setSafeFrameConfig(t),n=!0),n}function l(t){var n=!1;return e("setting category exclusion: "+t)&&(AdFuel.requestScriptText+="googletag.pubads().setCategoryExclusion('"+t+"');\n",window.googletag.pubads().setCategoryExclusion(t),n=!0),n}function d(){var t=!1;return e("updating correlator")&&(AdFuel.requestScriptText+="googletag.pubads().updateCorrelator();\n",window.googletag.pubads().updateCorrelator(),t=!0),t}function c(t,n){var i;return e("defining out of page slot",{adPath:t,slotId:n})&&(Se("Building OOP Slot Object",{adPath:t,slotId:n}),AdFuel.requestScriptText+="\n_pageSlots['"+n+"'] = googletag.defineOutOfPageSlot('"+t+"', '"+n+"').addService(googletag.pubads());\n",i=window.googletag.defineOutOfPageSlot(t,n).addService(window.googletag.pubads())),i}function u(t,n,i){var o;return e("defining standard slot",{adPath:t,sizes:n,slotId:i})&&(Se("Building Standard Slot Object",{adPath:t,sizes:n,slotId:i}),AdFuel.requestScriptText+="\n_pageSlots['"+i+"'] = googletag.defineSlot('"+t+"', "+JSON.stringify(n)+", '"+i+"').addService(googletag.pubads());\n",o=window.googletag.defineSlot(t,n,i).addService(window.googletag.pubads())),o}function p(e,t){var n=e.getSlotElementId();Se("Setting Slot Category Exclusion",{slotId:n,value:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].setCategoryExclusion('"+t+"');\n",e.setCategoryExclusion(t)}function f(e,t,n){var i=e.getSlotElementId();Se("Setting Slot Targeting",{slotId:i,key:t,value:n}),AdFuel.requestScriptText+="_pageSlots['"+i+"'].setTargeting('"+t+"', '"+n+"');\n",e.setTargeting(t,n)}function h(e,t){var n=e.getSlotElementId();Se("Setting Slot SafeFrame config",{slotId:n,value:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].setSafeFrameConfig("+t+");\n",e.setSafeFrameConfig(t)}function m(e,t){var n=e.getSlotElementId();Se("Setting Slot size mapping",{slotId:n,responsiveMap:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].defineSizeMapping('"+JSON.stringify(t)+"');\n",e.defineSizeMapping(t)}function g(e){AdFuel.requestScriptText+='googletag.display("'+e+'");\n',window.googletag.display(e),U({type:"slots",id:e,data:{display:Date.now()}})}function y(e){var t=e.getSlotElementId();Se("Clearing targeting for Slot: "+t),AdFuel.requestScriptText+="_pageSlots['"+t+"'].clearTargeting();\n",e.clearTargeting()}function v(e){var t=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().clear("+t+");\n",e.length>0?window.googletag.pubads().clear(e):window.googletag.pubads().clear()}function w(e){var t=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().destroySlots("+t+");\n",e.length>0?window.googletag.destroySlots(e):window.googletag.destroySlots()}function b(e,t){t=t||{maintainCorrelator:!0};var n=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().refresh("+n+");\n",e.length>0?window.googletag.pubads().refresh(e,{changeCorrelator:!t.maintainCorrelator}):window.googletag.pubads().refresh(null,{changeCorrelator:!t.maintainCorrelator})}window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];var _=!1,C=!1;return{executeWhenAvailable:t,isAvailable:e,configurePubAds:n,clearTargeting:i,setTargeting:o,setLocation:a,setChildDirectedTreatmentTag:r,setSafeFrameConfig:s,setSlotSafeFrameConfig:h,setCategoryExclusion:l,updateCorrelator:d,defineOutOfPageSlot:c,defineSlot:u,setSlotCategoryExclusion:p,setSlotTargeting:f,displaySlotById:g,defineSlotSizeMapping:m,refreshSlots:b,clearSlots:v,clearSlotTargeting:y,destroySlots:w}}();return i(window,"load",function(){U({type:"timeline",id:"navigation_start",data:{id:1,timestamp:window.performance.timing.navigationStart}}),U({type:"timeline",id:"fetch_start",data:{id:1,timestamp:window.performance.timing.fetchStart}}),U({type:"timeline",id:"domain_lookup_start",data:{id:1,timestamp:window.performance.timing.domainLookupStart}}),U({type:"timeline",id:"connection_start",data:{id:1,timestamp:window.performance.timing.connectStart}}),U({type:"timeline",id:"document_request_start",data:{id:1,timestamp:window.performance.timing.requestStart}}),setTimeout(function(){U({type:"timeline",id:"window_load",data:{id:1,timestamp:window.performance.timing.loadEventEnd}})},1e3)}),{init:te,logit:V,addEvent:i,setOptions:re,clearSlot:T,clearSlots:T,clearAllSlots:T,queueSingleton:$,processNewRegistry:K,reloadAd:G,refreshAd:J,refreshAds:Y,refreshAllAds:Z,renderSingleSlot:X,requestAndRenderAds:M,pageSlots:Ie,pageSlotsObj:Ie,dynamicTargeting:Ce,setBulkTargeting:W,dispatchQueue:M,queueRegistry:j,getQueuedSlots:ne,getSlotDetails:ie,refresh:P,destroySlots:N,removePageLevelTarget:b,removeSlotLevelTarget:C,addPageLevelTarget:w,addSlotLevelTarget:_,generateSingletonId:o,registry:new be,requestScriptText:"",updateCorrelator:se,readCookie:r,registerModule:oe,unregisterModule:ae,registeredModules:De,timestamp:Ee,metrics:Be,addMetric:U,getMetricTypes:q,getMetricsByType:L,getMetricById:z,rocketeerSlots:Fe}}();window.AMPTManager={};for(var exposedMethods=Object.getOwnPropertyNames(window.AdFuel),x=0;x<exposedMethods.length;x++){var methodName=exposedMethods[x];"function"===typeof window.AdFuel[methodName]?window.AMPTManager[methodName]=sendDeprecationNotification(methodName):window.AMPTManager[methodName]=window.AdFuel[methodName]}window.AdFuel.init(),function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"===typeof e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,o){if(!(i=n.call(null,o,e,t)))return!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,o){if(i=n.call(null,o,e,t))return!1}),!!i):i},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,o;return function(){var a,r,s=this,l=arguments;return a=function(){i=null,n||(o=e.apply(s,l))},r=n&&!i,clearTimeout(i),i=setTimeout(a,t),r&&(o=e.apply(s,l)),o}},throttle:function(e,t){var n,i,o,a,r,s;return r=0,s=function(){r=new Date,o=null,a=e.apply(n,i)},function(){var l=new Date,d=t-(l-r);return n=this,i=arguments,d<=0?(clearTimeout(o),o=null,r=l,a=e.apply(n,i)):o||(o=setTimeout(s,d)),a}},noop:function(){}}}(),n="0.10.5",i=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function(){var n=[].slice.call(arguments,0);return function(i){var o=[];return t.each(n,function(n){o=o.concat(e(t.toStr(i[n])))}),o}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),o=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function o(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new o(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),a=function(){"use strict";function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function o(e){return JSON.parse(e)}var a,r;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(e){a=null}return r=a&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),o(a.getItem(this._prefix(e)))},set:function(e,o,r){return t.isNumber(r)?a.setItem(this._ttlKey(e),i(n()+r)):a.removeItem(this._ttlKey(e)),a.setItem(this._prefix(e),i(o))},remove:function(e){return a.removeItem(this._ttlKey(e)),a.removeItem(this._prefix(e)),this},clear:function(){var e,t,n=[],i=a.length;for(e=0;e<i;e++)(t=a.key(e)).match(this.keyMatcher)&&n.push(t.replace(this.keyMatcher,""));for(e=n.length;e--;)this.remove(n[e]);return this},isExpired:function(e){var i=o(a.getItem(this._ttlKey(e)));return!!(t.isNumber(i)&&n()>i)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,r),e}(),r=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?i(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=!1===t.cache?new o(0):l}function i(n){return function(i,o){function a(e){t.defer(function(){s.resolve(e)})}function r(e){t.defer(function(){s.reject(e)})}var s=e.Deferred();return n(i,o,a,r),s}}var a=0,r={},s=6,l=new o(10);return n.setMaxPendingRequests=function(e){s=e},n.resetCache=function(){l.reset()},t.mixin(n.prototype,{_get:function(e,t,n){function i(t){n&&n(null,t),c._cache.set(e,t)}function o(){n&&n(!0)}function l(){a--,delete r[e],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var d,c=this;this.cancelled||e!==this.lastUrl||((d=r[e])?d.done(i).fail(o):a<s?(a++,r[e]=this._send(e,t).done(i).fail(o).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n,i){var o;return t.isFunction(n)&&(i=n,n={}),this.cancelled=!1,this.lastUrl=e,(o=this._cache.get(e))?t.defer(function(){i&&i(null,o)}):this._get(e,n,i),!!o},cancel:function(){this.cancelled=!0}}),n}(),s=function(){"use strict";function n(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function i(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function o(){return{ids:[],children:{}}}function a(e){for(var t={},n=[],i=0,o=e.length;i<o;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function r(e,t){function n(e,t){return e-t}var i=0,o=0,a=[];e=e.sort(n),t=t.sort(n);for(var r=e.length,s=t.length;i<r&&o<s;)e[i]<t[o]?i++:e[i]>t[o]?o++:(a.push(e[i]),i++,o++);return a}return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var a,r;a=n.datums.push(e)-1,r=i(n.datumTokenizer(e)),t.each(r,function(e){var t,i,r;for(t=n.trie,i=e.split("");r=i.shift();)t=t.children[r]||(t.children[r]=o()),t.ids.push(a)})})},get:function(e){var n,o,s=this;return n=i(this.queryTokenizer(e)),t.each(n,function(e){var t,n,i,a;if(o&&0===o.length)return!1;for(t=s.trie,n=e.split("");t&&(i=n.shift());)t=t.children[i];if(!t||0!==n.length)return o=[],!1;a=t.ids.slice(0),o=o?r(o,a):a}),o?t.map(a(o),function(e){return s.datums[e]}):[]},reset:function(){this.datums=[],this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function i(e){return e.local||null}function o(i){var o,a;return a={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(o=i.prefetch||null)&&(o=t.isString(o)?{url:o}:o,o=t.mixin(a,o),o.thumbprint=n+o.thumbprint,o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",!o.url&&e.error("prefetch requires url to be set")),o}function a(n){var i,o;return o={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(i=n.remote||null)&&(i=t.isString(i)?{url:i}:i,i=t.mixin(o,i),i.rateLimiter=/^throttle$/i.test(i.rateLimitBy)?function(e){return function(n){return t.throttle(n,e)}}(i.rateLimitWait):function(e){return function(n){return t.debounce(n,e)}}(i.rateLimitWait),i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",delete i.rateLimitBy,delete i.rateLimitWait,!i.url&&e.error("remote requires url to be set")),i}return{local:i,prefetch:o,remote:a}}();!function(n){"use strict";function o(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=d(t.sorter),this.dupDetector=t.dupDetector||c,this.local=l.local(t),this.prefetch=l.prefetch(t),this.remote=l.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new s({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new a(this.cacheKey):null}function d(e){function n(t){return t.sort(e)}function i(e){return e}return t.isFunction(e)?n:i}function c(){return!1}var u,p;u=n.Bloodhound,p={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=o,o.noConflict=function(){return n.Bloodhound=u,o},o.tokenizers=i,t.mixin(o.prototype,{_loadPrefetch:function(t){function n(e){a.clear(),a.add(t.filter?t.filter(e):e),a._saveToStorage(a.index.serialize(),t.thumbprint,t.ttl)}var i,o,a=this;return(i=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(i),o=e.Deferred().resolve()):o=e.ajax(t.url,t.ajax).done(n),o},_getFromRemote:function(e,t){function n(e,n){t(e?[]:a.remote.filter?a.remote.filter(n):n)}var i,o,a=this;if(this.transport)return e=e||"",o=encodeURIComponent(e),i=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,o),this.transport.get(i,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(p.data,e,n),this.storage.set(p.protocol,location.protocol,n),this.storage.set(p.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(p.data),n.protocol=this.storage.get(p.protocol),n.thumbprint=this.storage.get(p.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){function n(){o.add(t.isFunction(a)?a():a)}var i,o=this,a=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),a&&i.done(n),this.transport=this.remote?new r(this.remote):null,this.initPromise=i.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,n){function i(e){var i=a.slice(0);t.each(e,function(e){var n;return n=t.some(i,function(t){return o.dupDetector(e,t)}),!n&&i.push(e),i.length<o.limit}),n&&n(o.sorter(i))}var o=this,a=[],r=!1;a=this.index.get(e),a=this.sorter(a).slice(0,this.limit),a.length<this.limit?r=this._getFromRemote(e,i):this._cancelLastRemoteRequest(),r||(a.length>0||!this.transport)&&n&&n(a)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&r.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}})}(this);var d=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),c=function(){"use strict";var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"}),e}(),u=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}return t.mixin(n.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+e,t)}}),n}(),p=function(){"use strict";function e(e,t,n,i){var o;if(!n)return this;for(t=t.split(s),n=i?r(n,i):n,this._callbacks=this._callbacks||{};o=t.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(s);t=e.shift();)delete this._callbacks[t];return this}function o(e){var t,n,i,o,r;if(!this._callbacks)return this;for(e=e.split(s),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)o=a(n.sync,this,[t].concat(i)),r=a(n.async,this,[t].concat(i)),o()&&l(r);return this}function a(e,t,n){function i(){for(var i,o=0,a=e.length;!i&&o<a;o+=1)i=!1===e[o].apply(t,n);return!i}return i}function r(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var s=/\s+/,l=function(){return window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}();return{onSync:n,onAsync:t,off:i,trigger:o}}(),f=function(e){"use strict";function n(e,n,i){for(var o,a=[],r=0,s=e.length;r<s;r++)a.push(t.escapeRegExChars(e[r]));return o=i?"\\b("+a.join("|")+")\\b":"("+a.join("|")+")",n?new RegExp(o):new RegExp(o,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function a(t){var n,i,a;return(n=s.exec(t.data))&&(a=e.createElement(o.tagName),o.className&&(a.className=o.className),i=t.splitText(n.index),i.splitText(n[0].length),a.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(a,i)),!!n}function r(e,t){for(var n,i=0;i<e.childNodes.length;i++)n=e.childNodes[i],3===n.nodeType?i+=t(n)?1:0:r(n,t)}var s;o=t.mixin({},i,o),o.node&&o.pattern&&(o.pattern=t.isArray(o.pattern)?o.pattern:[o.pattern],s=n(o.pattern,o.caseSensitive,o.wordsOnly),r(o.node,a))}}(window.document),h=function(){"use strict";function n(n){var o,a,s,l,d=this;n=n||{},n.input||e.error("input is missing"),o=t.bind(this._onBlur,this),a=t.bind(this._onFocus,this),s=t.bind(this._onKeydown,this),l=t.bind(this._onInput,this),this.$hint=e(n.hint),this.$input=e(n.input).on("blur.tt",o).on("focus.tt",a).on("keydown.tt",s),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){r[e.which||e.keyCode]||t.defer(t.bind(d._onInput,d,e))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function o(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function a(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var r;return r={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,p,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=r[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,i,o;switch(e){case"tab":i=this.getHint(),o=this.getInputValue(),n=i&&i!==o&&!a(t);break;case"up":case"down":n=!a(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!a(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n;e=this.getInputValue(),t=o(e,this.query),n=!!t&&this.query.length!==e.length,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,i;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),!(i=""!==e&&n&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),m=function(){"use strict";function n(n){n=n||{},n.templates=n.templates||{},n.source||e.error("missing source"),n.name&&!a(n.name)&&e.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||t.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=o(n.templates,this.displayFn),this.$el=e(d.dataset.replace("%CLASS%",this.name))}function i(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function o(e,n){function i(e){return"<p>"+n(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function a(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var r="ttDataset",s="ttValue",l="ttDatum";return n.extractDatasetName=function(t){return e(t).data(r)},n.extractValue=function(t){return e(t).data(s)},n.extractDatum=function(t){return e(t).data(l)},t.mixin(n.prototype,p,{_render:function(n,i){function o(){return p.templates.header({query:n,isEmpty:!u})}function a(){return p.templates.footer({query:n,isEmpty:!u})}if(this.$el){var u,p=this;this.$el.empty(),u=i&&i.length,!u&&this.templates.empty?this.$el.html(function(){return p.templates.empty({query:n,isEmpty:!0})}()).prepend(p.templates.header?o():null).append(p.templates.footer?a():null):u&&this.$el.html(function(){function o(t){var n;return n=e(d.suggestion).append(p.templates.suggestion(t)).data(r,p.name).data(s,p.displayFn(t)).data(l,t),n.children().each(function(){e(this).css(c.suggestionChild)}),n}var a,u;return a=e(d.suggestions).css(c.suggestions),u=t.map(i,o),a.append.apply(a,u),p.highlight&&f({className:"tt-highlight",node:a[0],pattern:n}),a}()).prepend(p.templates.header?o():null).append(p.templates.footer?a():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),g=function(){"use strict";function n(n){var o,a,r,s=this;n=n||{},n.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(n.datasets,i),o=t.bind(this._onSuggestionClick,this),a=t.bind(this._onSuggestionMouseEnter,this),r=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(n.menu).on("click.tt",".tt-suggestion",o).on("mouseenter.tt",".tt-suggestion",a).on("mouseleave.tt",".tt-suggestion",r),t.each(this.datasets,function(e){s.$menu.append(e.getRoot()),e.onSync("rendered",s._onRendered,s)})}function i(e){return new m(e)}return t.mixin(n.prototype,p,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,n,i,o;if(this.isOpen){if(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),i=t.index(n)+e,-1===(i=(i+1)%(t.length+1)-1))return void this.trigger("cursorRemoved");i<-1&&(i=t.length-1),this._setCursor(o=t.eq(i)),this._ensureVisible(o)}},_ensureVisible:function(e){var t,n,i,o;t=e.position().top,n=t+e.outerHeight(!0),i=this.$menu.scrollTop(),o=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),t<0?this.$menu.scrollTop(i+t):o<n&&this.$menu.scrollTop(i+(n-o))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:m.extractDatum(e),value:m.extractValue(e),datasetName:m.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function n(t){t.update(e)}t.each(this.datasets,n)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),n}(),y=function(){"use strict";function n(n){var o,a,r;n=n||{},n.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),o=this.$node.find(".tt-dropdown-menu"),a=this.$node.find(".tt-input"),r=this.$node.find(".tt-hint"),a.on("blur.tt",function(e){var n,i,r;n=document.activeElement,i=o.is(n),r=o.has(n).length>0,t.isMsie()&&(i||r)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){a.focus()}))}),o.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=n.eventBus||new u({el:a}),this.dropdown=new g({menu:o,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new h({input:a,hint:r}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(t,n){var i,a,s,l;i=e(t),a=e(d.wrapper).css(c.wrapper),s=e(d.dropdown).css(c.dropdown),l=i.clone().css(c.hint).css(o(i)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),i.data(r,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?c.input:c.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(e){}return i.wrap(a).parent().prepend(n?l:null).append(s)}function o(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function a(e){var n=e.find(".tt-input");t.each(n.data(r),function(e,i){t.isUndefined(e)?n.removeAttr(i):n.attr(i,e)}),n.detach().removeData(r).removeClass("tt-input").insertAfter(e),e.remove()}var r="ttAttrs";return t.mixin(n.prototype,{_onSuggestionClicked:function(e,t){var n
;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),t.preventDefault()):this.autoselect&&i&&(this._select(i),t.preventDefault())},_onTabKeyed:function(e,t){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,n,i,o,a,r;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=h.normalizeQuery(n),o=t.escapeRegExChars(i),a=new RegExp("^(?:"+o+")(.+$)","i"),r=a.exec(e.value),r?this.input.setHint(n+r[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,i,o;t=this.input.getHint(),n=this.input.getQuery(),i=e||this.input.isCursorAtEnd(),t&&n!==t&&i&&(o=this.dropdown.getDatumForTopSuggestion(),o&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=t.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),a(this.$node),this.$node=null}}),n}();!function(){"use strict";var n,i,o;n=e.fn.typeahead,i="ttTypeahead",o={initialize:function(n,o){function a(){var a,r=e(this);t.each(o,function(e){e.highlight=!!n.highlight}),a=new y({input:r,eventBus:new u({el:r}),withHint:!!t.isUndefined(n.hint)||!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:o}),r.data(i,a)}return o=t.isArray(o)?o:[].slice.call(arguments,1),n=n||{},this.each(a)},open:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.open()}return this.each(t)},close:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.close()}return this.each(t)},val:function(t){function n(){var n,o=e(this);(n=o.data(i))&&n.setVal(t)}return arguments.length?this.each(n):function(e){var t,n;return(t=e.data(i))&&(n=t.getVal()),n}(this.first())},destroy:function(){function t(){var t,n=e(this);(t=n.data(i))&&(t.destroy(),n.removeData(i))}return this.each(t)}},e.fn.typeahead=function(t){var n;return o[t]&&"initialize"!==t?(n=this.filter(function(){return!!e(this).data(i)}),o[t].apply(n,[].slice.call(arguments,1))):o.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}}()}(window.jQuery),jQuery(document).onZonesAndDomReady(function(){"use strict";fastdom.measure(function(){function e(e,t,n){fastdom.mutate(function(){jQuery(e).off(t).on(t,n)})}function t(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?(e(".js__image--expandable","click",function(){var e=jQuery(this);fastdom.mutate(function(){var t=e.parents(".el__embedded");t.find(".el__image__close--expandable").show(),e.stop().animate({width:"100%","margin-top":E,"margin-right":0},w,function(){fastdom.mutate(function(){CNN.ResponsiveImages.processChildrenImages(this),t.addClass("el__embedded--open").height(e.outerHeight())}.bind(this))}).show().addClass("el__image--expandfull").removeClass("el__image--expandable")})}),e(".js__image__close--expandable","click",function(e){var t=jQuery(this),n=t.parents(".el__embedded");fastdom.mutate(function(){n.removeClass("el__embedded--open").css("height","auto"),t.hide(),n.find(".js__image--expandable").stop().animate({width:y,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){CNN.ResponsiveImages.processChildrenImages(this)}.bind(this))}).show().addClass("el__image--expandable").removeClass("el__image--expandfull")}),e.stopPropagation()}),fastdom.mutate(function(){jQuery(".el__image--expandable .el__image__expand--expandable").show(),jQuery(".el__image--expandfull .el__image__close--expandable").show()})):fastdom.mutate(function(){jQuery(".el__image__close--expandable").hide(),jQuery(".el__image__expand--expandable").hide(),jQuery(".js__image--expandable").off()})}function n(e,t,n,i){var o,a,r,s,l=!!n;!0!==l&&!0!==i||(a=t.find(".media__video--responsive"),o=a.attr("id"),"fave"===CNN.VideoPlayer.getLibraryName(o)&&(s=FAVE.player.getInstance(o),s.resume())),r=function(){var n,r=t.parents(".el__embedded"),d=t.find(".media__video--thumbnail"),c=t.find(".el__storyelements--close"),u=r.find(".video-red-spinner"),p=a||t.find(".media__video--responsive"),f=p.find("object").get(0),h=p.find("video").get(0),m=o||p.attr("id"),y=navigator.userAgent.toLowerCase();"undefined"===typeof g&&(g=t.width()),!1===l&&!0!==i&&"fave"===CNN.VideoPlayer.getLibraryName(m)&&(s=FAVE.player.getInstance(m),s.resume()),n=function(){d.css("position",""),t.stop().animate({width:"100%","margin-top":E,"margin-right":0},w,function(){fastdom.mutate(function(){"videoLoader"===CNN.VideoPlayer.getLibraryName(m)&&(_?(u.show(),-1===y.indexOf("msie")&&-1===y.indexOf("trident")||"undefined"===typeof f||f.replayContent()):"undefined"!==typeof h&&h.play(),t.find(".el__video__play-button").triggerHandler("click")),r.addClass("el__embedded--open")})}),t.show().addClass("el__video--expandfull").removeClass(e),p.show(),window.innerWidth>CNN.minWidthForExpandElements?(c.show(),c.css("display","block")):(c.hide(),c.css("display","none")),FAVE.settings.enabled&&jQuery(window).on("orientationchange",function(){fastdom.mutate(function(){window.innerWidth>CNN.minWidthForExpandElements?(c.show(),c.css("display","block")):(c.hide(),c.css("display","none"))})})},!0===i?n():fastdom.mutate(n)},!0===i?r():fastdom.measure(r)}function i(e,t,n){fastdom.measure(function(){var n,i,o=t.parents(".el__embedded"),a=o.find(".media__video--thumbnail"),r=o.find(".media__video--responsive"),s=o.find(".video-red-spinner"),l=r.find("object").get(0),d=r.find("video").get(0),c=r.attr("id"),u=navigator.userAgent.toLowerCase();t=t.parent(),fastdom.mutate(function(){o.removeClass("el__embedded--open"),t.stop().animate({width:g,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){t.css("width","")})}),t.find(".el__video__close--expandable").hide(),t.addClass(e).removeClass("el__video--expandfull"),r.hide(),a.show(),a.css("position","relative"),"fave"===CNN.VideoPlayer.getLibraryName(c)?(i=FAVE.player.getInstance(c),i.pause()):_?(s.hide(),-1===u.indexOf("msie")&&-1===u.indexOf("trident")||"undefined"===typeof l||l.stopContent()):"undefined"!==typeof d&&d.pause()}),n=o.find(".js-media__video .js-video__end-slate").eq(0),fastdom.mutate(function(){n.removeClass("video__end-slate--active").addClass("video__end-slate--inactive"),o.find(".js-video-demand").show()})}),n.stopPropagation()}function o(){fastdom.measure(function(){e(".js__video--standard .media__video--thumbnail","click",function(e){n("el__video--standard",jQuery(this).parents(".js__video--standard"),e)}),e(".js__video--expandable .media__video--thumbnail","click",function(e){n("el__video--expandable",jQuery(this).parents(".js__video--expandable"),e)}),e(".js__video__close--standard","click",function(e){i("el__video--standard",jQuery(this),e)}),e(".js__video__close--expandable","click",function(e){i("el__video--expandable",jQuery(this),e)}),fastdom.mutate(function(){jQuery(".el__video--expandfull .el__video__close--standard").show(),jQuery(".el__video--expandfull .el__video__close--expandable").show(),jQuery(".el__video--expandable .el__video__expand--expandable").show(),jQuery(".el__video--standard .el__video__expand--standard").show(),jQuery(".js-video-demand").show()}),A=!1}.bind(this))}function a(){fastdom.measure(function(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?(e(".js__video--standard","click",function(e){n("el__video--standard",jQuery(this),e)}),e(".js__video--expandable","click",function(e){n("el__video--expandable",jQuery(this),e)}),e(".js__video__close--standard","click",function(e){i("el__video--standard",jQuery(this),e)}),e(".js__video__close--expandable","click",function(e){i("el__video--expandable",jQuery(this),e)}),fastdom.mutate(function(){jQuery(".el__video--expandfull .el__video__close--standard").show(),jQuery(".el__video--expandfull .el__video__close--expandable").show(),jQuery(".el__video--expandable .el__video__expand--expandable").show(),jQuery(".el__video--standard .el__video__expand--standard").show(),jQuery(".js-video-demand").show()})):fastdom.mutate(function(){jQuery(".el__video__close--standard").hide(),jQuery(".el__video__expand--standard").hide(),jQuery(".el__video__close--expandable").hide(),jQuery(".el__video__expand--expandable").hide(),!0===CNN.orientationLandscape?jQuery(".js-video-demand").show():jQuery(".js-video-demand").hide()}),!1===A&&!0===CNN.orientationLandscape&&(jQuery(".js__video--standard").each(function(){var e,t=jQuery(this),i=t.find(".js-video-demand");0===t.find(".js-el__video__play-button").length()?(e=t.find(".el__video__expand--standard"),fastdom.mutate(function(e,t){e.hide(),!0===CNN.orientationLandscape&&n("el__video--standard",t,null,!0)}.bind(this,i,e))):fastdom.mutate(function(e){e.show()}.bind(this,i))}),jQuery(".js__video--expandable").each(function(){var e,t=jQuery(this),i=t.find(".js-video-demand");0===t.find(".js-el__video__play-button").length()?(e=t.find(".el__video__expand--expandable"),fastdom.mutate(function(e,t){e.hide(),!0===CNN.orientationLandscape&&n("el__video--expandable",t,null,!0)}.bind(this,i,e))):fastdom.mutate(function(e){e.show()}.bind(this,i))})),A=!1}.bind(this))}function r(){FAVE.settings.enabled?o():a()}function s(e,t,n){t.is(".el__gallery--expandfull")||("undefined"===typeof m&&(m=t.width()),CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?fastdom.measure(function(){var n,i,o=t.parents(".el__embedded"),a=t,r=t.find(".el__gallery--teaseimage"),s=t.find(".el-carousel__wrapper"),l=s.find(".js-owl-carousel"),d=s.find(".js-owl-filmstrip"),c=!!s.attr("data-initialized");i=function(e){e.css({opacity:"1",position:"relative","z-index":"0"}),s.attr("data-initialized","true")},fastdom.mutate(function(){s.css({display:"block",visibility:"visible",opacity:"0"}),a.stop().animate({width:o.width()+"px","margin-top":E,"margin-right":0},w,function(){fastdom.mutate(function(){a.css("width","100%"),n=9*o.width()/16/2-b,l.siblings(".ad-slide").find(".ad-slide__prev, .ad-slide__next").css("top",n+"px"),o.addClass("el__embedded--open"),o.css("overflow","hidden"),a.css({"min-height":r.height()+"px","max-height":r.height()+"px"}),setTimeout(function(e,t){fastdom.mutate(function(){e.css({"max-height":1.5*t.height()+"px"}),CNN.Carousel.refreshCarousels()})},100,a,l),!1===c||l.data("owl.carousel").width()!==a.width()?(l.on("resized.owl.carousel",{$wrapper:s},function(e){fastdom.mutate(function(){i(e.data.$wrapper),jQuery(this).off("resized.owl.carousel")}.bind(this))}),d.on("resized.owl.carousel",function(e){fastdom.mutate(function(){CNN.Carousel.owl().setNumberOfItems(e),e.relatedTarget.to(0),jQuery(this).off("resized.owl.carousel")}.bind(this))}),l.data("owl.carousel").onResize(),d.data("owl.carousel").onResize()):i(s),a.addClass("el__gallery--expandfull").removeClass(e),"undefined"!==typeof s.attr("isExtended")&&"false"!==s.attr("isExtended")||(setTimeout(function(){fastdom.mutate(function(){p(jQuery(s.find(".owl-wrapper-outer")),!0,!0)})},2e3),s.attr("isExtended","true"))}.bind(this))})}.bind(this))}):n.stopPropagation())}function l(e,t,n){fastdom.measure(function(){var n=t.parents(".el__embedded"),i=n.find(".el-carousel__wrapper"),o=i.find(".owl-wrapper-outer"),a=o.find(".el__gallery-caption"),r=t.parents(".el__gallery--expandfull");fastdom.mutate(function(){n.css({"max-height":"",overflow:""}),i.css({position:"absolute",opacity:0}),n.removeClass("el__embedded--open"),r.css({"min-height":"","max-height":""}),r.stop().animate({width:m,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){jQuery(this).addClass(e).removeClass("el__gallery--expandfull")}.bind(this))}),i.attr("isExtended","false"),r.addClass(e).removeClass("el__gallery--expandfull"),a.hasClass("el__gallery-caption--closed")&&(a.toggleClass("el__gallery-caption--closed"),a.text(r.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption"))}.bind(this))}.bind(this)),n.stopPropagation()}function d(){window.innerWidth>CNN.minWidthForExpandElements?(e(".js__gallery--standard","click",function(e){s("el__gallery--standard",jQuery(this),e)}),e(".js__gallery--expandable","click",function(e){s("el__gallery--expandable",jQuery(this),e)}),e(".js__gallery__close--standard","click",function(e){l("el__gallery--standard",jQuery(this),e)}),e(".js__gallery__close--expandable","click",function(e){l("el__gallery--expandable",jQuery(this),e)}),jQuery(".js__gallery__close--standard, .js__gallery__close--expandable").trigger("click"),fastdom.mutate(function(){jQuery(".el-carousel__wrapper").not(jQuery(".zn-large-media .el-carousel__wrapper, .el__embedded--fullstandardwidth .el-carousel__wrapper,.pg-special-article__head .el-carousel__wrapper")).css({opacity:"0",position:"","z-index":""})})):fastdom.mutate(function(){jQuery(".el-carousel__wrapper").css({opacity:"1",position:"relative","z-index":"0"})}),!1===v&&window.innerWidth<=CNN.showGalleryCaptionWidth&&c()}function c(){fastdom.measure(function(){jQuery(".js__leafmedia--gallery").each(function(e,t){fastdom.mutate(function(e,t){e.hide(),t.addClass("el__gallery-caption--closed").text("Show Caption")}.bind(this,jQuery(".el__gallery_image-title",t),jQuery(".el__gallery-caption",t)))})})}function u(e,t){var n=jQuery(e),i=n.closest(".owl-stage"),o=i.find(".el__gallery_image-title"),a=i.find(".el__gallery-caption");fastdom.mutate(function(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?a.hasClass("el__gallery-caption--closed")?(a.removeClass("el__gallery-caption--closed"),o.show()):(a.addClass("el__gallery-caption--closed"),o.hide()):(a.toggleClass("el__gallery-caption--closed"),o.toggle()),CNN.Carousel.refreshCarousels(),a.text(a.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption")})}function p(e,t,n){var i=0,o=0,a=jQuery(".owl-item",e).each(function(){o=jQuery(this).height(),t&&jQuery(this).attr("owlItemHeight",o),o>i&&(i=o)});t&&jQuery(e).attr("max",i),a.each(function(){var i=jQuery(this),o=jQuery(".el__gallery-showhide",i);t||n?o.css("bottom",i.attr("owlItemHeight")-jQuery(e).attr("max")+"px"):o.css("bottom","0px")})}function f(e){e&&fastdom.mutate(function(){var t,n;for(t=0,n=e.length;t<n;t++)p(e[t],!0,!0)})}function h(){t(),r(),d()}var m,g,y=jQuery(".js__image--expandable").width(),v=!1,w=700,b=30,_=!(!Modernizr||Modernizr.phone||Modernizr.mobile||Modernizr.tablet),C=0!==jQuery("html.mobile").length,x=jQuery(window),A=!0,E="36px",S=CNN.Utils.exists;CNN.contentModel=CNN.contentModel||{},CNN.CurrentSize=CNN.CurrentSize||{},CNN.CurrentSize.getClientWidth=CNN.CurrentSize.getClientWidth||jQuery.noop,CNN.minWidthForExpandElements=480,CNN.showGalleryCaptionWidth=640,CNN.orientationLandscape=!1,CNN.adLockingDisableWidth=960,CNN.adLockEnable=!!(S(CNN.AdsConfig)&&!0===CNN.AdsConfig.enableAdLock&&CNN.CurrentSize.getClientWidth()>=CNN.adLockingDisableWidth&&0!==jQuery(".pg-rail.pg-rail-tall__rail").length&&0!==jQuery(".pg-rail-tall__head").length),h(),C?x.on("orientationchange",function(){"function"===typeof CNN.Carousel.resetOnResize&&CNN.Carousel.resetOnResize()}):jQuery(window).resize(function(){v=!0,h(),setTimeout(function(){f(jQuery(".owl-wrapper-outer"))},2e3)}),function(){function e(e,t){function n(){o.addClass(t)}function i(){o.removeClass(t)}var o=jQuery(e).children().last(),a=CNN.eventListenerWithOptions&&CNN.eventListenerWithOptions.addListener;a(e,"touchstart",n,{passive:!0}),a(e,"touchcancel",i,{passive:!0}),a(e,"touchend",i,{passive:!0})}function t(t,o){e(o,i[n].className)}var n=0,i=[];for(i=[{selector:".js__image--expandable",className:"el__image--touchhover"},{selector:".js__video--standard",className:"el__video--touchhover"},{selector:".js__video--expandable",className:"el__video--touchhover"},{selector:".js__gallery--standard",className:"el__gallery--touchhover"},{selector:".js__gallery--expandable",className:"el__gallery--touchhover"}],n=0;n<i.length;n++)jQuery(i[n].selector).each(t)}(),jQuery(".js-el__gallery-caption").on("click",function(){fastdom.measure(function(){u(this)}.bind(this))})})}),function(e){"use strict";var t=e.getElementsByTagName("html")[0];t&&t.dataset&&Modernizr&&(Modernizr.phone||Modernizr.mobile?t.dataset.formfactor="mobile":t.dataset.formfactor=Modernizr.tablet?"tablet":"desktop")}(document);var nativo={},$staggeredZone,$staggeredColumn,$nativeContainer,layoutSize,$staggeredNativo,$authorDetails,$twitterImage,$nativeEmbedVideo,$bigPicture,isGalleryRendered=!1,$nativeHubCarousel,isEpicRendered=!1;!function(){"use strict";function e(e,t){var n=jQuery(e).closest(document.getElementById("bigPicture")),i=n.find(".media__caption"),o=n.find(".el__gallery-caption");CNN.CurrentSize=CNN.CurrentSize||{},CNN.CurrentSize.getClientWidth=CNN.CurrentSize.getClientWidth||jQuery.noop,CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?o.hasClass("el__gallery-caption--closed")?o.removeClass("el__gallery-caption--closed"):o.addClass("el__gallery-caption--closed"):o.toggleClass("el__gallery-caption--closed"),i.toggle(t),o.text(o.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption")}function t(e){var t=jQuery(".js-pg-sponsor .owl-stage-outer .owl-stage .owl-item.synced"),i=t.next(),o=t.prev();"prev"===e?"undefined"!==typeof o&&o.length>0&&n(o):"undefined"!==typeof i&&i.length>0&&n(i)}function n(e){var t=jQuery(".js-pg-sponsor"),n=t.find(".cnngo-bigPicture"),i=n.find("img"),o=e.find(".link").attr("data-img-full");i.attr("src",o),e.parent().find(".owl-item").removeClass("synced"),e.addClass("synced"),n.find(".js-active-count").html(e.closest(".owl-item").index()+1),n.find(".image__caption").html(e.find(".link").attr("data-value"))}nativo={fbFeed:"",twFeed:"",social_hub:{icons:{twitter:"",facebook:"",linkedin:"",google:"",pinterest:"",instagram:""},fb_like:"",tw_follow:""}},nativo.renderAuthor=function(){"string"===typeof nativo.authorName&&nativo.authorName.length>0&&($authorDetails=jQuery(".js-sponsor-article-author"),$authorDetails.find(".js-author_name").text(nativo.authorName+","),$authorDetails.show())},nativo.renderEpic=function(){var e="international"===CNN.contentModel.edition?"cnni":"cnn";"string"===typeof nativo.epicAdName&&nativo.epicAdName.length>0&&!isEpicRendered&&(window.AdFuel.processNewRegistry(CNN.epicAdRegistry+"/"+e+"_native_"+nativo.epicAdName+".js"),jQuery(".js-epicAd_Render").show(),isEpicRendered=!0)},nativo.renderFacebook=function(){var e,t;"string"===typeof nativo.fbFeed&&nativo.fbFeed.length>0&&(e=encodeURIComponent(nativo.fbFeed),t=document.getElementById("fb-likebox"),t.innerHTML='<iframe src="//www.facebook.com/plugins/likebox.php?href='+e+'&amp;width=300&amp;height=590&amp;show_faces=true&amp;colorscheme=light&amp;stream=true&amp;show_border=true&amp;header=true&amp;appId=70673860847" scrolling="no" frameborder="0" class="sponsor-content-fb" allowTransparency="true"></iframe>')},nativo.renderTwitter=function(){var e,t;"string"===typeof nativo.twFeed&&nativo.twFeed.length>0&&(jQuery(document.getElementById("tw-feedbox")).html(nativo.twFeed),jQuery(".js-right-rail-tw").show()),t=document.getElementsByTagName("script")[0],document.getElementById("twitter-wjs")||(e=document.createElement("script"),e.id="twitter-wjs",e.src="//platform.twitter.com/widgets.js",t.parentNode.insertBefore(e,t)),"string"===typeof nativo.twitterImage&&nativo.twitterImage.length>0&&($twitterImage=jQuery(".js-twitterImage"),$twitterImage.find("img").attr("src",nativo.twitterImage),$twitterImage.show())},nativo.renderGallery=function(){setTimeout(function(){var n,i,o,a,r,s,l,d,c;jQuery(".js-pg-sponsor .owl-carousel").owlCarousel({slideSpeed:300,pagination:!0,paginationSpeed:400,items:9,nav:!0,navText:["",""],dots:!1,lazyLoad:!0,loop:!1,autoWidth:!0,autoHeight:!1}),n=jQuery(".js-pg-sponsor"),i=n.find(".cnngo-bigPicture"),o=i.find("img"),a=n.find(".owl-carousel").find(".link"),r=a.first().attr("data-img-full"),s=a.first().attr("data-value"),l=i.attr("data-title"),d=n.find(".owl-stage-outer .owl-stage"),c=d.find(".owl-item").length,0===i.find("img").length&&i.append("<img/>"),o.attr("src",r),i.append(n.find(".js-galleryCaption")),i.append(n.find(".js-owl-nav")),c>=1&&(i.find(".js-active-count").html(1),i.find(".js-total-count").html(c),i.find(".js-gallery-title").html(l),i.find(".el__storyelement__gray").html(" "+c+" Photos"),d.find(".owl-item").first().addClass("synced"),i.find(".image__caption").html(s)),a.on("click",function(e){var t=jQuery(this);o.attr("src",t.data("imgFull")),t.parent().parent().find(".owl-item").removeClass("synced"),t.parent().addClass("synced"),i.find(".js-active-count").html(t.closest(".owl-item").index()+1),i.find(".image__caption").html(t.attr("data-value"))}),i.find(".js-el__gallery-caption").click(function(){e(this,"slow")}),i.find(".js-owl-prev").click(function(){t("prev")}),i.find(".js-owl-next").click(function(){t("next")}),changeOwlCarousalWidth()},800)},jQuery(window).resize(function(){setTimeout(function(){changeOwlCarousalWidth()},300)})}(),function(){"use strict";var e;try{CNN.INJECTOR.createDeferredForFeature("header1"),CNN.INJECTOR.createDeferredForFeature("header2"),CNN.INJECTOR.createDeferredForFeature("footer"),CNN.INJECTOR.createDeferredForFeature("videodemanddust"),e=["onZonesAndDomReady","onZoneRendered"],CNN.INJECTOR.registerEvents(e),CNN.INJECTOR.scriptComplete("header1"),CNN.INJECTOR.scriptComplete("header2")}catch(e){console.log(e)}}();